
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.7">
    
    
      
        <title>AsyncTab - ichrome</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ichrome" class="md-header__button md-logo" aria-label="ichrome" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ichrome
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              AsyncTab
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ichrome" class="md-nav__button md-logo" aria-label="ichrome" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ichrome
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Intro
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cmd/" class="md-nav__link">
        Command Line
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          AsyncTab
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        AsyncTab
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ichrome.AsyncTab" class="md-nav__link">
    ichrome.AsyncTab
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.__call__" class="md-nav__link">
    __call__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.activate" class="md-nav__link">
    activate()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.activate_tab" class="md-nav__link">
    activate_tab()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.add_js_onload" class="md-nav__link">
    add_js_onload()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.alert" class="md-nav__link">
    alert()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.auto_enable" class="md-nav__link">
    auto_enable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.browser_version" class="md-nav__link">
    browser_version()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.clear_browser_cache" class="md-nav__link">
    clear_browser_cache()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.clear_browser_cookies" class="md-nav__link">
    clear_browser_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.click" class="md-nav__link">
    click()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.close" class="md-nav__link">
    close()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.close_tab" class="md-nav__link">
    close_tab()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.confirm" class="md-nav__link">
    confirm()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.connect" class="md-nav__link">
    connect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.contains" class="md-nav__link">
    contains()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.crash" class="md-nav__link">
    crash()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.delete_cookies" class="md-nav__link">
    delete_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.disable" class="md-nav__link">
    disable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.enable" class="md-nav__link">
    enable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.ensure_callback_type" class="md-nav__link">
    ensure_callback_type()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.ensure_timeout" class="md-nav__link">
    ensure_timeout()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.findall" class="md-nav__link">
    findall()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.findone" class="md-nav__link">
    findone()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.gc" class="md-nav__link">
    gc()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_all_cookies" class="md-nav__link">
    get_all_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_cookies" class="md-nav__link">
    get_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_current_title" class="md-nav__link">
    get_current_title()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_current_url" class="md-nav__link">
    get_current_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_element_clip" class="md-nav__link">
    get_element_clip()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_frame_tree" class="md-nav__link">
    get_frame_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_history_entry" class="md-nav__link">
    get_history_entry()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_history_list" class="md-nav__link">
    get_history_list()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_html" class="md-nav__link">
    get_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_page_frame_id" class="md-nav__link">
    get_page_frame_id()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_page_size" class="md-nav__link">
    get_page_size()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_request_post_data" class="md-nav__link">
    get_request_post_data()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_response" class="md-nav__link">
    get_response()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_response_body" class="md-nav__link">
    get_response_body()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_screen_size" class="md-nav__link">
    get_screen_size()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_smooth_steps" class="md-nav__link">
    get_smooth_steps()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_value" class="md-nav__link">
    get_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_variable" class="md-nav__link">
    get_variable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.goto" class="md-nav__link">
    goto()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.goto_history" class="md-nav__link">
    goto_history()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.goto_history_relative" class="md-nav__link">
    goto_history_relative()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.handle_dialog" class="md-nav__link">
    handle_dialog()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.history_back" class="md-nav__link">
    history_back()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.history_forward" class="md-nav__link">
    history_forward()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.html" class="md-nav__link">
    html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.includes" class="md-nav__link">
    includes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.inject_html" class="md-nav__link">
    inject_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.inject_js_url" class="md-nav__link">
    inject_js_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.insertAdjacentHTML" class="md-nav__link">
    insertAdjacentHTML()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.iter_events" class="md-nav__link">
    iter_events()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.iter_fetch" class="md-nav__link">
    iter_fetch()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.js" class="md-nav__link">
    js()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.js_code" class="md-nav__link">
    js_code()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.keyboard_send" class="md-nav__link">
    keyboard_send()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_click" class="md-nav__link">
    mouse_click()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_click_element_rect" class="md-nav__link">
    mouse_click_element_rect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_drag_rel" class="md-nav__link">
    mouse_drag_rel()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_drag_rel_chain" class="md-nav__link">
    mouse_drag_rel_chain()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_move" class="md-nav__link">
    mouse_move()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_move_rel" class="md-nav__link">
    mouse_move_rel()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_move_rel_chain" class="md-nav__link">
    mouse_move_rel_chain()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_press" class="md-nav__link">
    mouse_press()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_release" class="md-nav__link">
    mouse_release()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.pass_auth_proxy" class="md-nav__link">
    pass_auth_proxy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.prompt" class="md-nav__link">
    prompt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.querySelector" class="md-nav__link">
    querySelector()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.querySelectorAll" class="md-nav__link">
    querySelectorAll()
  </a>
  
    <nav class="md-nav" aria-label="querySelectorAll()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.querySelectorAll--1-get-attribute-of-the-selected-tag" class="md-nav__link">
    1. get attribute of the selected tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.querySelectorAll--2-remove-href-attr-of-all-the-selected-tags" class="md-nav__link">
    2. remove href attr of all the selected tags
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.recv" class="md-nav__link">
    recv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.refresh_tab_info" class="md-nav__link">
    refresh_tab_info()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.reload" class="md-nav__link">
    reload()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.remove_js_onload" class="md-nav__link">
    remove_js_onload()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.repl" class="md-nav__link">
    repl()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.reset_history" class="md-nav__link">
    reset_history()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.screenshot" class="md-nav__link">
    screenshot()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.screenshot_element" class="md-nav__link">
    screenshot_element()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.send" class="md-nav__link">
    send()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.setBlockedURLs" class="md-nav__link">
    setBlockedURLs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_cookie" class="md-nav__link">
    set_cookie()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_cookies" class="md-nav__link">
    set_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_file_input" class="md-nav__link">
    set_file_input()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_flatten" class="md-nav__link">
    set_flatten()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_html" class="md-nav__link">
    set_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_ua" class="md-nav__link">
    set_ua()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_url" class="md-nav__link">
    set_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.snapshot_mhtml" class="md-nav__link">
    snapshot_mhtml()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.stop_loading_page" class="md-nav__link">
    stop_loading_page()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.title" class="md-nav__link">
    title()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.url" class="md-nav__link">
    url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_console" class="md-nav__link">
    wait_console()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_console_value" class="md-nav__link">
    wait_console_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_event" class="md-nav__link">
    wait_event()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_findall" class="md-nav__link">
    wait_findall()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_includes" class="md-nav__link">
    wait_includes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_loading" class="md-nav__link">
    wait_loading()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_loading_finished" class="md-nav__link">
    wait_loading_finished()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_request" class="md-nav__link">
    wait_request()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_request_loading" class="md-nav__link">
    wait_request_loading()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_response" class="md-nav__link">
    wait_response()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_response_context" class="md-nav__link">
    wait_response_context()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_tag" class="md-nav__link">
    wait_tag()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_tag_click" class="md-nav__link">
    wait_tag_click()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_tags" class="md-nav__link">
    wait_tags()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AsyncChromeDaemon/" class="md-nav__link">
        AsyncChromeDaemon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AsyncChrome/" class="md-nav__link">
        AsyncChrome
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../base/" class="md-nav__link">
        base
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ichrome.AsyncTab" class="md-nav__link">
    ichrome.AsyncTab
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.__call__" class="md-nav__link">
    __call__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.activate" class="md-nav__link">
    activate()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.activate_tab" class="md-nav__link">
    activate_tab()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.add_js_onload" class="md-nav__link">
    add_js_onload()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.alert" class="md-nav__link">
    alert()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.auto_enable" class="md-nav__link">
    auto_enable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.browser_version" class="md-nav__link">
    browser_version()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.clear_browser_cache" class="md-nav__link">
    clear_browser_cache()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.clear_browser_cookies" class="md-nav__link">
    clear_browser_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.click" class="md-nav__link">
    click()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.close" class="md-nav__link">
    close()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.close_tab" class="md-nav__link">
    close_tab()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.confirm" class="md-nav__link">
    confirm()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.connect" class="md-nav__link">
    connect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.contains" class="md-nav__link">
    contains()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.crash" class="md-nav__link">
    crash()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.delete_cookies" class="md-nav__link">
    delete_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.disable" class="md-nav__link">
    disable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.enable" class="md-nav__link">
    enable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.ensure_callback_type" class="md-nav__link">
    ensure_callback_type()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.ensure_timeout" class="md-nav__link">
    ensure_timeout()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.findall" class="md-nav__link">
    findall()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.findone" class="md-nav__link">
    findone()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.gc" class="md-nav__link">
    gc()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_all_cookies" class="md-nav__link">
    get_all_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_cookies" class="md-nav__link">
    get_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_current_title" class="md-nav__link">
    get_current_title()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_current_url" class="md-nav__link">
    get_current_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_element_clip" class="md-nav__link">
    get_element_clip()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_frame_tree" class="md-nav__link">
    get_frame_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_history_entry" class="md-nav__link">
    get_history_entry()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_history_list" class="md-nav__link">
    get_history_list()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_html" class="md-nav__link">
    get_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_page_frame_id" class="md-nav__link">
    get_page_frame_id()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_page_size" class="md-nav__link">
    get_page_size()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_request_post_data" class="md-nav__link">
    get_request_post_data()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_response" class="md-nav__link">
    get_response()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_response_body" class="md-nav__link">
    get_response_body()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_screen_size" class="md-nav__link">
    get_screen_size()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_smooth_steps" class="md-nav__link">
    get_smooth_steps()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_value" class="md-nav__link">
    get_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.get_variable" class="md-nav__link">
    get_variable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.goto" class="md-nav__link">
    goto()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.goto_history" class="md-nav__link">
    goto_history()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.goto_history_relative" class="md-nav__link">
    goto_history_relative()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.handle_dialog" class="md-nav__link">
    handle_dialog()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.history_back" class="md-nav__link">
    history_back()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.history_forward" class="md-nav__link">
    history_forward()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.html" class="md-nav__link">
    html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.includes" class="md-nav__link">
    includes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.inject_html" class="md-nav__link">
    inject_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.inject_js_url" class="md-nav__link">
    inject_js_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.insertAdjacentHTML" class="md-nav__link">
    insertAdjacentHTML()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.iter_events" class="md-nav__link">
    iter_events()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.iter_fetch" class="md-nav__link">
    iter_fetch()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.js" class="md-nav__link">
    js()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.js_code" class="md-nav__link">
    js_code()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.keyboard_send" class="md-nav__link">
    keyboard_send()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_click" class="md-nav__link">
    mouse_click()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_click_element_rect" class="md-nav__link">
    mouse_click_element_rect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_drag_rel" class="md-nav__link">
    mouse_drag_rel()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_drag_rel_chain" class="md-nav__link">
    mouse_drag_rel_chain()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_move" class="md-nav__link">
    mouse_move()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_move_rel" class="md-nav__link">
    mouse_move_rel()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_move_rel_chain" class="md-nav__link">
    mouse_move_rel_chain()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_press" class="md-nav__link">
    mouse_press()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.mouse_release" class="md-nav__link">
    mouse_release()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.pass_auth_proxy" class="md-nav__link">
    pass_auth_proxy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.prompt" class="md-nav__link">
    prompt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.querySelector" class="md-nav__link">
    querySelector()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.querySelectorAll" class="md-nav__link">
    querySelectorAll()
  </a>
  
    <nav class="md-nav" aria-label="querySelectorAll()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.querySelectorAll--1-get-attribute-of-the-selected-tag" class="md-nav__link">
    1. get attribute of the selected tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.querySelectorAll--2-remove-href-attr-of-all-the-selected-tags" class="md-nav__link">
    2. remove href attr of all the selected tags
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.recv" class="md-nav__link">
    recv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.refresh_tab_info" class="md-nav__link">
    refresh_tab_info()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.reload" class="md-nav__link">
    reload()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.remove_js_onload" class="md-nav__link">
    remove_js_onload()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.repl" class="md-nav__link">
    repl()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.reset_history" class="md-nav__link">
    reset_history()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.screenshot" class="md-nav__link">
    screenshot()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.screenshot_element" class="md-nav__link">
    screenshot_element()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.send" class="md-nav__link">
    send()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.setBlockedURLs" class="md-nav__link">
    setBlockedURLs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_cookie" class="md-nav__link">
    set_cookie()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_cookies" class="md-nav__link">
    set_cookies()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_file_input" class="md-nav__link">
    set_file_input()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_flatten" class="md-nav__link">
    set_flatten()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_html" class="md-nav__link">
    set_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_ua" class="md-nav__link">
    set_ua()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.set_url" class="md-nav__link">
    set_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.snapshot_mhtml" class="md-nav__link">
    snapshot_mhtml()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.stop_loading_page" class="md-nav__link">
    stop_loading_page()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.title" class="md-nav__link">
    title()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.url" class="md-nav__link">
    url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_console" class="md-nav__link">
    wait_console()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_console_value" class="md-nav__link">
    wait_console_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_event" class="md-nav__link">
    wait_event()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_findall" class="md-nav__link">
    wait_findall()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_includes" class="md-nav__link">
    wait_includes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_loading" class="md-nav__link">
    wait_loading()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_loading_finished" class="md-nav__link">
    wait_loading_finished()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_request" class="md-nav__link">
    wait_request()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_request_loading" class="md-nav__link">
    wait_request_loading()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_response" class="md-nav__link">
    wait_response()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_response_context" class="md-nav__link">
    wait_response_context()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_tag" class="md-nav__link">
    wait_tag()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_tag_click" class="md-nav__link">
    wait_tag_click()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ichrome.async_utils.AsyncTab.wait_tags" class="md-nav__link">
    wait_tags()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="reference">Reference</h1>


<div class="doc doc-object doc-class">


<a id="ichrome.AsyncTab"></a>
  <div class="doc doc-contents first">
      <p class="doc doc-class-bases">
        Bases: <code><span title="ichrome.async_utils.GetValueMixin">GetValueMixin</span></code></p>

  
      <p>Tab operations in async environment.</p>
<p>The timeout variable -- wait for the events::</p>
<pre><code>NotSet:
    using the self.timeout by default
None:
    using the self._MAX_WAIT_TIMEOUT instead, default to float('inf')
0:
    no wait
int / float:
    wait `timeout` seconds
</code></pre>


        <details class="quote">
          <summary>Source code in <code>ichrome\async_utils.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span>
<span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span>
<span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span>
<span class="normal">2037</span>
<span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span>
<span class="normal">2042</span>
<span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span>
<span class="normal">2047</span>
<span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span>
<span class="normal">2090</span>
<span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span>
<span class="normal">2111</span>
<span class="normal">2112</span>
<span class="normal">2113</span>
<span class="normal">2114</span>
<span class="normal">2115</span>
<span class="normal">2116</span>
<span class="normal">2117</span>
<span class="normal">2118</span>
<span class="normal">2119</span>
<span class="normal">2120</span>
<span class="normal">2121</span>
<span class="normal">2122</span>
<span class="normal">2123</span>
<span class="normal">2124</span>
<span class="normal">2125</span>
<span class="normal">2126</span>
<span class="normal">2127</span>
<span class="normal">2128</span>
<span class="normal">2129</span>
<span class="normal">2130</span>
<span class="normal">2131</span>
<span class="normal">2132</span>
<span class="normal">2133</span>
<span class="normal">2134</span>
<span class="normal">2135</span>
<span class="normal">2136</span>
<span class="normal">2137</span>
<span class="normal">2138</span>
<span class="normal">2139</span>
<span class="normal">2140</span>
<span class="normal">2141</span>
<span class="normal">2142</span>
<span class="normal">2143</span>
<span class="normal">2144</span>
<span class="normal">2145</span>
<span class="normal">2146</span>
<span class="normal">2147</span>
<span class="normal">2148</span>
<span class="normal">2149</span>
<span class="normal">2150</span>
<span class="normal">2151</span>
<span class="normal">2152</span>
<span class="normal">2153</span>
<span class="normal">2154</span>
<span class="normal">2155</span>
<span class="normal">2156</span>
<span class="normal">2157</span>
<span class="normal">2158</span>
<span class="normal">2159</span>
<span class="normal">2160</span>
<span class="normal">2161</span>
<span class="normal">2162</span>
<span class="normal">2163</span>
<span class="normal">2164</span>
<span class="normal">2165</span>
<span class="normal">2166</span>
<span class="normal">2167</span>
<span class="normal">2168</span>
<span class="normal">2169</span>
<span class="normal">2170</span>
<span class="normal">2171</span>
<span class="normal">2172</span>
<span class="normal">2173</span>
<span class="normal">2174</span>
<span class="normal">2175</span>
<span class="normal">2176</span>
<span class="normal">2177</span>
<span class="normal">2178</span>
<span class="normal">2179</span>
<span class="normal">2180</span>
<span class="normal">2181</span>
<span class="normal">2182</span>
<span class="normal">2183</span>
<span class="normal">2184</span>
<span class="normal">2185</span>
<span class="normal">2186</span>
<span class="normal">2187</span>
<span class="normal">2188</span>
<span class="normal">2189</span>
<span class="normal">2190</span>
<span class="normal">2191</span>
<span class="normal">2192</span>
<span class="normal">2193</span>
<span class="normal">2194</span>
<span class="normal">2195</span>
<span class="normal">2196</span>
<span class="normal">2197</span>
<span class="normal">2198</span>
<span class="normal">2199</span>
<span class="normal">2200</span>
<span class="normal">2201</span>
<span class="normal">2202</span>
<span class="normal">2203</span>
<span class="normal">2204</span>
<span class="normal">2205</span>
<span class="normal">2206</span>
<span class="normal">2207</span>
<span class="normal">2208</span>
<span class="normal">2209</span>
<span class="normal">2210</span>
<span class="normal">2211</span>
<span class="normal">2212</span>
<span class="normal">2213</span>
<span class="normal">2214</span>
<span class="normal">2215</span>
<span class="normal">2216</span>
<span class="normal">2217</span>
<span class="normal">2218</span>
<span class="normal">2219</span>
<span class="normal">2220</span>
<span class="normal">2221</span>
<span class="normal">2222</span>
<span class="normal">2223</span>
<span class="normal">2224</span>
<span class="normal">2225</span>
<span class="normal">2226</span>
<span class="normal">2227</span>
<span class="normal">2228</span>
<span class="normal">2229</span>
<span class="normal">2230</span>
<span class="normal">2231</span>
<span class="normal">2232</span>
<span class="normal">2233</span>
<span class="normal">2234</span>
<span class="normal">2235</span>
<span class="normal">2236</span>
<span class="normal">2237</span>
<span class="normal">2238</span>
<span class="normal">2239</span>
<span class="normal">2240</span>
<span class="normal">2241</span>
<span class="normal">2242</span>
<span class="normal">2243</span>
<span class="normal">2244</span>
<span class="normal">2245</span>
<span class="normal">2246</span>
<span class="normal">2247</span>
<span class="normal">2248</span>
<span class="normal">2249</span>
<span class="normal">2250</span>
<span class="normal">2251</span>
<span class="normal">2252</span>
<span class="normal">2253</span>
<span class="normal">2254</span>
<span class="normal">2255</span>
<span class="normal">2256</span>
<span class="normal">2257</span>
<span class="normal">2258</span>
<span class="normal">2259</span>
<span class="normal">2260</span>
<span class="normal">2261</span>
<span class="normal">2262</span>
<span class="normal">2263</span>
<span class="normal">2264</span>
<span class="normal">2265</span>
<span class="normal">2266</span>
<span class="normal">2267</span>
<span class="normal">2268</span>
<span class="normal">2269</span>
<span class="normal">2270</span>
<span class="normal">2271</span>
<span class="normal">2272</span>
<span class="normal">2273</span>
<span class="normal">2274</span>
<span class="normal">2275</span>
<span class="normal">2276</span>
<span class="normal">2277</span>
<span class="normal">2278</span>
<span class="normal">2279</span>
<span class="normal">2280</span>
<span class="normal">2281</span>
<span class="normal">2282</span>
<span class="normal">2283</span>
<span class="normal">2284</span>
<span class="normal">2285</span>
<span class="normal">2286</span>
<span class="normal">2287</span>
<span class="normal">2288</span>
<span class="normal">2289</span>
<span class="normal">2290</span>
<span class="normal">2291</span>
<span class="normal">2292</span>
<span class="normal">2293</span>
<span class="normal">2294</span>
<span class="normal">2295</span>
<span class="normal">2296</span>
<span class="normal">2297</span>
<span class="normal">2298</span>
<span class="normal">2299</span>
<span class="normal">2300</span>
<span class="normal">2301</span>
<span class="normal">2302</span>
<span class="normal">2303</span>
<span class="normal">2304</span>
<span class="normal">2305</span>
<span class="normal">2306</span>
<span class="normal">2307</span>
<span class="normal">2308</span>
<span class="normal">2309</span>
<span class="normal">2310</span>
<span class="normal">2311</span>
<span class="normal">2312</span>
<span class="normal">2313</span>
<span class="normal">2314</span>
<span class="normal">2315</span>
<span class="normal">2316</span>
<span class="normal">2317</span>
<span class="normal">2318</span>
<span class="normal">2319</span>
<span class="normal">2320</span>
<span class="normal">2321</span>
<span class="normal">2322</span>
<span class="normal">2323</span>
<span class="normal">2324</span>
<span class="normal">2325</span>
<span class="normal">2326</span>
<span class="normal">2327</span>
<span class="normal">2328</span>
<span class="normal">2329</span>
<span class="normal">2330</span>
<span class="normal">2331</span>
<span class="normal">2332</span>
<span class="normal">2333</span>
<span class="normal">2334</span>
<span class="normal">2335</span>
<span class="normal">2336</span>
<span class="normal">2337</span>
<span class="normal">2338</span>
<span class="normal">2339</span>
<span class="normal">2340</span>
<span class="normal">2341</span>
<span class="normal">2342</span>
<span class="normal">2343</span>
<span class="normal">2344</span>
<span class="normal">2345</span>
<span class="normal">2346</span>
<span class="normal">2347</span>
<span class="normal">2348</span>
<span class="normal">2349</span>
<span class="normal">2350</span>
<span class="normal">2351</span>
<span class="normal">2352</span>
<span class="normal">2353</span>
<span class="normal">2354</span>
<span class="normal">2355</span>
<span class="normal">2356</span>
<span class="normal">2357</span>
<span class="normal">2358</span>
<span class="normal">2359</span>
<span class="normal">2360</span>
<span class="normal">2361</span>
<span class="normal">2362</span>
<span class="normal">2363</span>
<span class="normal">2364</span>
<span class="normal">2365</span>
<span class="normal">2366</span>
<span class="normal">2367</span>
<span class="normal">2368</span>
<span class="normal">2369</span>
<span class="normal">2370</span>
<span class="normal">2371</span>
<span class="normal">2372</span>
<span class="normal">2373</span>
<span class="normal">2374</span>
<span class="normal">2375</span>
<span class="normal">2376</span>
<span class="normal">2377</span>
<span class="normal">2378</span>
<span class="normal">2379</span>
<span class="normal">2380</span>
<span class="normal">2381</span>
<span class="normal">2382</span>
<span class="normal">2383</span>
<span class="normal">2384</span>
<span class="normal">2385</span>
<span class="normal">2386</span>
<span class="normal">2387</span>
<span class="normal">2388</span>
<span class="normal">2389</span>
<span class="normal">2390</span>
<span class="normal">2391</span>
<span class="normal">2392</span>
<span class="normal">2393</span>
<span class="normal">2394</span>
<span class="normal">2395</span>
<span class="normal">2396</span>
<span class="normal">2397</span>
<span class="normal">2398</span>
<span class="normal">2399</span>
<span class="normal">2400</span>
<span class="normal">2401</span>
<span class="normal">2402</span>
<span class="normal">2403</span>
<span class="normal">2404</span>
<span class="normal">2405</span>
<span class="normal">2406</span>
<span class="normal">2407</span>
<span class="normal">2408</span>
<span class="normal">2409</span>
<span class="normal">2410</span>
<span class="normal">2411</span>
<span class="normal">2412</span>
<span class="normal">2413</span>
<span class="normal">2414</span>
<span class="normal">2415</span>
<span class="normal">2416</span>
<span class="normal">2417</span>
<span class="normal">2418</span>
<span class="normal">2419</span>
<span class="normal">2420</span>
<span class="normal">2421</span>
<span class="normal">2422</span>
<span class="normal">2423</span>
<span class="normal">2424</span>
<span class="normal">2425</span>
<span class="normal">2426</span>
<span class="normal">2427</span>
<span class="normal">2428</span>
<span class="normal">2429</span>
<span class="normal">2430</span>
<span class="normal">2431</span>
<span class="normal">2432</span>
<span class="normal">2433</span>
<span class="normal">2434</span>
<span class="normal">2435</span>
<span class="normal">2436</span>
<span class="normal">2437</span>
<span class="normal">2438</span>
<span class="normal">2439</span>
<span class="normal">2440</span>
<span class="normal">2441</span>
<span class="normal">2442</span>
<span class="normal">2443</span>
<span class="normal">2444</span>
<span class="normal">2445</span>
<span class="normal">2446</span>
<span class="normal">2447</span>
<span class="normal">2448</span>
<span class="normal">2449</span>
<span class="normal">2450</span>
<span class="normal">2451</span>
<span class="normal">2452</span>
<span class="normal">2453</span>
<span class="normal">2454</span>
<span class="normal">2455</span>
<span class="normal">2456</span>
<span class="normal">2457</span>
<span class="normal">2458</span>
<span class="normal">2459</span>
<span class="normal">2460</span>
<span class="normal">2461</span>
<span class="normal">2462</span>
<span class="normal">2463</span>
<span class="normal">2464</span>
<span class="normal">2465</span>
<span class="normal">2466</span>
<span class="normal">2467</span>
<span class="normal">2468</span>
<span class="normal">2469</span>
<span class="normal">2470</span>
<span class="normal">2471</span>
<span class="normal">2472</span>
<span class="normal">2473</span>
<span class="normal">2474</span>
<span class="normal">2475</span>
<span class="normal">2476</span>
<span class="normal">2477</span>
<span class="normal">2478</span>
<span class="normal">2479</span>
<span class="normal">2480</span>
<span class="normal">2481</span>
<span class="normal">2482</span>
<span class="normal">2483</span>
<span class="normal">2484</span>
<span class="normal">2485</span>
<span class="normal">2486</span>
<span class="normal">2487</span>
<span class="normal">2488</span>
<span class="normal">2489</span>
<span class="normal">2490</span>
<span class="normal">2491</span>
<span class="normal">2492</span>
<span class="normal">2493</span>
<span class="normal">2494</span>
<span class="normal">2495</span>
<span class="normal">2496</span>
<span class="normal">2497</span>
<span class="normal">2498</span>
<span class="normal">2499</span>
<span class="normal">2500</span>
<span class="normal">2501</span>
<span class="normal">2502</span>
<span class="normal">2503</span>
<span class="normal">2504</span>
<span class="normal">2505</span>
<span class="normal">2506</span>
<span class="normal">2507</span>
<span class="normal">2508</span>
<span class="normal">2509</span>
<span class="normal">2510</span>
<span class="normal">2511</span>
<span class="normal">2512</span>
<span class="normal">2513</span>
<span class="normal">2514</span>
<span class="normal">2515</span>
<span class="normal">2516</span>
<span class="normal">2517</span>
<span class="normal">2518</span>
<span class="normal">2519</span>
<span class="normal">2520</span>
<span class="normal">2521</span>
<span class="normal">2522</span>
<span class="normal">2523</span>
<span class="normal">2524</span>
<span class="normal">2525</span>
<span class="normal">2526</span>
<span class="normal">2527</span>
<span class="normal">2528</span>
<span class="normal">2529</span>
<span class="normal">2530</span>
<span class="normal">2531</span>
<span class="normal">2532</span>
<span class="normal">2533</span>
<span class="normal">2534</span>
<span class="normal">2535</span>
<span class="normal">2536</span>
<span class="normal">2537</span>
<span class="normal">2538</span>
<span class="normal">2539</span>
<span class="normal">2540</span>
<span class="normal">2541</span>
<span class="normal">2542</span>
<span class="normal">2543</span>
<span class="normal">2544</span>
<span class="normal">2545</span>
<span class="normal">2546</span>
<span class="normal">2547</span>
<span class="normal">2548</span>
<span class="normal">2549</span>
<span class="normal">2550</span>
<span class="normal">2551</span>
<span class="normal">2552</span>
<span class="normal">2553</span>
<span class="normal">2554</span>
<span class="normal">2555</span>
<span class="normal">2556</span>
<span class="normal">2557</span>
<span class="normal">2558</span>
<span class="normal">2559</span>
<span class="normal">2560</span>
<span class="normal">2561</span>
<span class="normal">2562</span>
<span class="normal">2563</span>
<span class="normal">2564</span>
<span class="normal">2565</span>
<span class="normal">2566</span>
<span class="normal">2567</span>
<span class="normal">2568</span>
<span class="normal">2569</span>
<span class="normal">2570</span>
<span class="normal">2571</span>
<span class="normal">2572</span>
<span class="normal">2573</span>
<span class="normal">2574</span>
<span class="normal">2575</span>
<span class="normal">2576</span>
<span class="normal">2577</span>
<span class="normal">2578</span>
<span class="normal">2579</span>
<span class="normal">2580</span>
<span class="normal">2581</span>
<span class="normal">2582</span>
<span class="normal">2583</span>
<span class="normal">2584</span>
<span class="normal">2585</span>
<span class="normal">2586</span>
<span class="normal">2587</span>
<span class="normal">2588</span>
<span class="normal">2589</span>
<span class="normal">2590</span>
<span class="normal">2591</span>
<span class="normal">2592</span>
<span class="normal">2593</span>
<span class="normal">2594</span>
<span class="normal">2595</span>
<span class="normal">2596</span>
<span class="normal">2597</span>
<span class="normal">2598</span>
<span class="normal">2599</span>
<span class="normal">2600</span>
<span class="normal">2601</span>
<span class="normal">2602</span>
<span class="normal">2603</span>
<span class="normal">2604</span>
<span class="normal">2605</span>
<span class="normal">2606</span>
<span class="normal">2607</span>
<span class="normal">2608</span>
<span class="normal">2609</span>
<span class="normal">2610</span>
<span class="normal">2611</span>
<span class="normal">2612</span>
<span class="normal">2613</span>
<span class="normal">2614</span>
<span class="normal">2615</span>
<span class="normal">2616</span>
<span class="normal">2617</span>
<span class="normal">2618</span>
<span class="normal">2619</span>
<span class="normal">2620</span>
<span class="normal">2621</span>
<span class="normal">2622</span>
<span class="normal">2623</span>
<span class="normal">2624</span>
<span class="normal">2625</span>
<span class="normal">2626</span>
<span class="normal">2627</span>
<span class="normal">2628</span>
<span class="normal">2629</span>
<span class="normal">2630</span>
<span class="normal">2631</span>
<span class="normal">2632</span>
<span class="normal">2633</span>
<span class="normal">2634</span>
<span class="normal">2635</span>
<span class="normal">2636</span>
<span class="normal">2637</span>
<span class="normal">2638</span>
<span class="normal">2639</span>
<span class="normal">2640</span>
<span class="normal">2641</span>
<span class="normal">2642</span>
<span class="normal">2643</span>
<span class="normal">2644</span>
<span class="normal">2645</span>
<span class="normal">2646</span>
<span class="normal">2647</span>
<span class="normal">2648</span>
<span class="normal">2649</span>
<span class="normal">2650</span>
<span class="normal">2651</span>
<span class="normal">2652</span>
<span class="normal">2653</span>
<span class="normal">2654</span>
<span class="normal">2655</span>
<span class="normal">2656</span>
<span class="normal">2657</span>
<span class="normal">2658</span>
<span class="normal">2659</span>
<span class="normal">2660</span>
<span class="normal">2661</span>
<span class="normal">2662</span>
<span class="normal">2663</span>
<span class="normal">2664</span>
<span class="normal">2665</span>
<span class="normal">2666</span>
<span class="normal">2667</span>
<span class="normal">2668</span>
<span class="normal">2669</span>
<span class="normal">2670</span>
<span class="normal">2671</span>
<span class="normal">2672</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AsyncTab</span><span class="p">(</span><span class="n">GetValueMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tab operations in async environment.</span>

<span class="sd">        The timeout variable -- wait for the events::</span>

<span class="sd">            NotSet:</span>
<span class="sd">                using the self.timeout by default</span>
<span class="sd">            None:</span>
<span class="sd">                using the self._MAX_WAIT_TIMEOUT instead, default to float(&#39;inf&#39;)</span>
<span class="sd">            0:</span>
<span class="sd">                no wait</span>
<span class="sd">            int / float:</span>
<span class="sd">                wait `timeout` seconds</span>
<span class="sd">&quot;&quot;&quot;</span>
    <span class="n">_log_all_recv</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_min_move_interval</span> <span class="o">=</span> <span class="mf">0.05</span>
    <span class="c1"># only enable without Params</span>
    <span class="n">_domains_can_be_enabled</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Accessibility&#39;</span><span class="p">,</span> <span class="s1">&#39;Animation&#39;</span><span class="p">,</span> <span class="s1">&#39;ApplicationCache&#39;</span><span class="p">,</span> <span class="s1">&#39;Audits&#39;</span><span class="p">,</span> <span class="s1">&#39;CSS&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Cast&#39;</span><span class="p">,</span> <span class="s1">&#39;DOM&#39;</span><span class="p">,</span> <span class="s1">&#39;DOMSnapshot&#39;</span><span class="p">,</span> <span class="s1">&#39;DOMStorage&#39;</span><span class="p">,</span> <span class="s1">&#39;Database&#39;</span><span class="p">,</span>
        <span class="s1">&#39;HeadlessExperimental&#39;</span><span class="p">,</span> <span class="s1">&#39;IndexedDB&#39;</span><span class="p">,</span> <span class="s1">&#39;Inspector&#39;</span><span class="p">,</span> <span class="s1">&#39;LayerTree&#39;</span><span class="p">,</span> <span class="s1">&#39;Log&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Network&#39;</span><span class="p">,</span> <span class="s1">&#39;Overlay&#39;</span><span class="p">,</span> <span class="s1">&#39;Page&#39;</span><span class="p">,</span> <span class="s1">&#39;Performance&#39;</span><span class="p">,</span> <span class="s1">&#39;Security&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ServiceWorker&#39;</span><span class="p">,</span> <span class="s1">&#39;WebAudio&#39;</span><span class="p">,</span> <span class="s1">&#39;WebAuthn&#39;</span><span class="p">,</span> <span class="s1">&#39;Media&#39;</span><span class="p">,</span> <span class="s1">&#39;Console&#39;</span><span class="p">,</span> <span class="s1">&#39;Debugger&#39;</span><span class="p">,</span>
        <span class="s1">&#39;HeapProfiler&#39;</span><span class="p">,</span> <span class="s1">&#39;Profiler&#39;</span><span class="p">,</span> <span class="s1">&#39;Runtime&#39;</span>
    <span class="p">}</span>
    <span class="c1"># timeout for recv, for wait_XXX methods</span>
    <span class="c1"># You can reset this with float instead of forever, like 30 * 60</span>
    <span class="n">_MAX_WAIT_TIMEOUT</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
    <span class="c1"># timeout for recv, not for wait_XXX methods</span>
    <span class="n">_DEFAULT_RECV_TIMEOUT</span> <span class="o">=</span> <span class="mf">5.0</span>
    <span class="c1"># aiohttp ws timeout default to 10.0, here is 5</span>
    <span class="n">_DEFAULT_CONNECT_TIMEOUT</span> <span class="o">=</span> <span class="mf">5.0</span>
    <span class="n">_RECV_DAEMON_BREAK_CALLBACK</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># default max_msg_size has been set to 20MB, for 4MB is too small.</span>
    <span class="n">_DEFAULT_WS_KWARGS</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;max_msg_size&quot;</span><span class="p">:</span> <span class="mi">20</span> <span class="o">*</span> <span class="mi">1024</span><span class="o">**</span><span class="mi">2</span><span class="p">}</span>
    <span class="c1"># default flatten arg</span>
    <span class="n">_DEFAULT_FLATTEN</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">tab_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">webSocketDebuggerUrl</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">devtoolsFrontendUrl</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">json</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">chrome</span><span class="p">:</span> <span class="s1">&#39;AsyncChrome&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                 <span class="n">ws_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">default_recv_callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">_recv_daemon_break_callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Init AsyncTab instance.</span>

<span class="sd">        original Tab JSON::</span>

<span class="sd">            [{</span>
<span class="sd">                &quot;description&quot;: &quot;&quot;,</span>
<span class="sd">                &quot;devtoolsFrontendUrl&quot;: &quot;/devtools/inspector.html?ws=localhost:9222/devtools/page/8ED4BDD54713572BCE026393A0137214&quot;,</span>
<span class="sd">                &quot;id&quot;: &quot;8ED4BDD54713572BCE026393A0137214&quot;,</span>
<span class="sd">                &quot;title&quot;: &quot;about:blank&quot;,</span>
<span class="sd">                &quot;type&quot;: &quot;page&quot;,</span>
<span class="sd">                &quot;url&quot;: &quot;http://localhost:9222/json&quot;,</span>
<span class="sd">                &quot;webSocketDebuggerUrl&quot;: &quot;ws://localhost:9222/devtools/page/8ED4BDD54713572BCE026393A0137214&quot;</span>
<span class="sd">            }]</span>

<span class="sd">        Args:</span>
<span class="sd">            tab_id (str, optional): defaults to kwargs.pop(&#39;id&#39;).</span>
<span class="sd">            title (str, optional): tab title. Defaults to None.</span>
<span class="sd">            url (str, optional): tab url, binded to self._url. Defaults to None.</span>
<span class="sd">            type (str, optional): tab type, often be `page` type. Defaults to None.</span>
<span class="sd">            description (str, optional): tab description. Defaults to None.</span>
<span class="sd">            webSocketDebuggerUrl (str, optional): ws URL to connect. Defaults to None.</span>
<span class="sd">            devtoolsFrontendUrl (str, optional): devtools UI URL. Defaults to None.</span>
<span class="sd">            json (str, optional): raw Tab JSON. Defaults to None.</span>
<span class="sd">            chrome (AsyncChrome, optional): the AsyncChrome object which the Tab belongs to. Defaults to None.</span>
<span class="sd">            timeout (_type_, optional): default recv timeout, defaults to AsyncTab._DEFAULT_RECV_TIMEOUT. Defaults to NotSet.</span>
<span class="sd">            ws_kwargs (dict, optional): kwargs for ws connection. Defaults to AsyncTab._DEFAULT_WS_KWARGS.</span>
<span class="sd">            default_recv_callback (Callable, optional): called for each data received, sync/async function only accept 1 arg of data comes from ws recv. Defaults to None.</span>
<span class="sd">            _recv_daemon_break_callback (Callable, optional): like the tab_close_callback. sync/async function only accept 1 arg of self while _recv_daemon break. defaults to None.</span>
<span class="sd">            flatten (bool, optional): use flatten mode with sessionId. Defaults to AsyncTab._DEFAULT_FLATTEN.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tab_id</span> <span class="o">=</span> <span class="n">tab_id</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tab_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;tab_id should not be null, </span><span class="si">{</span><span class="n">tab_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_id</span> <span class="o">=</span> <span class="n">tab_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">devtoolsFrontendUrl</span> <span class="o">=</span> <span class="n">devtoolsFrontendUrl</span>
        <span class="k">if</span> <span class="n">tab_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">webSocketDebuggerUrl</span><span class="p">:</span>
            <span class="n">_chrome_port_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:</span><span class="si">{</span><span class="n">chrome</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">chrome</span><span class="o">.</span><span class="n">port</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
            <span class="n">webSocketDebuggerUrl</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;ws://</span><span class="si">{</span><span class="n">chrome</span><span class="o">.</span><span class="n">host</span><span class="si">}{</span><span class="n">_chrome_port_str</span><span class="si">}</span><span class="s1">/devtools/page/</span><span class="si">{</span><span class="n">tab_id</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">webSocketDebuggerUrl</span> <span class="o">=</span> <span class="n">webSocketDebuggerUrl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">json</span> <span class="o">=</span> <span class="n">json</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span> <span class="o">=</span> <span class="n">chrome</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_RECV_TIMEOUT</span> <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="n">NotSet</span> <span class="k">else</span> <span class="n">timeout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ws_kwargs</span> <span class="o">=</span> <span class="n">ws_kwargs</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_WS_KWARGS</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ws_kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;timeout&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_CONNECT_TIMEOUT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ws_connection</span><span class="p">:</span> <span class="n">_WSConnection</span> <span class="o">=</span> <span class="n">_WSConnection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="o">.</span><span class="n">req</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">req</span> <span class="o">=</span> <span class="n">Requests</span><span class="p">()</span>
        <span class="c1"># using default_recv_callback.setter, default_recv_callback can be list or function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_recv_callback</span> <span class="o">=</span> <span class="n">default_recv_callback</span>
        <span class="c1"># alias of methods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_click_tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_click_element_rect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_cookies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clear_browser_cookies</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inject_js</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inject_js_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_bounding_client_rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_clip</span>
        <span class="c1"># internal variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_created_time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_message_id</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_recv_daemon_break_callback</span> <span class="o">=</span> <span class="n">_recv_daemon_break_callback</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_RECV_DAEMON_BREAK_CALLBACK</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listener</span> <span class="o">=</span> <span class="n">Listener</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffers</span><span class="p">:</span> <span class="n">WeakValueDictionary</span> <span class="o">=</span> <span class="n">WeakValueDictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_recv_callback</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sessions</span><span class="p">:</span> <span class="n">WeakValueDictionary</span> <span class="o">=</span> <span class="n">WeakValueDictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># sessions for flatten mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_FLATTEN</span> <span class="k">if</span> <span class="n">flatten</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">flatten</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_flatten</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">close_browser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Browser.close&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the current url, `await tab.url`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_url</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">refresh_tab_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s2">&quot;refresh the tab meta info with tab_id from /json&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="o">.</span><span class="n">get_server</span><span class="p">(</span><span class="s1">&#39;/json&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tab_info</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">tab_id</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">json</span> <span class="o">=</span> <span class="n">tab_info</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">activate_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;activate tab with chrome http endpoint&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="o">.</span><span class="n">activate_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">close_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;close tab with chrome http endpoint&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="o">.</span><span class="n">close_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">activate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;[Page.bringToFront], activate tab with cdp websocket&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.bringToFront&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;[Page.close], close tab with cdp websocket. will lose ws, so timeout default to 0.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.close&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ChromeRuntimeError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;close tab failed for </span><span class="si">{</span><span class="n">error</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">crash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;[Page.crash], will lose ws, so timeout default to 0.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.crash&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                   <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                   <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">auto_enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                   <span class="n">force</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="o">**</span><span class="n">_kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
        <span class="sd">&#39;&#39;&#39;Send message to Tab. callback_function only work whlie timeout!=0.</span>
<span class="sd">        If timeout is not None: wait for recv event.</span>
<span class="sd">        If auto_enable: will check the domain enabled automatically.</span>
<span class="sd">        If callback_function: run while received the response msg.</span>

<span class="sd">        the `force` arg is deprecated, use auto_enable instead.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">msg_id</span><span class="p">,</span> <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">_kwargs</span><span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s1">&#39;sessionId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ChromeRuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[closed] </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> ws has been closed&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_enable</span> <span class="ow">or</span> <span class="n">force</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_enable</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[send] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s2"> </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">timeout</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># wait for msg filted by id</span>
                <span class="n">event</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]}</span>
                <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="n">event</span><span class="p">,</span>
                              <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                              <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">)</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">send_json</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">return</span> <span class="k">await</span> <span class="n">f</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># timeout == 0, no need wait for response.</span>
                <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">send_json</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">WebSocketError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> [send] msg </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s1"> failed for </span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">ChromeRuntimeError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">recv</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">event_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
        <span class="n">callback_function</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Wait for a event_dict or not wait by setting timeout=0. Events will be filt by `id` or `method` or the whole json.</span>

<span class="sd">        Args:</span>
<span class="sd">            event_dict (dict):  dict like {&#39;id&#39;: 1} or {&#39;method&#39;: &#39;Page.loadEventFired&#39;} or other JSON serializable dict.</span>
<span class="sd">            timeout (_type_, optional): await seconds, None for self._MAX_WAIT_TIMEOUT, 0 for 0 seconds.. Defaults to NotSet.</span>
<span class="sd">            callback_function (_type_, optional): event callback_function function accept only one arg(the event dict).. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Awaitable[Union[dict, None]]: the event dict from websocket recv</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span> <span class="ow">and</span> <span class="n">timeout</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># no wait</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">:</span>
            <span class="n">event_dict</span><span class="p">[</span><span class="s1">&#39;sessionId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recv</span><span class="p">(</span><span class="n">event_dict</span><span class="o">=</span><span class="n">event_dict</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                     <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                     <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                     <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="o">**</span><span class="n">_kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;domain: Network or Page and so on, will send `{domain}.enable`. Automatically check for duplicated sendings if not force.&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
            <span class="c1"># no need for duplicated enable.</span>
            <span class="k">if</span> <span class="n">domain</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domains_can_be_enabled</span> <span class="ow">or</span> <span class="n">domain</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># enable timeout should not be 0</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s1">.enable&#39;</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                 <span class="n">auto_enable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">kwargs</span><span class="o">=</span><span class="n">_kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;domain: Network / Page and so on, will send `domain.disable`. Automatically check for duplicated sendings if not force.&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
            <span class="c1"># no need for duplicated enable.</span>
            <span class="k">if</span> <span class="n">domain</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domains_can_be_enabled</span> <span class="ow">or</span> <span class="n">domain</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s1">.disable&#39;</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                 <span class="n">auto_enable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_all_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Network.getAllCookies], return all the cookies of this browser.&quot;&quot;&quot;</span>
        <span class="c1"># {&#39;id&#39;: 12, &#39;result&#39;: {&#39;cookies&#39;: [{&#39;name&#39;: &#39;test2&#39;, &#39;value&#39;: &#39;test_value&#39;, &#39;domain&#39;: &#39;python.org&#39;, &#39;path&#39;: &#39;/&#39;, &#39;expires&#39;: -1, &#39;size&#39;: 15, &#39;httpOnly&#39;: False, &#39;secure&#39;: False, &#39;session&#39;: True}]}}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getAllCookies&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;result.cookies&#39;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">clear_browser_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Network.clearBrowserCookies]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.clearBrowserCookies&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">clear_browser_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Network.clearBrowserCache]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.clearBrowserCache&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                             <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                             <span class="n">domain</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                             <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Network.deleteCookies], deleteCookies by name, with url / domain / path.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">((</span><span class="n">url</span><span class="p">,</span> <span class="n">domain</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span><span class="s1">&#39;URL and domain should not be both null.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.deleteCookies&quot;</span><span class="p">,</span>
                               <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                               <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                               <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span>
                               <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                          <span class="n">urls</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;[Network.getCookies], get cookies of urls.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">urls</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">urls</span><span class="p">]</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getCookies&quot;</span><span class="p">,</span>
                                     <span class="n">urls</span><span class="o">=</span><span class="n">urls</span><span class="p">,</span>
                                     <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getCookies&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;result.cookies&#39;</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                          <span class="n">cookies</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span>
                          <span class="n">ensure_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Network.setCookies]&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">cookie</span> <span class="ow">in</span> <span class="n">cookies</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s1">&#39;url&#39;</span> <span class="ow">in</span> <span class="n">cookie</span> <span class="ow">or</span> <span class="s1">&#39;domain&#39;</span> <span class="ow">in</span> <span class="n">cookie</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span>
                    <span class="s1">&#39;URL and domain should not be both null.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ensure_keys</span><span class="p">:</span>
            <span class="n">valid_keys</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;domain&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;secure&#39;</span><span class="p">,</span> <span class="s1">&#39;httpOnly&#39;</span><span class="p">,</span>
                <span class="s1">&#39;sameSite&#39;</span><span class="p">,</span> <span class="s1">&#39;expires&#39;</span><span class="p">,</span> <span class="s1">&#39;priority&#39;</span>
            <span class="p">}</span>
            <span class="n">cookies</span> <span class="o">=</span> <span class="p">[{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">cookie</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">valid_keys</span><span class="p">}</span>
                       <span class="k">for</span> <span class="n">cookie</span> <span class="ow">in</span> <span class="n">cookies</span><span class="p">]</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.setCookies&quot;</span><span class="p">,</span>
                               <span class="n">cookies</span><span class="o">=</span><span class="n">cookies</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_cookie</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">domain</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">secure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                         <span class="n">httpOnly</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                         <span class="n">sameSite</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">expires</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Network.setCookie]</span>
<span class="sd">name [string] Cookie name.</span>
<span class="sd">value [string] Cookie value.</span>
<span class="sd">url [string] The request-URI to associate with the setting of the cookie. This value can affect the default domain and path values of the created cookie.</span>
<span class="sd">domain [string] Cookie domain.</span>
<span class="sd">path [string] Cookie path.</span>
<span class="sd">secure [boolean] True if cookie is secure.</span>
<span class="sd">httpOnly [boolean] True if cookie is http-only.</span>
<span class="sd">sameSite [CookieSameSite] Cookie SameSite type.</span>
<span class="sd">expires [TimeSinceEpoch] Cookie expiration date, session cookie if not set&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">((</span><span class="n">url</span><span class="p">,</span> <span class="n">domain</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span><span class="s1">&#39;URL and domain should not be both null.&#39;</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                      <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                                      <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                      <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span>
                                      <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                                      <span class="n">secure</span><span class="o">=</span><span class="n">secure</span><span class="p">,</span>
                                      <span class="n">httpOnly</span><span class="o">=</span><span class="n">httpOnly</span><span class="p">,</span>
                                      <span class="n">sameSite</span><span class="o">=</span><span class="n">sameSite</span><span class="p">,</span>
                                      <span class="n">expires</span><span class="o">=</span><span class="n">expires</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.setCookie&quot;</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                               <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_current_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;JS: window.location.href&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s2">&quot;window.location.href&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_current_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;JS: document.title&quot;</span>
        <span class="n">title</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s2">&quot;document.title&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">title</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_title</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="s2">&quot;await tab.title&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_title</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_html</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">html</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;return html from `document.documentElement.outerHTML`&quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s1">&#39;document.documentElement.outerHTML&#39;</span><span class="p">,</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">html</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">html</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;`await tab.html`. return html from `document.documentElement.outerHTML`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_html</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">frame_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;JS: document.write, or Page.setDocumentContent if given frame_id&quot;</span>
        <span class="k">if</span> <span class="n">frame_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">frame_id</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page_frame_id</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">frame_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;document.write(`</span><span class="si">{</span><span class="n">html</span><span class="si">}</span><span class="s1">`)&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.setDocumentContent&#39;</span><span class="p">,</span>
                                   <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">,</span>
                                   <span class="n">frameId</span><span class="o">=</span><span class="n">frame_id</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_page_frame_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;get frame id of current page&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_tree</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span>
                                   <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.frameTree.frame.id&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">frame_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_tree</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_frame_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;[Page.getFrameTree], get current page frame tree&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.getFrameTree&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">stop_loading_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;[Page.stopLoading]&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.stopLoading&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_loading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;wait Page.loadEventFired event while page loaded.</span>
<span class="sd">        If page loaded event catched, return True.</span>
<span class="sd">        WARNING: methods with prefix `wait_` the `timeout` default to None.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s2">&quot;Page.loadEventFired&quot;</span><span class="p">,</span>
                                     <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                     <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">timeout_stop_loading</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_loading_page</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_page_loading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_loading</span><span class="p">(</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">,</span>
            <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="n">timeout_stop_loading</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_event</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">event_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Similar to self.recv, but has the filter_function to distinct duplicated method of event.</span>
<span class="sd">        WARNING: the `timeout` default to None when methods with prefix `wait_`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">event_name</span><span class="p">}</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># update the real timeout</span>
                <span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="o">-</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="c1"># avoid same method but different event occured, use filter_function</span>
            <span class="n">_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">filter_function</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">ok</span> <span class="o">=</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span>
                        <span class="n">filter_function</span><span class="p">,</span> <span class="n">_result</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
                        <span class="n">result</span> <span class="o">=</span> <span class="n">_result</span>
                        <span class="k">break</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;wait_event crashed for: </span><span class="si">{</span><span class="n">error</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">error</span>
            <span class="k">elif</span> <span class="n">_result</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">_result</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span><span class="n">callback_function</span><span class="p">,</span>
                                                       <span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_console</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Wait the filted Runtime.consoleAPICalled event.</span>

<span class="sd">        consoleAPICalled event types:</span>
<span class="sd">        log, debug, info, error, warning, dir, dirxml, table, trace, clear, startGroup, startGroupCollapsed, endGroup, assert, profile, profileEnd, count, timeEnd</span>

<span class="sd">        return dict or None like:</span>
<span class="sd">        {&#39;method&#39;:&#39;Runtime.consoleAPICalled&#39;,&#39;params&#39;: {&#39;type&#39;:&#39;log&#39;,&#39;args&#39;: [{&#39;type&#39;:&#39;string&#39;,&#39;value&#39;:&#39;123&#39;}],&#39;executionContextId&#39;:13,&#39;timestamp&#39;:1592895800590.75,&#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;:&#39;&#39;,&#39;scriptId&#39;:&#39;344&#39;,&#39;url&#39;:&#39;&#39;,&#39;lineNumber&#39;:0,&#39;columnNumber&#39;:8}]}}}</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s1">&#39;Runtime.consoleAPICalled&#39;</span><span class="p">,</span>
                                     <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                     <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">,</span>
                                     <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_console_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                 <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wait the Runtime.consoleAPICalled event, simple data type (null, number, Boolean, string) will try to get value and return.</span>

<span class="sd">        This may be very useful for send message from Chrome to Python programs with a JSON string.</span>

<span class="sd">        {&#39;method&#39;: &#39;Runtime.consoleAPICalled&#39;, &#39;params&#39;: {&#39;type&#39;: &#39;log&#39;, &#39;args&#39;: [{&#39;type&#39;: &#39;boolean&#39;, &#39;value&#39;: True}], &#39;executionContextId&#39;: 4, &#39;timestamp&#39;: 1592924155017.107, &#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;: &#39;&#39;, &#39;scriptId&#39;: &#39;343&#39;, &#39;url&#39;: &#39;&#39;, &#39;lineNumber&#39;: 0, &#39;columnNumber&#39;: 8}]}}}</span>
<span class="sd">        {&#39;method&#39;: &#39;Runtime.consoleAPICalled&#39;, &#39;params&#39;: {&#39;type&#39;: &#39;log&#39;, &#39;args&#39;: [{&#39;type&#39;: &#39;object&#39;, &#39;subtype&#39;: &#39;null&#39;, &#39;value&#39;: None}], &#39;executionContextId&#39;: 4, &#39;timestamp&#39;: 1592924167384.516, &#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;: &#39;&#39;, &#39;scriptId&#39;: &#39;362&#39;, &#39;url&#39;: &#39;&#39;, &#39;lineNumber&#39;: 0, &#39;columnNumber&#39;: 8}]}}}</span>
<span class="sd">        {&#39;method&#39;: &#39;Runtime.consoleAPICalled&#39;, &#39;params&#39;: {&#39;type&#39;: &#39;log&#39;, &#39;args&#39;: [{&#39;type&#39;: &#39;number&#39;, &#39;value&#39;: 1, &#39;description&#39;: &#39;1234&#39;}], &#39;executionContextId&#39;: 4, &#39;timestamp&#39;: 1592924176778.166, &#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;: &#39;&#39;, &#39;scriptId&#39;: &#39;385&#39;, &#39;url&#39;: &#39;&#39;, &#39;lineNumber&#39;: 0, &#39;columnNumber&#39;: 8}]}}}</span>
<span class="sd">        {&#39;method&#39;: &#39;Runtime.consoleAPICalled&#39;, &#39;params&#39;: {&#39;type&#39;: &#39;log&#39;, &#39;args&#39;: [{&#39;type&#39;: &#39;string&#39;, &#39;value&#39;: &#39;string&#39;}], &#39;executionContextId&#39;: 4, &#39;timestamp&#39;: 1592924187756.2349, &#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;: &#39;&#39;, &#39;scriptId&#39;: &#39;404&#39;, &#39;url&#39;: &#39;&#39;, &#39;lineNumber&#39;: 0, &#39;columnNumber&#39;: 8}]}}}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s1">&#39;Runtime.consoleAPICalled&#39;</span><span class="p">,</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                       <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;params&#39;</span><span class="p">][</span><span class="s1">&#39;args&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span><span class="n">callback_function</span><span class="p">,</span>
                                                       <span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">wait_response_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                              <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                              <span class="n">response_body</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                              <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handler context for tab.wait_response.</span>

<span class="sd">            async with tab.wait_response_context(</span>
<span class="sd">                        filter_function=lambda r: tab.get_data_value(</span>
<span class="sd">                            r, &#39;params.response.url&#39;) == &#39;http://httpbin.org/get&#39;,</span>
<span class="sd">                        timeout=5,</span>
<span class="sd">                ) as r:</span>
<span class="sd">                    await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                    result = await r</span>
<span class="sd">                    if result:</span>
<span class="sd">                        print(result[&#39;data&#39;])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">WaitContext</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_response</span><span class="p">(</span>
                <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">,</span>
                <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">,</span>
                <span class="n">response_body</span><span class="o">=</span><span class="n">response_body</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">response_body</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;wait a special response filted by function, then run the callback_function.</span>

<span class="sd">        Sometimes the request fails to be sent, so use the `tab.wait_request` instead.</span>
<span class="sd">        if response_body:</span>
<span class="sd">            the non-null request_dict will contains response body.&#39;&#39;&#39;</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">request_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s2">&quot;Network.responseReceived&quot;</span><span class="p">,</span>
                                             <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">,</span>
                                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="o">-</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response_body</span><span class="p">:</span>
            <span class="c1"># set the data value</span>
            <span class="k">if</span> <span class="n">request_dict</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_response_body</span><span class="p">(</span>
                    <span class="n">request_dict</span><span class="p">[</span><span class="s1">&#39;params&#39;</span><span class="p">][</span><span class="s1">&#39;requestId&#39;</span><span class="p">],</span>
                    <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                    <span class="n">wait_loading</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">request_dict</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">request_dict</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span><span class="n">callback_function</span><span class="p">,</span>
                                                       <span class="n">request_dict</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Network.requestWillBeSent. To wait a special request filted by function, then run the callback_function(request_dict).</span>

<span class="sd">        Often used for HTTP packet capture:</span>

<span class="sd">            `await tab.wait_request(filter_function=lambda r: print(r), timeout=10)`</span>

<span class="sd">        WARNING: requestWillBeSent event fired do not mean the response is ready,</span>
<span class="sd">        should await tab.wait_request_loading(request_dict) or await tab.get_response(request_dict, wait_loading=True)</span>
<span class="sd">        WARNING: methods with prefix `wait_` the `timeout` default to None.</span>
<span class="sd">&#39;&#39;&#39;</span>
        <span class="n">request_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s2">&quot;Network.requestWillBeSent&quot;</span><span class="p">,</span>
                                             <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">,</span>
                                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span><span class="n">callback_function</span><span class="p">,</span>
                                                       <span class="n">request_dict</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_request_loading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                   <span class="n">request_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="s2">&quot;wait for the Network.loadingFinished event of given request id&quot;</span>

        <span class="k">def</span> <span class="nf">request_id_filter</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">event</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;params&quot;</span><span class="p">][</span><span class="s2">&quot;requestId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">request_id</span>

        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_request_id</span><span class="p">(</span><span class="n">request_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s1">&#39;Network.loadingFinished&#39;</span><span class="p">,</span>
                                     <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                     <span class="n">filter_function</span><span class="o">=</span><span class="n">request_id_filter</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_loading_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="s2">&quot;wait for the Network.loadingFinished event of given request id&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_request_loading</span><span class="p">(</span><span class="n">request_dict</span><span class="o">=</span><span class="n">request_dict</span><span class="p">,</span>
                                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">iter_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">events</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]],</span>
                    <span class="n">timeout</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="n">maxsize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;EventBuffer&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Iter events with a async context.</span>
<span class="sd">        ::</span>

<span class="sd">            import asyncio</span>

<span class="sd">            from ichrome import AsyncChromeDaemon</span>


<span class="sd">            async def main():</span>
<span class="sd">                async with AsyncChromeDaemon() as cd:</span>
<span class="sd">                    async with cd.connect_tab() as tab:</span>
<span class="sd">                        # demo1: events type is List[str]</span>
<span class="sd">                        async with tab.iter_events([&#39;Page.loadEventFired&#39;],</span>
<span class="sd">                                                timeout=60) as event_buffer:</span>
<span class="sd">                            await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                            print(await event_buffer)</span>
<span class="sd">                            # {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 357760.225243}, &#39;sessionId&#39;: &#39;99AFCDF842DA6C9C000C5F86A904FCE6&#39;}</span>
<span class="sd">                            await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                            print(await event_buffer.get())</span>
<span class="sd">                            # {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 357761.188782}, &#39;sessionId&#39;: &#39;99AFCDF842DA6C9C000C5F86A904FCE6&#39;}</span>
<span class="sd">                            await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                            async for data in event_buffer:</span>
<span class="sd">                                print(data)</span>
<span class="sd">                                # {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 357761.811724}, &#39;sessionId&#39;: &#39;99AFCDF842DA6C9C000C5F86A904FCE6&#39;}</span>
<span class="sd">                                break</span>
<span class="sd">                        # demo2: events type is Dict[str, Callable]</span>
<span class="sd">                        def cb(event, tab, buffer):</span>
<span class="sd">                            return (&#39;event_cb&#39;, event, tab, buffer)</span>

<span class="sd">                        async with tab.iter_events({&#39;Page.loadEventFired&#39;: cb},</span>
<span class="sd">                                                timeout=60) as event_buffer:</span>
<span class="sd">                            await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                            print(await event_buffer)</span>
<span class="sd">                            # (&#39;event_cb&#39;, {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 358088.744186}, &#39;sessionId&#39;: &#39;E89B2C20E601DB92D37B55D09D7A9531&#39;}, &lt;Tab(connected): AAC58F5AD46D711A4F22687A4CFF40AF&gt;, &lt;EventBuffer at 0x23586517b90 maxsize=0 tasks=1&gt;)</span>
<span class="sd">                            await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                            async for data in event_buffer:</span>
<span class="sd">                                print(data)</span>
<span class="sd">                                # (&#39;event_cb&#39;, {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 358089.399112}, &#39;sessionId&#39;: &#39;E89B2C20E601DB92D37B55D09D7A9531&#39;}, &lt;Tab(connected): AAC58F5AD46D711A4F22687A4CFF40AF&gt;, &lt;EventBuffer at 0x23586517b90 maxsize=0 tasks=2&gt;)</span>
<span class="sd">                                break</span>


<span class="sd">            asyncio.run(main())</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">EventBuffer</span><span class="p">(</span><span class="n">events</span><span class="p">,</span>
                           <span class="n">tab</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">maxsize</span><span class="o">=</span><span class="n">maxsize</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                           <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
                           <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">iter_fetch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">patterns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">handleAuthRequests</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">events</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">timeout</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">maxsize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                   <span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;FetchBuffer&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Fetch.RequestPattern:</span>

<span class="sd">    urlPattern</span>
<span class="sd">        string(Wildcards)</span>
<span class="sd">    resourceType</span>
<span class="sd">        Document, Stylesheet, Image, Media, Font, Script, TextTrack, XHR, Fetch, EventSource, WebSocket, Manifest, SignedExchange, Ping, CSPViolationReport, Preflight, Other</span>
<span class="sd">    requestStage</span>
<span class="sd">        Stage at which to begin intercepting requests. Default is Request.</span>
<span class="sd">        Allowed Values: Request, Response</span>

<span class="sd">Demo1::</span>

<span class="sd">    async with tab.iter_fetch(patterns=[{</span>
<span class="sd">            &#39;urlPattern&#39;: &#39;*httpbin.org/get?a=*&#39;</span>
<span class="sd">    }]) as f:</span>
<span class="sd">        await tab.goto(&#39;http://httpbin.org/get?a=1&#39;, timeout=0)</span>
<span class="sd">        data = await f</span>
<span class="sd">        assert data</span>
<span class="sd">        # test continueRequest</span>
<span class="sd">        await f.continueRequest(data)</span>
<span class="sd">        assert await tab.wait_includes(&#39;origin&#39;)</span>

<span class="sd">        await tab.goto(&#39;http://httpbin.org/get?a=1&#39;, timeout=0)</span>
<span class="sd">        data = await f</span>
<span class="sd">        assert data</span>
<span class="sd">        # test modify response</span>
<span class="sd">        await f.fulfillRequest(data,</span>
<span class="sd">                                200,</span>
<span class="sd">                                body=b&#39;hello world.&#39;)</span>
<span class="sd">        assert await tab.wait_includes(&#39;hello world.&#39;)</span>
<span class="sd">        await tab.goto(&#39;http://httpbin.org/get?a=1&#39;, timeout=0)</span>
<span class="sd">        data = await f</span>
<span class="sd">        assert data</span>
<span class="sd">        await f.failRequest(data, &#39;AccessDenied&#39;)</span>
<span class="sd">        assert (await tab.url).startswith(&#39;chrome-error://&#39;)</span>

<span class="sd">    # use callback</span>
<span class="sd">    async def cb(event, tab, buffer):</span>
<span class="sd">        await buffer.continueRequest(event)</span>

<span class="sd">    async with tab.iter_fetch(</span>
<span class="sd">            patterns=[{</span>
<span class="sd">                &#39;urlPattern&#39;: &#39;*httpbin.org/ip*&#39;</span>
<span class="sd">            }],</span>
<span class="sd">            callback=cb,</span>
<span class="sd">    ) as f:</span>
<span class="sd">        await tab.goto(&#39;http://httpbin.org/ip&#39;, timeout=0)</span>
<span class="sd">        async for r in f:</span>
<span class="sd">            break</span>

<span class="sd">Demo2::</span>

<span class="sd">        import asyncio</span>
<span class="sd">        import json</span>

<span class="sd">        from ichrome import AsyncChromeDaemon</span>


<span class="sd">        async def main():</span>
<span class="sd">            async with AsyncChromeDaemon() as cd:</span>
<span class="sd">                async with cd.connect_tab() as tab:</span>
<span class="sd">                    url = &#39;http://httpbin.org/ip&#39;</span>
<span class="sd">                    # 1. listen request/response network</span>
<span class="sd">                    RequestPatternList = [{</span>
<span class="sd">                        &#39;urlPattern&#39;: &#39;*httpbin.org/ip*&#39;,</span>
<span class="sd">                        &#39;requestStage&#39;: &#39;Response&#39;</span>
<span class="sd">                    }]</span>
<span class="sd">                    async with tab.iter_fetch(RequestPatternList) as f:</span>
<span class="sd">                        await tab.goto(url, timeout=0)</span>
<span class="sd">                        # only one request could be catched</span>
<span class="sd">                        event = await f</span>
<span class="sd">                        print(&#39;request event:&#39;, json.dumps(event), flush=True)</span>
<span class="sd">                        response = await f.get_response(event, timeout=5)</span>
<span class="sd">                        print(&#39;response body:&#39;, response[&#39;data&#39;])</span>

<span class="sd">                    # 2. disable image requests</span>
<span class="sd">                    url = &#39;https://www.bing.com&#39;</span>
<span class="sd">                    RequestPatternList = [</span>
<span class="sd">                        {</span>
<span class="sd">                            &#39;urlPattern&#39;: &#39;*&#39;,</span>
<span class="sd">                            &#39;resourceType&#39;: &#39;Image&#39;,  # could be other types</span>
<span class="sd">                            &#39;requestStage&#39;: &#39;Request&#39;</span>
<span class="sd">                        },</span>
<span class="sd">                        {</span>
<span class="sd">                            &#39;urlPattern&#39;: &#39;*&#39;,</span>
<span class="sd">                            &#39;resourceType&#39;: &#39;Stylesheet&#39;,</span>
<span class="sd">                            &#39;requestStage&#39;: &#39;Request&#39;</span>
<span class="sd">                        },</span>
<span class="sd">                        {</span>
<span class="sd">                            &#39;urlPattern&#39;: &#39;*&#39;,</span>
<span class="sd">                            &#39;resourceType&#39;: &#39;Script&#39;,</span>
<span class="sd">                            &#39;requestStage&#39;: &#39;Request&#39;</span>
<span class="sd">                        },</span>
<span class="sd">                    ]</span>
<span class="sd">                    # listen 5 seconds</span>
<span class="sd">                    async with tab.iter_fetch(RequestPatternList, timeout=5) as f:</span>
<span class="sd">                        await tab.goto(url, timeout=0)</span>
<span class="sd">                        # handle all the matched requests</span>
<span class="sd">                        async for event in f:</span>
<span class="sd">                            if f.match_event(event, RequestPatternList[0]):</span>
<span class="sd">                                print(&#39;abort request image:&#39;,</span>
<span class="sd">                                    tab.get_data_value(event, &#39;params.request.url&#39;),</span>
<span class="sd">                                    flush=True)</span>
<span class="sd">                                await f.failRequest(event, &#39;Aborted&#39;)</span>
<span class="sd">                            elif f.match_event(event, RequestPatternList[1]):</span>
<span class="sd">                                print(&#39;abort request css:&#39;,</span>
<span class="sd">                                    tab.get_data_value(event, &#39;params.request.url&#39;),</span>
<span class="sd">                                    flush=True)</span>
<span class="sd">                                await f.failRequest(event, &#39;ConnectionRefused&#39;)</span>
<span class="sd">                            elif f.match_event(event, RequestPatternList[2]):</span>
<span class="sd">                                print(&#39;abort request js:&#39;,</span>
<span class="sd">                                    tab.get_data_value(event, &#39;params.request.url&#39;),</span>
<span class="sd">                                    flush=True)</span>
<span class="sd">                                await f.failRequest(event, &#39;AccessDenied&#39;)</span>
<span class="sd">                        await asyncio.sleep(5)</span>


<span class="sd">        if __name__ == &quot;__main__&quot;:</span>
<span class="sd">            asyncio.run(main())</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FetchBuffer</span><span class="p">(</span><span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">,</span>
                           <span class="n">tab</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">patterns</span><span class="o">=</span><span class="n">patterns</span><span class="p">,</span>
                           <span class="n">handleAuthRequests</span><span class="o">=</span><span class="n">handleAuthRequests</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                           <span class="n">maxsize</span><span class="o">=</span><span class="n">maxsize</span><span class="p">,</span>
                           <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
                           <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">pass_auth_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="n">user</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                              <span class="n">password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                              <span class="n">test_url</span><span class="o">=</span><span class="s1">&#39;https://api.github.com/&#39;</span><span class="p">,</span>
                              <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                              <span class="n">iter_count</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;pass user/password for auth proxy.</span>

<span class="sd">        Demo::</span>

<span class="sd">            import asyncio</span>

<span class="sd">            from ichrome import AsyncChromeDaemon</span>


<span class="sd">            async def main():</span>
<span class="sd">                async with AsyncChromeDaemon(proxy=&#39;http://127.0.0.1:10800&#39;,</span>
<span class="sd">                                            clear_after_shutdown=True,</span>
<span class="sd">                                            headless=1) as cd:</span>
<span class="sd">                    async with cd.connect_tab() as tab:</span>
<span class="sd">                        await tab.pass_auth_proxy(&#39;user&#39;, &#39;pwd&#39;)</span>
<span class="sd">                        await tab.goto(&#39;http://httpbin.org/ip&#39;, timeout=2)</span>
<span class="sd">                        print(await tab.html)</span>


<span class="sd">            asyncio.run(main())</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_fetch</span><span class="p">(</span><span class="n">handleAuthRequests</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">test_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iter_count</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="n">event</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="k">await</span> <span class="n">f</span>
                    <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Fetch.requestPaused&#39;</span><span class="p">:</span>
                        <span class="k">await</span> <span class="n">f</span><span class="o">.</span><span class="n">continueRequest</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Fetch.authRequired&#39;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">callback</span><span class="p">:</span>
                            <span class="n">ok</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ensure_awaitable</span><span class="p">(</span><span class="n">callback</span><span class="p">(</span><span class="n">event</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">await</span> <span class="n">f</span><span class="o">.</span><span class="n">continueWithAuth</span><span class="p">(</span>
                                <span class="n">event</span><span class="p">,</span>
                                <span class="s1">&#39;ProvideCredentials&#39;</span><span class="p">,</span>
                                <span class="n">user</span><span class="p">,</span>
                                <span class="n">password</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="n">ok</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">task</span>
                <span class="k">return</span> <span class="n">ok</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">request_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
        <span class="n">wait_loading</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&#39;&#39;&#39;return Network.getResponseBody raw response.</span>
<span class="sd">        return demo:</span>

<span class="sd">                {&#39;id&#39;: 2, &#39;result&#39;: {&#39;body&#39;: &#39;source code&#39;, &#39;base64Encoded&#39;: False}}</span>

<span class="sd">        some ajax request need to await tab.wait_request_loading(request_dict) for</span>
<span class="sd">        loadingFinished (or sleep some secs) and wait_loading=None will auto check response loaded.&#39;&#39;&#39;</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_request_id</span><span class="p">(</span><span class="n">request_dict</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">wait_loading</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getResponseBody&quot;</span><span class="p">,</span>
                                   <span class="n">requestId</span><span class="o">=</span><span class="n">request_id</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;error.code&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">32000</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">data</span>
        <span class="k">if</span> <span class="n">wait_loading</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
            <span class="c1"># ensure the request loaded</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_request_loading</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getResponseBody&quot;</span><span class="p">,</span>
                               <span class="n">requestId</span><span class="o">=</span><span class="n">request_id</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                <span class="n">request_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                                <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                                <span class="n">wait_loading</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;get result.body from self.get_response.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">request_dict</span><span class="p">,</span>
                                         <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                         <span class="n">wait_loading</span><span class="o">=</span><span class="n">wait_loading</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.body&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_request_post_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                    <span class="n">request_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                                    <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the post data of the POST request. No need for wait_request_loading.&quot;&quot;&quot;</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_request_id</span><span class="p">(</span><span class="n">request_dict</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getRequestPostData&quot;</span><span class="p">,</span>
                                 <span class="n">requestId</span><span class="o">=</span><span class="n">request_id</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.postData&#39;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">reload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                     <span class="n">ignoreCache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                     <span class="n">scriptToEvaluateOnLoad</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reload the page.</span>

<span class="sd">        ignoreCache: If true, browser cache is ignored (as if the user pressed Shift+refresh).</span>
<span class="sd">        scriptToEvaluateOnLoad: If set, the script will be injected into all frames of the inspected page after reload.</span>

<span class="sd">        Argument will be ignored if reloading dataURL origin.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">scriptToEvaluateOnLoad</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.reload&#39;</span><span class="p">,</span>
                                   <span class="n">ignoreCache</span><span class="o">=</span><span class="n">ignoreCache</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                <span class="s1">&#39;Page.reload&#39;</span><span class="p">,</span>
                <span class="n">ignoreCache</span><span class="o">=</span><span class="n">ignoreCache</span><span class="p">,</span>
                <span class="n">scriptToEvaluateOnLoad</span><span class="o">=</span><span class="n">scriptToEvaluateOnLoad</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[set_headers] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> headers =&gt; </span><span class="si">{</span><span class="n">headers</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.setExtraHTTPHeaders&#39;</span><span class="p">,</span>
                               <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_ua</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                     <span class="n">userAgent</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                     <span class="n">acceptLanguage</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="n">platform</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;[Network.setUserAgentOverride], reset the User-Agent of this tab&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[set_ua] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> userAgent =&gt; </span><span class="si">{</span><span class="n">userAgent</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.setUserAgentOverride&#39;</span><span class="p">,</span>
                               <span class="n">userAgent</span><span class="o">=</span><span class="n">userAgent</span><span class="p">,</span>
                               <span class="n">acceptLanguage</span><span class="o">=</span><span class="n">acceptLanguage</span><span class="p">,</span>
                               <span class="n">platform</span><span class="o">=</span><span class="n">platform</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">goto_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entryId</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s2">&quot;[Page.navigateToHistoryEntry]&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.navigateToHistoryEntry&#39;</span><span class="p">,</span>
                                 <span class="n">entryId</span><span class="o">=</span><span class="n">entryId</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_error</span><span class="p">(</span><span class="s1">&#39;goto_history&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">entryId</span><span class="o">=</span><span class="n">entryId</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_history_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                <span class="n">relative_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;get history entries of this page&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_history_list</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;currentIndex&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">relative_index</span>
                <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;entries&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">relative_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;entries&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span>
                    <span class="s1">&#39;index and relative_index should not be both None.&#39;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">history_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;go to back history&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto_history_relative</span><span class="p">(</span><span class="n">relative_index</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
                                                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">history_forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;go to forward history&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto_history_relative</span><span class="p">(</span><span class="n">relative_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">goto_history_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                    <span class="n">relative_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                    <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;go to the relative history&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_history_entry</span><span class="p">(</span><span class="n">relative_index</span><span class="o">=</span><span class="n">relative_index</span><span class="p">,</span>
                                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">entry_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">entry_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto_history</span><span class="p">(</span><span class="n">entryId</span><span class="o">=</span><span class="n">entry_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_history_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;(Page.getNavigationHistory) Get the page history list.</span>
<span class="sd">        return example:</span>
<span class="sd">            {&#39;currentIndex&#39;: 0, &#39;entries&#39;: [{&#39;id&#39;: 1, &#39;url&#39;: &#39;about:blank&#39;, &#39;userTypedURL&#39;: &#39;about:blank&#39;, &#39;title&#39;: &#39;&#39;, &#39;transitionType&#39;: &#39;auto_toplevel&#39;}, {&#39;id&#39;: 7, &#39;url&#39;: &#39;http://3.p.cn/&#39;, &#39;userTypedURL&#39;: &#39;http://3.p.cn/&#39;, &#39;title&#39;: &#39;Not Found&#39;, &#39;transitionType&#39;: &#39;typed&#39;}, {&#39;id&#39;: 9, &#39;url&#39;: &#39;http://p.3.cn/&#39;, &#39;userTypedURL&#39;: &#39;http://p.3.cn/&#39;, &#39;title&#39;: &#39;&#39;, &#39;transitionType&#39;: &#39;typed&#39;}]}}&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.getNavigationHistory&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">{})</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">reset_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s2">&quot;[Page.resetNavigationHistory], clear up history immediately&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.resetNavigationHistory&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_error</span><span class="p">(</span><span class="s1">&#39;reset_history&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">setBlockedURLs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;(Network.setBlockedURLs) Blocks URLs from loading. [EXPERIMENTAL].</span>

<span class="sd">Demo::</span>

<span class="sd">    await tab.setBlockedURLs(urls=[&#39;*.jpg&#39;, &#39;*.png&#39;])</span>

<span class="sd">WARNING: This method is EXPERIMENTAL, the official suggestion is using Fetch.enable, even Fetch is also EXPERIMENTAL, and wait events to control the requests (continue / abort / modify), especially block urls with resourceType: Document, Stylesheet, Image, Media, Font, Script, TextTrack, XHR, Fetch, EventSource, WebSocket, Manifest, SignedExchange, Ping, CSPViolationReport, Other.</span>
<span class="sd">https://chromedevtools.github.io/devtools-protocol/tot/Fetch/#method-enable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.setBlockedURLs&#39;</span><span class="p">,</span>
                               <span class="n">urls</span><span class="o">=</span><span class="n">urls</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">goto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">referrer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                   <span class="n">timeout_stop_loading</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s2">&quot;alias for self.set_url&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_url</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                  <span class="n">referrer</span><span class="o">=</span><span class="n">referrer</span><span class="p">,</span>
                                  <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                  <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="n">timeout_stop_loading</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">referrer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                      <span class="n">timeout_stop_loading</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Navigate the tab to the URL. If stop loading occurs, return False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[set_url] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> url =&gt; </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># no need wait loading</span>
            <span class="n">loaded_task</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># register loading event before seting url</span>
            <span class="n">loaded_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wait_loading</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                  <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="n">timeout_stop_loading</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">url</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
            <span class="k">if</span> <span class="n">referrer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.navigate&quot;</span><span class="p">,</span>
                                       <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.navigate&quot;</span><span class="p">,</span>
                                       <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                       <span class="n">referrer</span><span class="o">=</span><span class="n">referrer</span><span class="p">,</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="c1"># loadEventFired return True, else return False</span>
        <span class="k">if</span> <span class="n">loaded_task</span><span class="p">:</span>
            <span class="n">loaded_ok</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loaded_task</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">loaded_ok</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">data</span> <span class="ow">and</span> <span class="n">loaded_ok</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">js</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">javascript</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result&#39;</span><span class="p">,</span>
                 <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluate JavaScript on the page.</span>
<span class="sd">        `js_result = await tab.js(&#39;document.title&#39;, timeout=10)`</span>
<span class="sd">        js_result:</span>
<span class="sd">            {&#39;id&#39;: 18, &#39;result&#39;: {&#39;result&#39;: {&#39;type&#39;: &#39;string&#39;, &#39;value&#39;: &#39;Welcome to Python.org&#39;}}}</span>
<span class="sd">        return None while timeout.</span>
<span class="sd">        kwargs is a dict for Runtime.evaluate&#39;s `timeout` is conflict with `timeout` of self.send.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Runtime.evaluate&quot;</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                 <span class="n">expression</span><span class="o">=</span><span class="n">javascript</span><span class="p">,</span>
                                 <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;[js] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> insert js `</span><span class="si">{</span><span class="n">javascript</span><span class="si">}</span><span class="s1">`, received: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">js_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">javascript</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                      <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">,</span>
                      <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;javascript will be filled into function template.</span>

<span class="sd">Demo::</span>

<span class="sd">    javascript = `return document.title`</span>
<span class="sd">    will run js like `(()=&gt;{return document.title})()`, and get the return result</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="n">javascript</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;(()=&gt;{</span><span class="si">%s</span><span class="s1">})()&#39;&#39;&#39;</span> <span class="o">%</span> <span class="n">javascript</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">javascript</span><span class="p">,</span>
                             <span class="n">value_path</span><span class="o">=</span><span class="n">value_path</span><span class="p">,</span>
                             <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="n">accept</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">promptText</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;WARNING: you should enable `Page` domain explicitly before running tab.js(&#39;alert()&#39;), because alert() will always halt the event loop.&quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">timeout</span><span class="p">,</span> <span class="s1">&#39;accept&#39;</span><span class="p">:</span> <span class="n">accept</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">promptText</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;promptText&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">promptText</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.handleJavaScriptDialog&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_error</span><span class="p">(</span><span class="s1">&#39;handle_dialog&#39;</span><span class="p">,</span>
                                <span class="n">result</span><span class="p">,</span>
                                <span class="n">accept</span><span class="o">=</span><span class="n">accept</span><span class="p">,</span>
                                <span class="n">promptText</span><span class="o">=</span><span class="n">promptText</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_tag_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                             <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;wait the tag appeared and click it&quot;</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_tag</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span>
                                  <span class="n">max_wait_time</span><span class="o">=</span><span class="n">max_wait_time</span><span class="p">,</span>
                                  <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span>
                                  <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                       <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                       <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">TagNotFound</span><span class="p">]:</span>
        <span class="sd">&#39;&#39;&#39;Wait until the tag is ready or max_wait_time used up, sometimes it is more useful than wait loading.</span>
<span class="sd">        cssselector: css querying the Tag.</span>
<span class="sd">        interval: checking interval for while loop.</span>
<span class="sd">        max_wait_time: if time used up, return None.</span>
<span class="sd">        timeout: timeout seconds for sending a msg.</span>

<span class="sd">        If max_wait_time used up: return [].</span>
<span class="sd">        elif querySelectorAll runs failed, return None.</span>
<span class="sd">        else: return List[Tag]</span>
<span class="sd">        WARNING: methods with prefix `wait_` the `timeout` default to None.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">TIMEOUT_AT</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">max_wait_time</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">TIMEOUT_AT</span> <span class="o">&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">():</span>
            <span class="n">tag</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tag</span> <span class="ow">or</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                        <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tag</span><span class="p">],</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">TagNotFound</span><span class="p">]:</span>
        <span class="sd">&#39;&#39;&#39;Wait until the tags is ready or max_wait_time used up, sometimes it is more useful than wait loading.</span>
<span class="sd">        cssselector: css querying the Tags.</span>
<span class="sd">        interval: checking interval for while loop.</span>
<span class="sd">        max_wait_time: if time used up, return [].</span>
<span class="sd">        timeout: timeout seconds for sending a msg.</span>

<span class="sd">        If max_wait_time used up: return [].</span>
<span class="sd">        elif querySelectorAll runs failed, return None.</span>
<span class="sd">        else: return List[Tag]</span>
<span class="sd">        WARNING: methods with prefix `wait_` the `timeout` default to None.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">TIMEOUT_AT</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">max_wait_time</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">TIMEOUT_AT</span> <span class="o">&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">():</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">tags</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_findall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">regex</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                           <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                           <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                           <span class="n">flags</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span>
                           <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;while loop until await tab.findall got somethine.&#39;&#39;&#39;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">TIMEOUT_AT</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">max_wait_time</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">TIMEOUT_AT</span> <span class="o">&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">():</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="n">regex</span><span class="p">,</span>
                                        <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                        <span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span>
                                        <span class="n">flags</span><span class="o">=</span><span class="n">flags</span><span class="p">,</span>
                                        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">findone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">regex</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                      <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                      <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                      <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;find the string in html(select with given css)&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="n">regex</span><span class="p">,</span>
                                    <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                    <span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span>
                                    <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">findall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">regex</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                      <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                      <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                      <span class="n">flags</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span>
                      <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Similar to python re.findall.</span>

<span class="sd">        Args:</span>
<span class="sd">            regex (str): raw regex string to be set in /%s/g.</span>
<span class="sd">            cssselector (str, optional): which element.outerHTML to be matched, defaults to &#39;html&#39;.</span>
<span class="sd">            attribute (str, optional): attribute of the selected element, defaults to &#39;outerHTML&#39;</span>
<span class="sd">            flags (str, optional): regex flags, defaults to &#39;g&#39;.</span>
<span class="sd">            timeout (float): defaults to NotSet.</span>

<span class="sd">Demo::</span>

<span class="sd">    # no group / (?:) / (?&lt;=) / (?!)</span>
<span class="sd">    print(await tab.findall(&#39;&lt;title&gt;.*?&lt;/title&gt;&#39;))</span>
<span class="sd">    # [&#39;&lt;title&gt;123456789&lt;/title&gt;&#39;]</span>

<span class="sd">    # only 1 group</span>
<span class="sd">    print(await tab.findall(&#39;&lt;title&gt;(.*?)&lt;/title&gt;&#39;))</span>
<span class="sd">    # [&#39;123456789&#39;]</span>

<span class="sd">    # multi-groups</span>
<span class="sd">    print(await tab.findall(&#39;&lt;title&gt;(1)(2).*?&lt;/title&gt;&#39;))</span>
<span class="sd">    # [[&#39;1&#39;, &#39;2&#39;]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;!</span><span class="se">\\</span><span class="s1">)/&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
            <span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;!</span><span class="se">\\</span><span class="s1">)/&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;\/&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="p">)</span>
        <span class="n">group_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;!</span><span class="se">\\</span><span class="s1">)\((?!\?)&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="p">))</span>
        <span class="n">act</span> <span class="o">=</span> <span class="s1">&#39;matchAll&#39;</span> <span class="k">if</span> <span class="s1">&#39;g&#39;</span> <span class="ow">in</span> <span class="n">flags</span> <span class="k">else</span> <span class="s1">&#39;match&#39;</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">var group_count = </span><span class="si">%s</span><span class="s1"></span>
<span class="s1">var result = []</span>
<span class="s1">var items = [...document.querySelector(`</span><span class="si">%s</span><span class="s1">`).</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">(/</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">)]</span>
<span class="s1">items.forEach((item) =&gt; {</span>
<span class="s1">    if (group_count &lt;= 1) {</span>
<span class="s1">        result.push(item[group_count])</span>
<span class="s1">    } else {</span>
<span class="s1">        var tmp = []</span>
<span class="s1">        for (let i = 1; i &lt; group_count + 1; i++) {</span>
<span class="s1">            tmp.push(item[i])</span>
<span class="s1">        }</span>
<span class="s1">        result.push(tmp)</span>
<span class="s1">    }</span>
<span class="s1">})</span>
<span class="s1">JSON.stringify(result)</span>
<span class="s1">&#39;&#39;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">group_count</span><span class="p">,</span> <span class="n">cssselector</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">act</span><span class="p">,</span> <span class="n">regex</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">code</span><span class="p">,</span>
                               <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">and</span> <span class="n">result</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">text</span><span class="p">,</span>
                       <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                       <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                       <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;alias for Tab.includes&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">includes</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                                   <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                   <span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">includes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">text</span><span class="p">,</span>
                       <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                       <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                       <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;String.prototype.includes.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): substring</span>
<span class="sd">            cssselector (str, optional): css selector for outerHTML, defaults to &#39;html&#39;</span>
<span class="sd">            attribute (str, optional): attribute of the selected element, defaults to &#39;outerHTML&#39;. Sometimes for case-insensitive usage by setting `attribute=&#39;textContent.toLowerCase()&#39;`</span>
<span class="sd">        Returns:</span>
<span class="sd">            whether the outerHTML contains substring.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">js</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;document.querySelector(`</span><span class="si">{</span><span class="n">cssselector</span><span class="si">}</span><span class="s1">`).</span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="s1">.includes(`</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s1">`)&#39;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">js</span><span class="p">,</span> <span class="n">jsonify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_includes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                            <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                            <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                            <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;while loop until element contains the substring.&#39;&#39;&#39;</span>
        <span class="n">exist</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">TIMEOUT_AT</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">max_wait_time</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">TIMEOUT_AT</span> <span class="o">&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">():</span>
            <span class="n">exist</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">includes</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                                        <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                        <span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span>
                                        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">exist</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">exist</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">exist</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">querySelector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                            <span class="n">action</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tag</span><span class="p">,</span> <span class="n">TagNotFound</span><span class="p">]:</span>
        <span class="s2">&quot;deprecated. query a tag with css&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                           <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                           <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
                                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">querySelectorAll</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">index</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">action</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tag</span><span class="p">],</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">TagNotFound</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;deprecated. CDP DOM domain is quite heavy both computationally and memory wise, use js instead. return List[Tag], Tag, TagNotFound.</span>
<span class="sd">        Tag hasattr: tagName, innerHTML, outerHTML, textContent, attributes, result</span>

<span class="sd">        If index is not None, will return the tag_list[index], else return the whole tag list.</span>

<span class="sd">        Demo:</span>

<span class="sd">            # 1. get attribute of the selected tag</span>

<span class="sd">            tags = (await tab.querySelectorAll(&quot;#sc_hdu&gt;li&gt;a&quot;, index=0, action=&quot;getAttribute(&#39;href&#39;)&quot;)).result</span>
<span class="sd">            tags = (await tab.querySelectorAll(&quot;#sc_hdu&gt;li&gt;a&quot;, index=0)).get(&#39;href&#39;)</span>
<span class="sd">            tags = (await tab.querySelectorAll(&quot;#sc_hdu&gt;li&gt;a&quot;, index=0)).to_dict()</span>

<span class="sd">            # 2. remove href attr of all the selected tags</span>
<span class="sd">            tags = await tab.querySelectorAll(&quot;#sc_hdu&gt;li&gt;a&quot;, action=&quot;removeAttribute(&#39;href&#39;)&quot;)</span>

<span class="sd">            for tag in tab.querySelectorAll(&quot;#sc_hdu&gt;li&quot;):</span>
<span class="sd">                print(tag.attributes)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;&#39;&quot;</span> <span class="ow">in</span> <span class="n">cssselector</span><span class="p">:</span>
            <span class="n">cssselector</span> <span class="o">=</span> <span class="n">cssselector</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="s2">&quot;null&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">action</span><span class="p">:</span>
            <span class="c1"># do the action and set Tag.result as el.action result</span>
            <span class="n">_action</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;item.result=el.</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> || &#39;&#39;;item.result=item.result.toString()&quot;</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;try {</span><span class="si">%s</span><span class="s1">} catch (error) </span><span class="si">{}</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">_action</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">javascript</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">var index_filter = </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">var css = `</span><span class="si">%s</span><span class="s2">`</span>
<span class="s2">if (index_filter == 0) {</span>
<span class="s2">    var element = document.querySelector(css)</span>
<span class="s2">    if (element) {</span>
<span class="s2">        var elements = [element]</span>
<span class="s2">    } else {</span>
<span class="s2">        var elements = []</span>
<span class="s2">    }</span>
<span class="s2">} else {</span>
<span class="s2">    var elements = document.querySelectorAll(css)</span>
<span class="s2">}</span>
<span class="s2">var result = []</span>
<span class="s2">for (let index = 0; index &lt; elements.length; index++) {</span>
<span class="s2">    const el = elements[index];</span>
<span class="s2">    if (index_filter!=null &amp;&amp; index_filter!=index) {</span>
<span class="s2">        continue</span>
<span class="s2">    }</span>

<span class="s2">    var item = {</span>
<span class="s2">        tagName: el.tagName,</span>
<span class="s2">        innerHTML: el.innerHTML,</span>
<span class="s2">        outerHTML: el.outerHTML,</span>
<span class="s2">        textContent: el.textContent,</span>
<span class="s2">        result: null,</span>
<span class="s2">        attributes: </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    }</span>
<span class="s2">    for (const attr of el.attributes) {</span>
<span class="s2">        item.attributes[attr.name] = attr.value</span>
<span class="s2">    }</span>
<span class="s2">    </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    result.push(item)</span>
<span class="s2">}</span>
<span class="s2">JSON.stringify(result)&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">index</span><span class="p">,</span>
            <span class="n">cssselector</span><span class="p">,</span>
            <span class="n">action</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response_items_str</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">javascript</span><span class="p">,</span>
                                          <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                          <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
                    <span class="n">response_items_str</span><span class="p">)</span> <span class="k">if</span> <span class="n">response_items_str</span> <span class="k">else</span> <span class="p">[]</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">Tag</span><span class="p">(</span><span class="o">**</span><span class="n">kws</span><span class="p">)</span> <span class="k">for</span> <span class="n">kws</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">TagNotFound</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;querySelectorAll error: </span><span class="si">{</span><span class="n">error</span><span class="si">!r}</span><span class="s2">, response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">error</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">insertAdjacentHTML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                 <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                 <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;body&#39;</span><span class="p">,</span>
                                 <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;beforeend&#39;</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Insert HTML source code into document. Often used for injecting CSS element.</span>

<span class="sd">        Args:</span>
<span class="sd">            html (str): HTML source code</span>
<span class="sd">            cssselector (str, optional): cssselector to find the target node, defaults to &#39;body&#39;</span>
<span class="sd">            position (str, optional): [&#39;beforebegin&#39;, &#39;afterbegin&#39;, &#39;beforeend&#39;, &#39;afterend&#39;],  defaults to &#39;beforeend&#39;</span>
<span class="sd">            timeout ([type], optional): defaults to NotSet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">template</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;document.querySelector(`</span><span class="si">{</span><span class="n">cssselector</span><span class="si">}</span><span class="s1">`).insertAdjacentHTML(&#39;</span><span class="si">{</span><span class="n">position</span><span class="si">}</span><span class="s1">&#39;, `</span><span class="si">{</span><span class="n">html</span><span class="si">}</span><span class="s1">`)&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">inject_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                          <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                          <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;body&#39;</span><span class="p">,</span>
                          <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;beforeend&#39;</span><span class="p">,</span>
                          <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An alias name for tab.insertAdjacentHTML.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">insertAdjacentHTML</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">,</span>
                                             <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                             <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">inject_js_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="n">url</span><span class="p">,</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">retry</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="o">**</span><span class="n">requests_kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="s2">&quot;inject and run the given JS URL&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">requests_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">):</span>
            <span class="n">requests_kwargs</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UA</span><span class="o">.</span><span class="n">Chrome</span><span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                               <span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span>
                               <span class="n">ssl</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span>
                               <span class="o">**</span><span class="n">requests_kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r</span><span class="p">:</span>
            <span class="n">javascript</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">javascript</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;inject_js_url failed for request: </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                    <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="n">action</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;click()&quot;</span><span class="p">,</span>
                    <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tag</span><span class="p">],</span> <span class="n">Tag</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Click some tag with javascript</span>
<span class="sd">        await tab.click(&quot;#sc_hdu&gt;li&gt;a&quot;) # click first node&#39;s link.</span>
<span class="sd">        await tab.click(&quot;#sc_hdu&gt;li&gt;a&quot;, index=3, action=&quot;removeAttribute(&#39;href&#39;)&quot;) # remove href of the a tag.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span>
                                           <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
                                           <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
                                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_element_clip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                               <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                               <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                               <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Element.getBoundingClientRect. If captureBeyondViewport is True, use scrollWidth &amp; scrollHeight instead.</span>
<span class="sd">        {&quot;x&quot;:241,&quot;y&quot;:85.59375,&quot;width&quot;:165,&quot;height&quot;:36,&quot;top&quot;:85.59375,&quot;right&quot;:406,&quot;bottom&quot;:121.59375,&quot;left&quot;:241}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">captureBeyondViewport</span><span class="p">:</span>
            <span class="n">js_str</span> <span class="o">=</span> <span class="s1">&#39;node=document.querySelector(`</span><span class="si">%s</span><span class="s1">`);rect = node.getBoundingClientRect();rect.width=node.scrollWidth;rect.height=node.scrollHeight;JSON.stringify(rect)&#39;</span> <span class="o">%</span> <span class="n">cssselector</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">js_str</span> <span class="o">=</span> <span class="s1">&#39;node=document.querySelector(`</span><span class="si">%s</span><span class="s1">`);rect = node.getBoundingClientRect();JSON.stringify(rect)&#39;</span> <span class="o">%</span> <span class="n">cssselector</span>
        <span class="n">rect</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">js_str</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                             <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rect</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rect</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
                <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>
                <span class="k">return</span> <span class="n">rect</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">):</span>
                <span class="k">pass</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">snapshot_mhtml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Page.captureSnapshot], as the mhtml page&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.captureSnapshot&#39;</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                 <span class="n">callback_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span>
                                 <span class="n">get_data_value</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;result.data&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                                 <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">and</span> <span class="n">save_path</span><span class="p">:</span>

            <span class="k">def</span> <span class="nf">save_file</span><span class="p">():</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

            <span class="k">await</span> <span class="n">async_run</span><span class="p">(</span><span class="n">save_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">screenshot_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                 <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                 <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                 <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span>
                                 <span class="n">quality</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
                                 <span class="n">fromSurface</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                 <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                                 <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="s2">&quot;screenshot the tag selected with given css as a picture&quot;</span>
        <span class="k">if</span> <span class="n">cssselector</span><span class="p">:</span>
            <span class="n">clip</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_clip</span><span class="p">(</span>
                <span class="n">cssselector</span><span class="p">,</span>
                <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="n">captureBeyondViewport</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">clip</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">screenshot</span><span class="p">(</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
            <span class="n">quality</span><span class="o">=</span><span class="n">quality</span><span class="p">,</span>
            <span class="n">clip</span><span class="o">=</span><span class="n">clip</span><span class="p">,</span>
            <span class="n">fromSurface</span><span class="o">=</span><span class="n">fromSurface</span><span class="p">,</span>
            <span class="n">save_path</span><span class="o">=</span><span class="n">save_path</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="n">captureBeyondViewport</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">screenshot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span>
                         <span class="n">quality</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
                         <span class="n">clip</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">fromSurface</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                         <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                         <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Page.captureScreenshot. clip&#39;s keys: x, y, width, height, scale</span>

<span class="sd">        format(str, optional): Image compression format (defaults to png)., defaults to &#39;png&#39;</span>
<span class="sd">        quality(int, optional): Compression quality from range [0..100], defaults to None. (jpeg only).</span>
<span class="sd">        clip(dict, optional): Capture the screenshot of a given region only. defaults to None, means whole page.</span>
<span class="sd">        fromSurface(bool, optional): Capture the screenshot from the surface, rather than the view. Defaults to true.</span>
<span class="sd">&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">save_file</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">file_bytes</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_bytes</span><span class="p">)</span>

        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="n">quality</span><span class="o">=</span><span class="n">quality</span><span class="p">,</span> <span class="n">fromSurface</span><span class="o">=</span><span class="n">fromSurface</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">clip</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;clip&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clip</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.captureScreenshot&#39;</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                 <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="n">captureBeyondViewport</span><span class="p">,</span>
                                 <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">base64_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.data&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">save_path</span> <span class="ow">and</span> <span class="n">base64_img</span><span class="p">:</span>
            <span class="n">file_bytes</span> <span class="o">=</span> <span class="n">b64decode</span><span class="p">(</span><span class="n">base64_img</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">async_run</span><span class="p">(</span><span class="n">save_file</span><span class="p">,</span> <span class="n">save_path</span><span class="p">,</span> <span class="n">file_bytes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">base64_img</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_js_onload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;[Page.addScriptToEvaluateOnNewDocument], return the identifier [str].&#39;&#39;&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.addScriptToEvaluateOnNewDocument&#39;</span><span class="p">,</span>
                               <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
                               <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.identifier&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">remove_js_onload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;[Page.removeScriptToEvaluateOnNewDocument], return whether the identifier exist.&#39;&#39;&#39;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.removeScriptToEvaluateOnNewDocument&#39;</span><span class="p">,</span>
                                 <span class="n">identifier</span><span class="o">=</span><span class="n">identifier</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_error</span><span class="p">(</span><span class="s1">&#39;remove_js_onload&#39;</span><span class="p">,</span>
                                <span class="n">result</span><span class="p">,</span>
                                <span class="n">identifier</span><span class="o">=</span><span class="n">identifier</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_screen_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;get [window.screen.width, window.screen.height] with javascript&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
            <span class="s1">&#39;[window.screen.width, window.screen.height]&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_page_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;get page size with javascript&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
            <span class="s2">&quot;[window.innerWidth||document.documentElement.clientWidth||document.querySelector(&#39;body&#39;).clientWidth,window.innerHeight||document.documentElement.clientHeight||document.querySelector(&#39;body&#39;).clientHeight]&quot;</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">keyboard_send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="o">*</span><span class="p">,</span>
                            <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;char&#39;</span><span class="p">,</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                            <span class="n">string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;[Input.dispatchKeyEvent]</span>

<span class="sd">        type: keyDown, keyUp, rawKeyDown, char.</span>
<span class="sd">        string: will be split into chars.</span>

<span class="sd">        kwargs:</span>
<span class="sd">            text, unmodifiedText, keyIdentifier, code, key...</span>

<span class="sd">        https://chromedevtools.github.io/devtools-protocol/tot/Input/#method-dispatchKeyEvent</span>

<span class="sd">        Keyboard Events:</span>
<span class="sd">            code:</span>
<span class="sd">                https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code</span>
<span class="sd">            key:</span>
<span class="sd">                https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key</span>
<span class="sd">            keyIdentifier(Deprecated):</span>
<span class="sd">                https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyIdentifier</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">string</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">keyboard_send</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">char</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Input.dispatchKeyEvent&#39;</span><span class="p">,</span>
                                   <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_click_element_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                       <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                       <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                                       <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                       <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                       <span class="n">multiplier</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;dispatchMouseEvent on selected element center&quot;</span>
        <span class="n">rect</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_clip</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span>
                                           <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rect</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">multiplier</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">multiplier</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                                   <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                                   <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                   <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_release</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                                            <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                                            <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;click a position&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                               <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                               <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                               <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_release</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                                        <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                                        <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                        <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;Input.dispatchMouseEvent + mousePressed&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Input.dispatchMouseEvent&#39;</span><span class="p">,</span>
                               <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;mousePressed&quot;</span><span class="p">,</span>
                               <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                               <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                               <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                               <span class="n">clickCount</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;Input.dispatchMouseEvent + mouseReleased&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Input.dispatchMouseEvent&#39;</span><span class="p">,</span>
                               <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;mouseReleased&quot;</span><span class="p">,</span>
                               <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                               <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                               <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                               <span class="n">clickCount</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_smooth_steps</span><span class="p">(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">,</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">steps_count</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
        <span class="s2">&quot;smooth move steps&quot;</span>

        <span class="k">def</span> <span class="nf">getPointOnLine</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Returns the (x, y) tuple of the point that has progressed a proportion</span>
<span class="sd">            n along the line defined by the two x, y coordinates.</span>

<span class="sd">            Copied from pyautogui &amp; pytweening module.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">x1</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">((</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">y1</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">getPointOnLine</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">,</span>
                           <span class="n">n</span> <span class="o">/</span> <span class="n">steps_count</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps_count</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="c1"># steps = [(int(a), int(b)) for a, b in steps]</span>
        <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">steps</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">target_x</span><span class="p">,</span>
                         <span class="n">target_y</span><span class="p">,</span>
                         <span class="n">start_x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">start_y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;move mouse smoothly only if duration &gt; 0.&quot;</span>
        <span class="k">if</span> <span class="n">start_x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start_x</span> <span class="o">=</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">target_x</span>
        <span class="k">if</span> <span class="n">start_y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start_y</span> <span class="o">=</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">target_y</span>
        <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
            <span class="n">size</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page_size</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">size</span><span class="p">:</span>
                <span class="n">steps_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">steps_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                    <span class="nb">max</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">target_x</span> <span class="o">-</span> <span class="n">start_x</span><span class="p">),</span>
                         <span class="nb">abs</span><span class="p">(</span><span class="n">target_y</span> <span class="o">-</span> <span class="n">start_y</span><span class="p">)]))</span>
            <span class="n">steps_count</span> <span class="o">=</span> <span class="n">steps_count</span> <span class="ow">or</span> <span class="mi">30</span>
            <span class="n">interval</span> <span class="o">=</span> <span class="n">duration</span> <span class="o">/</span> <span class="n">steps_count</span>
            <span class="k">if</span> <span class="n">interval</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_move_interval</span><span class="p">:</span>
                <span class="n">steps_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">duration</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_move_interval</span><span class="p">)</span>
                <span class="n">interval</span> <span class="o">=</span> <span class="n">duration</span> <span class="o">/</span> <span class="n">steps_count</span>
            <span class="n">steps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_smooth_steps</span><span class="p">(</span><span class="n">target_x</span><span class="p">,</span>
                                          <span class="n">target_y</span><span class="p">,</span>
                                          <span class="n">start_x</span><span class="p">,</span>
                                          <span class="n">start_y</span><span class="p">,</span>
                                          <span class="n">steps_count</span><span class="o">=</span><span class="n">steps_count</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">interval</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">steps</span> <span class="o">=</span> <span class="p">[(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Input.dispatchMouseEvent&#39;</span><span class="p">,</span>
                            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;mouseMoved&quot;</span><span class="p">,</span>
                            <span class="n">x</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
                            <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_move_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">offset_x</span><span class="p">,</span>
                             <span class="n">offset_y</span><span class="p">,</span>
                             <span class="n">start_x</span><span class="p">,</span>
                             <span class="n">start_y</span><span class="p">,</span>
                             <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Move mouse with offset.</span>

<span class="sd">        Example::</span>

<span class="sd">                await tab.mouse_move_rel(x + 15, 3, start_x, start_y, duration=0.3)</span>
<span class="sd">&#39;&#39;&#39;</span>
        <span class="n">target_x</span> <span class="o">=</span> <span class="n">start_x</span> <span class="o">+</span> <span class="n">offset_x</span>
        <span class="n">target_y</span> <span class="o">=</span> <span class="n">start_y</span> <span class="o">+</span> <span class="n">offset_y</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_move</span><span class="p">(</span><span class="n">start_x</span><span class="o">=</span><span class="n">start_x</span><span class="p">,</span>
                              <span class="n">start_y</span><span class="o">=</span><span class="n">start_y</span><span class="p">,</span>
                              <span class="n">target_x</span><span class="o">=</span><span class="n">target_x</span><span class="p">,</span>
                              <span class="n">target_y</span><span class="o">=</span><span class="n">target_y</span><span class="p">,</span>
                              <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
                              <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">mouse_move_rel_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move with offset continuously.</span>

<span class="sd">        Example::</span>

<span class="sd">            walker = await tab.mouse_move_rel_chain(start_x, start_y).move(-20, -5, 0.2).move(5, 1, 0.2)</span>
<span class="sd">            walker = await walker.move(-10, 0, 0.2).move(10, 0, 0.5)</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">OffsetMoveWalker</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">tab</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_drag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">start_x</span><span class="p">,</span>
                         <span class="n">start_y</span><span class="p">,</span>
                         <span class="n">target_x</span><span class="p">,</span>
                         <span class="n">target_y</span><span class="p">,</span>
                         <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                         <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_move</span><span class="p">(</span><span class="n">target_x</span><span class="p">,</span>
                              <span class="n">target_y</span><span class="p">,</span>
                              <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
                              <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_release</span><span class="p">(</span><span class="n">target_x</span><span class="p">,</span>
                                 <span class="n">target_y</span><span class="p">,</span>
                                 <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_drag_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">start_x</span><span class="p">,</span>
                             <span class="n">start_y</span><span class="p">,</span>
                             <span class="n">offset_x</span><span class="p">,</span>
                             <span class="n">offset_y</span><span class="p">,</span>
                             <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                             <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;drag mouse relatively&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_drag</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span>
                                     <span class="n">start_y</span><span class="p">,</span>
                                     <span class="n">start_x</span> <span class="o">+</span> <span class="n">offset_x</span><span class="p">,</span>
                                     <span class="n">start_y</span> <span class="o">+</span> <span class="n">offset_y</span><span class="p">,</span>
                                     <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                     <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
                                     <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">mouse_drag_rel_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">start_x</span><span class="p">,</span>
                             <span class="n">start_y</span><span class="p">,</span>
                             <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Drag with offset continuously.</span>

<span class="sd">Demo::</span>

<span class="sd">        await tab.set_url(&#39;https://draw.yunser.com/&#39;)</span>
<span class="sd">        walker = await tab.mouse_drag_rel_chain(320, 145).move(50, 0, 0.2).move(</span>
<span class="sd">            0, 50, 0.2).move(-50, 0, 0.2).move(0, -50, 0.2)</span>
<span class="sd">        await walker.move(50 * 1.414, 50 * 1.414, 0.2)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">OffsetDragWalker</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span>
                                <span class="n">start_y</span><span class="p">,</span>
                                <span class="n">tab</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                                <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">gc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;[HeapProfiler.collectGarbage]&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;HeapProfiler.collectGarbage&#39;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">alert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;run alert(`{text}`) in console, the `text` should be escaped before passing.</span>
<span class="sd">        Block until user click [OK] or timeout.</span>
<span class="sd">        Returned as:</span>
<span class="sd">            &quot;undefined&quot;: [OK] clicked.</span>
<span class="sd">            None: timeout.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="s1">&#39;alert(`</span><span class="si">%s</span><span class="s1">`)&#39;</span> <span class="o">%</span> <span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">confirm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;run confirm(`{text}`) in console, the `text` should be escaped before passing.</span>
<span class="sd">        Block until user click [OK] or click [Cancel] or timeout.</span>
<span class="sd">        Returned as:</span>
<span class="sd">            True: [OK] clicked.</span>
<span class="sd">            False: [Cancel] clicked.</span>
<span class="sd">            None: timeout.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="s1">&#39;confirm(`</span><span class="si">%s</span><span class="s1">`)&#39;</span> <span class="o">%</span> <span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;run prompt(`{text}`, `value`) in console, the `text` and `value` should be escaped before passing.</span>
<span class="sd">        Block until user click [OK] or click [Cancel] or timeout.</span>
<span class="sd">        Returned as:</span>
<span class="sd">            new value: [OK] clicked.</span>
<span class="sd">            None: [Cancel] clicked.</span>
<span class="sd">            value: timeout.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="s1">&#39;prompt(`</span><span class="si">%s</span><span class="s1">`, `</span><span class="si">%s</span><span class="s1">`)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">_value</span><span class="p">),</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">repl</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">f_globals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">f_locals</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Give a simple way to debug your code with ichrome.&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">traceback</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">readline</span> <span class="k">as</span> <span class="nn">_</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="kn">import</span> <span class="nn">ast</span>
        <span class="kn">import</span> <span class="nn">types</span>
        <span class="kn">import</span> <span class="nn">warnings</span>
        <span class="kn">from</span> <span class="nn">code</span> <span class="kn">import</span> <span class="n">CommandCompiler</span>
        <span class="n">f_globals</span> <span class="o">=</span> <span class="n">f_globals</span> <span class="ow">or</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">f_globals</span>
        <span class="n">f_locals</span> <span class="o">=</span> <span class="n">f_locals</span> <span class="ow">or</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">f_locals</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">{</span>
                <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="s1">&#39;__package__&#39;</span><span class="p">,</span> <span class="s1">&#39;__loader__&#39;</span><span class="p">,</span> <span class="s1">&#39;__spec__&#39;</span><span class="p">,</span>
                <span class="s1">&#39;__builtins__&#39;</span><span class="p">,</span> <span class="s1">&#39;__file__&#39;</span>
        <span class="p">}:</span>
            <span class="n">f_locals</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">f_globals</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">Here is ichrome repl demo version, the features is not as good as python pbd, but this is very easy to use.</span>

<span class="s1">Shortcuts:</span>
<span class="s1">    -h: show more help.</span>
<span class="s1">    -q: quit the repl mode.</span>
<span class="s1">    CTRL-C: clear current line.</span>

<span class="s1">Demo source code:</span>

<span class="s1">```python</span>
<span class="s1">from ichrome import AsyncChromeDaemon, repl</span>
<span class="s1">import asyncio</span>


<span class="s1">async def main():</span>
<span class="s1">    async with AsyncChromeDaemon() as cd:</span>
<span class="s1">        async with cd.connect_tab() as tab:</span>
<span class="s1">            await tab.repl()</span>


<span class="s1">if __name__ == &quot;__main__&quot;:</span>
<span class="s1">    asyncio.run(main())</span>
<span class="s1">```</span>
<span class="s1">So debug your code with ichrome is only `await tab.repl()`.</span>

<span class="s1">For example:</span>

<span class="s1">&gt;&gt;&gt; await tab.goto(&#39;https://github.com/ClericPy&#39;)</span>
<span class="s1">True</span>
<span class="s1">&gt;&gt;&gt; title = await tab.title</span>
<span class="s1">&gt;&gt;&gt; title</span>
<span class="s1">&#39;ClericPy (ClericPy) · GitHub&#39;</span>
<span class="s1">&gt;&gt;&gt; await tab.click(&#39;.pinned-item-list-item-content [href=&quot;/ClericPy/ichrome&quot;]&#39;)</span>
<span class="s1">Tag(a)</span>
<span class="s1">&gt;&gt;&gt; await tab.wait_loading(2)</span>
<span class="s1">True</span>
<span class="s1">&gt;&gt;&gt; await tab.wait_loading(2)</span>
<span class="s1">False</span>
<span class="s1">&gt;&gt;&gt; await tab.js(&#39;document.body.innerHTML=&quot;Updated&quot;&#39;)</span>
<span class="s1">{&#39;type&#39;: &#39;string&#39;, &#39;value&#39;: &#39;Updated&#39;}</span>
<span class="s1">&gt;&gt;&gt; await tab.history_back()</span>
<span class="s1">True</span>
<span class="s1">&gt;&gt;&gt; await tab.set_html(&#39;hello world&#39;)</span>
<span class="s1">{&#39;id&#39;: 21, &#39;result&#39;: </span><span class="si">{}</span><span class="s1">}</span>
<span class="s1">&gt;&gt;&gt; await tab.set_ua(&#39;no UA&#39;)</span>
<span class="s1">{&#39;id&#39;: 22, &#39;result&#39;: </span><span class="si">{}</span><span class="s1">}</span>
<span class="s1">&gt;&gt;&gt; await tab.goto(&#39;http://httpbin.org/user-agent&#39;)</span>
<span class="s1">True</span>
<span class="s1">&gt;&gt;&gt; await tab.html</span>
<span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;pre style=&quot;word-wrap: break-word; white-space: pre-wrap;&quot;&gt;{\n  &quot;user-agent&quot;: &quot;no UA&quot;\n}\n&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>
<span class="s1">&#39;&#39;&#39;</span>

        <span class="n">_compile</span> <span class="o">=</span> <span class="n">CommandCompiler</span><span class="p">()</span>
        <span class="n">_compile</span><span class="o">.</span><span class="n">compiler</span><span class="o">.</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">ast</span><span class="o">.</span><span class="n">PyCF_ALLOW_TOP_LEVEL_AWAIT</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span>
                                <span class="n">message</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^coroutine .* was never awaited$&#39;</span><span class="p">,</span>
                                <span class="n">category</span><span class="o">=</span><span class="ne">RuntimeWarning</span><span class="p">)</span>

        <span class="k">async</span> <span class="k">def</span> <span class="nf">run_code</span><span class="p">():</span>
            <span class="n">buffer</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">more</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">while</span> <span class="n">more</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">more</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;... &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt;&gt;&gt; &#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">buffer</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;-q&#39;</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">()</span>
                    <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;-h&#39;</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
                        <span class="k">break</span>
                <span class="n">buffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">code</span> <span class="o">=</span> <span class="n">_compile</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span> <span class="s1">&#39;&lt;console&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;single&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">code</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">more</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">func</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">FunctionType</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">f_locals</span><span class="p">)</span>
                        <span class="n">maybe_coro</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isawaitable</span><span class="p">(</span><span class="n">maybe_coro</span><span class="p">):</span>
                            <span class="k">await</span> <span class="n">maybe_coro</span>
                            <span class="k">return</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">code</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="ne">SyntaxError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
                    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                    <span class="k">raise</span>

        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">run_code</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">()</span>
                <span class="k">continue</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">EOFError</span><span class="p">,</span> <span class="ne">SystemExit</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_file_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">filepaths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]],</span>
                             <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;input[type=&quot;file&quot;]&#39;</span><span class="p">,</span>
                             <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;set file type input nodes with given filepaths.</span>
<span class="sd">        1. path of filepaths will be reset as absolute posix path.</span>
<span class="sd">        2. all the nodes which matched given cssselector will be set together for using DOM.querySelectorAll.</span>
<span class="sd">        3. nodes in iframe tags need a new root_id but not default gotten from DOM.getDocument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s1">&#39;filepaths is type of str will be reset to [filepaths]&#39;</span><span class="p">)</span>
            <span class="n">filepaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">filepaths</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;DOM.getDocument&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">root_id</span><span class="p">:</span>
            <span class="n">root_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;result.root.nodeId&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">root_id</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;set_file_input failed for receive data without root nodeId: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;DOM.querySelectorAll&#39;</span><span class="p">,</span>
                               <span class="n">nodeId</span><span class="o">=</span><span class="n">root_id</span><span class="p">,</span>
                               <span class="n">selector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="n">nodeIds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;result.nodeIds&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nodeIds</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;set_file_input failed for receive data without target nodeId: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="n">filepaths</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">Path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span> <span class="k">for</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="n">filepaths</span>
        <span class="p">]</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">nodeId</span> <span class="ow">in</span> <span class="n">nodeIds</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;DOM.setFileInputFiles&#39;</span><span class="p">,</span>
                                   <span class="n">files</span><span class="o">=</span><span class="n">filepaths</span><span class="p">,</span>
                                   <span class="n">nodeId</span><span class="o">=</span><span class="n">nodeId</span><span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">set_flatten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;use the flatten mode connection&quot;</span>
        <span class="c1"># /devtools/browser/</span>
        <span class="k">if</span> <span class="s1">&#39;/devtools/browser/&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">webSocketDebuggerUrl</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ChromeRuntimeError</span><span class="p">(</span><span class="s1">&#39;browser can not be set flatten mode&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;connected&#39;</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_listener</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">_listener</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buffers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">_buffers</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">ws</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tab_id</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__hash__</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="fm">__hash__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Tab(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="si">!r}</span><span class="s2">): </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_id</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Tab(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_id</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span> <span class="nf">ensure_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">):</span>
        <span class="s2">&quot;replace the timeout variable to real value&quot;</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="n">NotSet</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>
        <span class="k">elif</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_WAIT_TIMEOUT</span> <span class="ow">or</span> <span class="n">INF</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">timeout</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_recv_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_recv_callback</span>

    <span class="nd">@default_recv_callback</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">default_recv_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="s2">&quot;set the default_recv_callback or default_recv_callback list&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_default_recv_callback</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_default_recv_callback</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_default_recv_callback</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span>
                <span class="s1">&#39;default_recv_callback should be list or callable, and you can use tab.default_recv_callback.append(cb) to add new callback&#39;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_callback_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_recv_callback</span><span class="p">)</span>

    <span class="nd">@default_recv_callback</span><span class="o">.</span><span class="n">deleter</span>
    <span class="k">def</span> <span class="nf">default_recv_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_recv_callback</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ensure_callback_type</span><span class="p">(</span><span class="n">_default_recv_callback</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensure callback function has correct args</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">must_args</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span><span class="p">,</span> <span class="s1">&#39;data_dict&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">_default_recv_callback</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">ChromeTypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;callback function (</span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s2">&quot;__name__&quot;</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span><span class="si">}</span><span class="s1">) should be callable&#39;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isbuiltin</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
                    <span class="n">func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_varnames</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ChromeTypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;callback function (</span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s2">&quot;__name__&quot;</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span><span class="si">}</span><span class="s1">) should handle two args for </span><span class="si">{</span><span class="n">must_args</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_WSConnection</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;`async with tab() as tab:` or just `async with tab():` and reuse `tab` variable.&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">msg_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">msg_id</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_message_id</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">:</span>
            <span class="n">connected</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">connected</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">closed</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="kc">True</span><span class="p">:</span> <span class="s1">&#39;connected&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">:</span> <span class="s1">&#39;disconnected&#39;</span><span class="p">}[</span><span class="n">connected</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_WSConnection</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;`async with tab.connect() as tab:`&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws_connection</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">browser</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;AsyncTab&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="o">.</span><span class="n">browser</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_recv_daemon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Daemon Coroutine for listening the ws.recv.</span>

<span class="sd">        event examples:</span>
<span class="sd">        {&quot;id&quot;:1,&quot;result&quot;:{}}</span>
<span class="sd">        {&quot;id&quot;:3,&quot;result&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;value&quot;:&quot;http://p.3.cn/&quot;}}}</span>
<span class="sd">        {&quot;id&quot;:2,&quot;result&quot;:{&quot;frameId&quot;:&quot;7F34509F1831E6F29351784861615D1C&quot;,&quot;loaderId&quot;:&quot;F4BD3CBE619185B514F0F42B0CBCCFA1&quot;}}</span>
<span class="sd">        {&quot;method&quot;:&quot;Page.frameStartedLoading&quot;,&quot;params&quot;:{&quot;frameId&quot;:&quot;7F34509F1831E6F29351784861615D1C&quot;}}</span>
<span class="sd">        {&quot;method&quot;:&quot;Page.frameNavigated&quot;,&quot;params&quot;:{&quot;frame&quot;:{&quot;id&quot;:&quot;7F34509F1831E6F29351784861615D1C&quot;,&quot;loaderId&quot;:&quot;F4BD3CBE619185B514F0F42B0CBCCFA1&quot;,&quot;url&quot;:&quot;http://p.3.cn/&quot;,&quot;securityOrigin&quot;:&quot;http://p.3.cn&quot;,&quot;mimeType&quot;:&quot;application/json&quot;}}}</span>
<span class="sd">        {&quot;method&quot;:&quot;Page.loadEventFired&quot;,&quot;params&quot;:{&quot;timestamp&quot;:120277.621681}}</span>
<span class="sd">        {&quot;method&quot;:&quot;Page.frameStoppedLoading&quot;,&quot;params&quot;:{&quot;frameId&quot;:&quot;7F34509F1831E6F29351784861615D1C&quot;}}</span>
<span class="sd">        {&quot;method&quot;:&quot;Page.domContentEventFired&quot;,&quot;params&quot;:{&quot;timestamp&quot;:120277.623606}}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_all_recv</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[recv] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">WSMsgType</span><span class="o">.</span><span class="n">CLOSED</span><span class="p">,</span> <span class="n">WSMsgType</span><span class="o">.</span><span class="n">ERROR</span><span class="p">):</span>
                <span class="c1"># Message size xxxx exceeds limit 4194304: reset the max_msg_size(default=20*1024*1024) in Tab.ws_kwargs</span>
                <span class="n">err_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Receive the </span><span class="si">{</span><span class="n">msg</span><span class="o">.</span><span class="n">type</span><span class="si">!r}</span><span class="s1"> message which break the recv daemon: &quot;</span><span class="si">{</span><span class="n">msg</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s1">&quot;.&#39;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws_connection</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ChromeRuntimeError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">WSMsgType</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span>
                <span class="c1"># ignore</span>
                <span class="k">continue</span>
            <span class="n">data_str</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">data</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">data_str</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">data_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data_str</span><span class="p">)</span>
                <span class="c1"># ignore non-dict type msg.data</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="k">continue</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;[json] data_str can not be json.loads: </span><span class="si">{</span><span class="n">data_str</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="s1">&#39;sessionId&#39;</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">:</span>
                <span class="n">_tab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sessions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;sessionId&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">_tab</span><span class="p">:</span>
                    <span class="n">default_recv_callback</span> <span class="o">=</span> <span class="n">_tab</span><span class="o">.</span><span class="n">default_recv_callback</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">default_recv_callback</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">default_recv_callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_recv_callback</span>
            <span class="k">for</span> <span class="n">callback</span> <span class="ow">in</span> <span class="n">default_recv_callback</span><span class="p">:</span>
                <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span>
                    <span class="n">ensure_awaitable</span><span class="p">(</span><span class="n">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">)))</span>
            <span class="n">buffer</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Queue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">buffer</span><span class="p">:</span>
                <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="n">buffer</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">data_dict</span><span class="p">))</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listener</span><span class="o">.</span><span class="n">pop_future</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">f</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">_state</span> <span class="o">==</span> <span class="n">_PENDING</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[break] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> _recv_daemon loop break.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recv_daemon_break_callback</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_recv_daemon_break_callback</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_recv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_dict</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span>
                    <span class="n">callback_function</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_enable</span><span class="p">(</span><span class="n">event_dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listener</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">event_dict</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_listener</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">event_dict</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[timeout] </span><span class="si">{</span><span class="n">event_dict</span><span class="si">}</span><span class="s1"> [recv] timeout(</span><span class="si">{</span><span class="n">timeout</span><span class="si">}</span><span class="s1">).&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_listener</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">event_dict</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[error] </span><span class="si">{</span><span class="n">event_dict</span><span class="si">}</span><span class="s1"> [recv] </span><span class="si">{</span><span class="n">e</span><span class="si">!r}</span><span class="s1">.&#39;</span><span class="p">)</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">error</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span>
                    <span class="n">callback_function</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">now</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">auto_enable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_or_method</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;auto enable the domain&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_or_method</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">method</span> <span class="o">=</span> <span class="n">event_or_method</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">method</span> <span class="o">=</span> <span class="n">event_or_method</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_url</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_ensure_request_id</span><span class="p">(</span><span class="n">request_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">request_id</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">AsyncTab</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="s1">&#39;params.requestId&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ChromeTypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;request type should be None or dict or str, but `</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span><span class="si">}</span><span class="s2">` was given.&quot;</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;name or expression. jsonify will transport the data by JSON, such as the array.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">jsonify</span><span class="o">=</span><span class="n">jsonify</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                           <span class="n">jsonify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;variable or expression. jsonify will transport the data by JSON, such as the array.&quot;&quot;&quot;</span>
        <span class="c1"># using JSON to keep value type</span>
        <span class="k">if</span> <span class="n">jsonify</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;JSON.stringify(</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                   <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">name</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                 <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">browser_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="s2">&quot;[Browser.getVersion]&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Browser.getVersion&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_geolocation_override</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                       <span class="n">latitude</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                       <span class="n">longitude</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                       <span class="n">accuracy</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;[set_geolocation_override] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> latitude =&gt; </span><span class="si">{</span><span class="n">latitude</span><span class="si">}</span><span class="s1">, longitude =&gt; </span><span class="si">{</span><span class="n">longitude</span><span class="si">}</span><span class="s1">, accuracy =&gt; </span><span class="si">{</span><span class="n">accuracy</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Emulation.setGeolocationOverride&#39;</span><span class="p">,</span>
                               <span class="n">latitude</span><span class="o">=</span><span class="n">latitude</span><span class="p">,</span>
                               <span class="n">longitude</span><span class="o">=</span><span class="n">longitude</span><span class="p">,</span>
                               <span class="n">accuracy</span><span class="o">=</span><span class="n">accuracy</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">scrollIntoView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                             <span class="n">action</span><span class="o">=</span><span class="s1">&#39;scrollIntoView()&#39;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tag</span><span class="p">,</span> <span class="n">TagNotFound</span><span class="p">]:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                        <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
                                        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.__call__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__call__</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p><code>async with tab() as tab:</code> or just <code>async with tab():</code> and reuse <code>tab</code> variable.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2479</span>
<span class="normal">2480</span>
<span class="normal">2481</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_WSConnection</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;`async with tab() as tab:` or just `async with tab():` and reuse `tab` variable.&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">tab_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">webSocketDebuggerUrl</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">devtoolsFrontendUrl</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">chrome</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">ws_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_recv_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_recv_daemon_break_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">flatten</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Init AsyncTab instance.</p>
<p>original Tab JSON::</p>
<pre><code>[{
    "description": "",
    "devtoolsFrontendUrl": "/devtools/inspector.html?ws=localhost:9222/devtools/page/8ED4BDD54713572BCE026393A0137214",
    "id": "8ED4BDD54713572BCE026393A0137214",
    "title": "about:blank",
    "type": "page",
    "url": "http://localhost:9222/json",
    "webSocketDebuggerUrl": "ws://localhost:9222/devtools/page/8ED4BDD54713572BCE026393A0137214"
}]
</code></pre>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>tab_id</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>defaults to kwargs.pop('id').</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>title</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>tab title. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>url</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>tab url, binded to self._url. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>type</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>tab type, often be <code>page</code> type. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>tab description. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>webSocketDebuggerUrl</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>ws URL to connect. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>devtoolsFrontendUrl</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>devtools UI URL. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>json</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>raw Tab JSON. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>chrome</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="ichrome.async_utils.AsyncChrome" href="../AsyncChrome/#ichrome.AsyncChrome">AsyncChrome</a></code>
          </td>
          <td><p>the AsyncChrome object which the Tab belongs to. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>timeout</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td><p>default recv timeout, defaults to AsyncTab._DEFAULT_RECV_TIMEOUT. Defaults to NotSet.</p></td>
          <td>
                <code>NotSet</code>
          </td>
        </tr>
        <tr>
          <td><code>ws_kwargs</code></td>
          <td>
                <code>dict</code>
          </td>
          <td><p>kwargs for ws connection. Defaults to AsyncTab._DEFAULT_WS_KWARGS.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>default_recv_callback</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td><p>called for each data received, sync/async function only accept 1 arg of data comes from ws recv. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>_recv_daemon_break_callback</code></td>
          <td>
                <code><span title="typing.Callable">Callable</span></code>
          </td>
          <td><p>like the tab_close_callback. sync/async function only accept 1 arg of self while _recv_daemon break. defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>flatten</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>use flatten mode with sessionId. Defaults to AsyncTab._DEFAULT_FLATTEN.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
             <span class="n">tab_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">webSocketDebuggerUrl</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">devtoolsFrontendUrl</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">json</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">chrome</span><span class="p">:</span> <span class="s1">&#39;AsyncChrome&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
             <span class="n">ws_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">default_recv_callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">_recv_daemon_break_callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Init AsyncTab instance.</span>

<span class="sd">    original Tab JSON::</span>

<span class="sd">        [{</span>
<span class="sd">            &quot;description&quot;: &quot;&quot;,</span>
<span class="sd">            &quot;devtoolsFrontendUrl&quot;: &quot;/devtools/inspector.html?ws=localhost:9222/devtools/page/8ED4BDD54713572BCE026393A0137214&quot;,</span>
<span class="sd">            &quot;id&quot;: &quot;8ED4BDD54713572BCE026393A0137214&quot;,</span>
<span class="sd">            &quot;title&quot;: &quot;about:blank&quot;,</span>
<span class="sd">            &quot;type&quot;: &quot;page&quot;,</span>
<span class="sd">            &quot;url&quot;: &quot;http://localhost:9222/json&quot;,</span>
<span class="sd">            &quot;webSocketDebuggerUrl&quot;: &quot;ws://localhost:9222/devtools/page/8ED4BDD54713572BCE026393A0137214&quot;</span>
<span class="sd">        }]</span>

<span class="sd">    Args:</span>
<span class="sd">        tab_id (str, optional): defaults to kwargs.pop(&#39;id&#39;).</span>
<span class="sd">        title (str, optional): tab title. Defaults to None.</span>
<span class="sd">        url (str, optional): tab url, binded to self._url. Defaults to None.</span>
<span class="sd">        type (str, optional): tab type, often be `page` type. Defaults to None.</span>
<span class="sd">        description (str, optional): tab description. Defaults to None.</span>
<span class="sd">        webSocketDebuggerUrl (str, optional): ws URL to connect. Defaults to None.</span>
<span class="sd">        devtoolsFrontendUrl (str, optional): devtools UI URL. Defaults to None.</span>
<span class="sd">        json (str, optional): raw Tab JSON. Defaults to None.</span>
<span class="sd">        chrome (AsyncChrome, optional): the AsyncChrome object which the Tab belongs to. Defaults to None.</span>
<span class="sd">        timeout (_type_, optional): default recv timeout, defaults to AsyncTab._DEFAULT_RECV_TIMEOUT. Defaults to NotSet.</span>
<span class="sd">        ws_kwargs (dict, optional): kwargs for ws connection. Defaults to AsyncTab._DEFAULT_WS_KWARGS.</span>
<span class="sd">        default_recv_callback (Callable, optional): called for each data received, sync/async function only accept 1 arg of data comes from ws recv. Defaults to None.</span>
<span class="sd">        _recv_daemon_break_callback (Callable, optional): like the tab_close_callback. sync/async function only accept 1 arg of self while _recv_daemon break. defaults to None.</span>
<span class="sd">        flatten (bool, optional): use flatten mode with sessionId. Defaults to AsyncTab._DEFAULT_FLATTEN.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tab_id</span> <span class="o">=</span> <span class="n">tab_id</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tab_id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;tab_id should not be null, </span><span class="si">{</span><span class="n">tab_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tab_id</span> <span class="o">=</span> <span class="n">tab_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">devtoolsFrontendUrl</span> <span class="o">=</span> <span class="n">devtoolsFrontendUrl</span>
    <span class="k">if</span> <span class="n">tab_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">webSocketDebuggerUrl</span><span class="p">:</span>
        <span class="n">_chrome_port_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:</span><span class="si">{</span><span class="n">chrome</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">chrome</span><span class="o">.</span><span class="n">port</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
        <span class="n">webSocketDebuggerUrl</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;ws://</span><span class="si">{</span><span class="n">chrome</span><span class="o">.</span><span class="n">host</span><span class="si">}{</span><span class="n">_chrome_port_str</span><span class="si">}</span><span class="s1">/devtools/page/</span><span class="si">{</span><span class="n">tab_id</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">webSocketDebuggerUrl</span> <span class="o">=</span> <span class="n">webSocketDebuggerUrl</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">json</span> <span class="o">=</span> <span class="n">json</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span> <span class="o">=</span> <span class="n">chrome</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_RECV_TIMEOUT</span> <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="n">NotSet</span> <span class="k">else</span> <span class="n">timeout</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ws_kwargs</span> <span class="o">=</span> <span class="n">ws_kwargs</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_WS_KWARGS</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ws_kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;timeout&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_CONNECT_TIMEOUT</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ws_connection</span><span class="p">:</span> <span class="n">_WSConnection</span> <span class="o">=</span> <span class="n">_WSConnection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="o">.</span><span class="n">req</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">req</span> <span class="o">=</span> <span class="n">Requests</span><span class="p">()</span>
    <span class="c1"># using default_recv_callback.setter, default_recv_callback can be list or function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_recv_callback</span> <span class="o">=</span> <span class="n">default_recv_callback</span>
    <span class="c1"># alias of methods</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mouse_click_tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_click_element_rect</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_cookies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clear_browser_cookies</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inject_js</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inject_js_url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_bounding_client_rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_clip</span>
    <span class="c1"># internal variables</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_created_time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_message_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_recv_daemon_break_callback</span> <span class="o">=</span> <span class="n">_recv_daemon_break_callback</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_RECV_DAEMON_BREAK_CALLBACK</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_listener</span> <span class="o">=</span> <span class="n">Listener</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffers</span><span class="p">:</span> <span class="n">WeakValueDictionary</span> <span class="o">=</span> <span class="n">WeakValueDictionary</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_default_recv_callback</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_sessions</span><span class="p">:</span> <span class="n">WeakValueDictionary</span> <span class="o">=</span> <span class="n">WeakValueDictionary</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># sessions for flatten mode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_FLATTEN</span> <span class="k">if</span> <span class="n">flatten</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">flatten</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_flatten</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.activate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">activate</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.bringToFront], activate tab with cdp websocket</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">activate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;[Page.bringToFront], activate tab with cdp websocket&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.bringToFront&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.activate_tab" class="doc doc-heading">
<code class="highlight language-python"><span class="n">activate_tab</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>activate tab with chrome http endpoint</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">activate_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;activate tab with chrome http endpoint&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="o">.</span><span class="n">activate_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.add_js_onload" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_js_onload</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.addScriptToEvaluateOnNewDocument], return the identifier [str].</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">add_js_onload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;[Page.addScriptToEvaluateOnNewDocument], return the identifier [str].&#39;&#39;&#39;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.addScriptToEvaluateOnNewDocument&#39;</span><span class="p">,</span>
                           <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
                           <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.identifier&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.alert" class="doc doc-heading">
<code class="highlight language-python"><span class="n">alert</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>run alert(<code>{text}</code>) in console, the <code>text</code> should be escaped before passing.
Block until user click [OK] or timeout.</p>

<details class="returned-as">
  <summary>Returned as</summary>
  <p>"undefined": [OK] clicked.
None: timeout.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2205</span>
<span class="normal">2206</span>
<span class="normal">2207</span>
<span class="normal">2208</span>
<span class="normal">2209</span>
<span class="normal">2210</span>
<span class="normal">2211</span>
<span class="normal">2212</span>
<span class="normal">2213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">alert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;run alert(`{text}`) in console, the `text` should be escaped before passing.</span>
<span class="sd">    Block until user click [OK] or timeout.</span>
<span class="sd">    Returned as:</span>
<span class="sd">        &quot;undefined&quot;: [OK] clicked.</span>
<span class="sd">        None: timeout.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="s1">&#39;alert(`</span><span class="si">%s</span><span class="s1">`)&#39;</span> <span class="o">%</span> <span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.auto_enable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">auto_enable</span><span class="p">(</span><span class="n">event_or_method</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>auto enable the domain</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2595</span>
<span class="normal">2596</span>
<span class="normal">2597</span>
<span class="normal">2598</span>
<span class="normal">2599</span>
<span class="normal">2600</span>
<span class="normal">2601</span>
<span class="normal">2602</span>
<span class="normal">2603</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">auto_enable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_or_method</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;auto enable the domain&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_or_method</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">event_or_method</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">event_or_method</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.browser_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">browser_version</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Browser.getVersion]</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2647</span>
<span class="normal">2648</span>
<span class="normal">2649</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">browser_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;[Browser.getVersion]&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Browser.getVersion&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.clear_browser_cache" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear_browser_cache</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Network.clearBrowserCache]</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">clear_browser_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;[Network.clearBrowserCache]&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.clearBrowserCache&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.clear_browser_cookies" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear_browser_cookies</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Network.clearBrowserCookies]</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">clear_browser_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;[Network.clearBrowserCookies]&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.clearBrowserCookies&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.click" class="doc doc-heading">
<code class="highlight language-python"><span class="n">click</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;click()&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Click some tag with javascript
await tab.click("#sc_hdu&gt;li&gt;a") # click first node's link.
await tab.click("#sc_hdu&gt;li&gt;a", index=3, action="removeAttribute('href')") # remove href of the a tag.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">action</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;click()&quot;</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tag</span><span class="p">],</span> <span class="n">Tag</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Click some tag with javascript</span>
<span class="sd">    await tab.click(&quot;#sc_hdu&gt;li&gt;a&quot;) # click first node&#39;s link.</span>
<span class="sd">    await tab.click(&quot;#sc_hdu&gt;li&gt;a&quot;, index=3, action=&quot;removeAttribute(&#39;href&#39;)&quot;) # remove href of the a tag.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span>
                                       <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
                                       <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.close" class="doc doc-heading">
<code class="highlight language-python"><span class="n">close</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.close], close tab with cdp websocket. will lose ws, so timeout default to 0.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;[Page.close], close tab with cdp websocket. will lose ws, so timeout default to 0.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.close&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ChromeRuntimeError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;close tab failed for </span><span class="si">{</span><span class="n">error</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.close_tab" class="doc doc-heading">
<code class="highlight language-python"><span class="n">close_tab</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>close tab with chrome http endpoint</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">close_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;close tab with chrome http endpoint&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="o">.</span><span class="n">close_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.confirm" class="doc doc-heading">
<code class="highlight language-python"><span class="n">confirm</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>run confirm(<code>{text}</code>) in console, the <code>text</code> should be escaped before passing.
Block until user click [OK] or click [Cancel] or timeout.</p>

<details class="returned-as">
  <summary>Returned as</summary>
  <p>True: [OK] clicked.
False: [Cancel] clicked.
None: timeout.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2215</span>
<span class="normal">2216</span>
<span class="normal">2217</span>
<span class="normal">2218</span>
<span class="normal">2219</span>
<span class="normal">2220</span>
<span class="normal">2221</span>
<span class="normal">2222</span>
<span class="normal">2223</span>
<span class="normal">2224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">confirm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;run confirm(`{text}`) in console, the `text` should be escaped before passing.</span>
<span class="sd">    Block until user click [OK] or click [Cancel] or timeout.</span>
<span class="sd">    Returned as:</span>
<span class="sd">        True: [OK] clicked.</span>
<span class="sd">        False: [Cancel] clicked.</span>
<span class="sd">        None: timeout.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="s1">&#39;confirm(`</span><span class="si">%s</span><span class="s1">`)&#39;</span> <span class="o">%</span> <span class="n">text</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.connect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connect</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p><code>async with tab.connect() as tab:</code></p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2499</span>
<span class="normal">2500</span>
<span class="normal">2501</span>
<span class="normal">2502</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_WSConnection</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;`async with tab.connect() as tab:`&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws_connection</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.contains" class="doc doc-heading">
<code class="highlight language-python"><span class="n">contains</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">cssselector</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>alias for Tab.includes</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">text</span><span class="p">,</span>
                   <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                   <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                   <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;alias for Tab.includes&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">includes</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                               <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                               <span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.crash" class="doc doc-heading">
<code class="highlight language-python"><span class="n">crash</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.crash], will lose ws, so timeout default to 0.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">crash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;[Page.crash], will lose ws, so timeout default to 0.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.crash&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.delete_cookies" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_cookies</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Network.deleteCookies], deleteCookies by name, with url / domain / path.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">domain</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;[Network.deleteCookies], deleteCookies by name, with url / domain / path.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">((</span><span class="n">url</span><span class="p">,</span> <span class="n">domain</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span><span class="s1">&#39;URL and domain should not be both null.&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.deleteCookies&quot;</span><span class="p">,</span>
                           <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                           <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                           <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span>
                           <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.disable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>domain: Network / Page and so on, will send <code>domain.disable</code>. Automatically check for duplicated sendings if not force.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;domain: Network / Page and so on, will send `domain.disable`. Automatically check for duplicated sendings if not force.&#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
        <span class="c1"># no need for duplicated enable.</span>
        <span class="k">if</span> <span class="n">domain</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domains_can_be_enabled</span> <span class="ow">or</span> <span class="n">domain</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s1">.disable&#39;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                             <span class="n">auto_enable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.enable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">_kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>domain: Network or Page and so on, will send <code>{domain}.enable</code>. Automatically check for duplicated sendings if not force.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">_kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;domain: Network or Page and so on, will send `{domain}.enable`. Automatically check for duplicated sendings if not force.&#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
        <span class="c1"># no need for duplicated enable.</span>
        <span class="k">if</span> <span class="n">domain</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domains_can_be_enabled</span> <span class="ow">or</span> <span class="n">domain</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># enable timeout should not be 0</span>
    <span class="k">if</span> <span class="n">timeout</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s1">.enable&#39;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                             <span class="n">auto_enable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">kwargs</span><span class="o">=</span><span class="n">_kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_domains</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.ensure_callback_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ensure_callback_type</span><span class="p">(</span><span class="n">_default_recv_callback</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Ensure callback function has correct args</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2462</span>
<span class="normal">2463</span>
<span class="normal">2464</span>
<span class="normal">2465</span>
<span class="normal">2466</span>
<span class="normal">2467</span>
<span class="normal">2468</span>
<span class="normal">2469</span>
<span class="normal">2470</span>
<span class="normal">2471</span>
<span class="normal">2472</span>
<span class="normal">2473</span>
<span class="normal">2474</span>
<span class="normal">2475</span>
<span class="normal">2476</span>
<span class="normal">2477</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">ensure_callback_type</span><span class="p">(</span><span class="n">_default_recv_callback</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensure callback function has correct args</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">must_args</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;tab&#39;</span><span class="p">,</span> <span class="s1">&#39;data_dict&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">_default_recv_callback</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ChromeTypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;callback function (</span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s2">&quot;__name__&quot;</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span><span class="si">}</span><span class="s1">) should be callable&#39;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isbuiltin</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
                <span class="n">func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_varnames</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ChromeTypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;callback function (</span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s2">&quot;__name__&quot;</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span><span class="si">}</span><span class="s1">) should handle two args for </span><span class="si">{</span><span class="n">must_args</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.ensure_timeout" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>replace the timeout variable to real value</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2430</span>
<span class="normal">2431</span>
<span class="normal">2432</span>
<span class="normal">2433</span>
<span class="normal">2434</span>
<span class="normal">2435</span>
<span class="normal">2436</span>
<span class="normal">2437</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ensure_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">):</span>
    <span class="s2">&quot;replace the timeout variable to real value&quot;</span>
    <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="n">NotSet</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>
    <span class="k">elif</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_WAIT_TIMEOUT</span> <span class="ow">or</span> <span class="n">INF</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">timeout</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.findall" class="doc doc-heading">
<code class="highlight language-python"><span class="n">findall</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">cssselector</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Similar to python re.findall.</p>
<pre><code>    Args:
        regex (str): raw regex string to be set in /%s/g.
        cssselector (str, optional): which element.outerHTML to be matched, defaults to 'html'.
        attribute (str, optional): attribute of the selected element, defaults to 'outerHTML'
        flags (str, optional): regex flags, defaults to 'g'.
        timeout (float): defaults to NotSet.
</code></pre>
<p>Demo::</p>
<pre><code># no group / (?:) / (?&lt;=) / (?!)
print(await tab.findall('&lt;title&gt;.*?&lt;/title&gt;'))
# ['&lt;title&gt;123456789&lt;/title&gt;']

# only 1 group
print(await tab.findall('&lt;title&gt;(.*?)&lt;/title&gt;'))
# ['123456789']

# multi-groups
print(await tab.findall('&lt;title&gt;(1)(2).*?&lt;/title&gt;'))
# [['1', '2']]
</code></pre>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">findall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">regex</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                      <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                      <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                      <span class="n">flags</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span>
                      <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Similar to python re.findall.</span>

<span class="sd">        Args:</span>
<span class="sd">            regex (str): raw regex string to be set in /%s/g.</span>
<span class="sd">            cssselector (str, optional): which element.outerHTML to be matched, defaults to &#39;html&#39;.</span>
<span class="sd">            attribute (str, optional): attribute of the selected element, defaults to &#39;outerHTML&#39;</span>
<span class="sd">            flags (str, optional): regex flags, defaults to &#39;g&#39;.</span>
<span class="sd">            timeout (float): defaults to NotSet.</span>

<span class="sd">Demo::</span>

<span class="sd">    # no group / (?:) / (?&lt;=) / (?!)</span>
<span class="sd">    print(await tab.findall(&#39;&lt;title&gt;.*?&lt;/title&gt;&#39;))</span>
<span class="sd">    # [&#39;&lt;title&gt;123456789&lt;/title&gt;&#39;]</span>

<span class="sd">    # only 1 group</span>
<span class="sd">    print(await tab.findall(&#39;&lt;title&gt;(.*?)&lt;/title&gt;&#39;))</span>
<span class="sd">    # [&#39;123456789&#39;]</span>

<span class="sd">    # multi-groups</span>
<span class="sd">    print(await tab.findall(&#39;&lt;title&gt;(1)(2).*?&lt;/title&gt;&#39;))</span>
<span class="sd">    # [[&#39;1&#39;, &#39;2&#39;]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;!</span><span class="se">\\</span><span class="s1">)/&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
            <span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;!</span><span class="se">\\</span><span class="s1">)/&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;\/&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="p">)</span>
        <span class="n">group_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;!</span><span class="se">\\</span><span class="s1">)\((?!\?)&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="p">))</span>
        <span class="n">act</span> <span class="o">=</span> <span class="s1">&#39;matchAll&#39;</span> <span class="k">if</span> <span class="s1">&#39;g&#39;</span> <span class="ow">in</span> <span class="n">flags</span> <span class="k">else</span> <span class="s1">&#39;match&#39;</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">var group_count = </span><span class="si">%s</span><span class="s1"></span>
<span class="s1">var result = []</span>
<span class="s1">var items = [...document.querySelector(`</span><span class="si">%s</span><span class="s1">`).</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">(/</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">)]</span>
<span class="s1">items.forEach((item) =&gt; {</span>
<span class="s1">    if (group_count &lt;= 1) {</span>
<span class="s1">        result.push(item[group_count])</span>
<span class="s1">    } else {</span>
<span class="s1">        var tmp = []</span>
<span class="s1">        for (let i = 1; i &lt; group_count + 1; i++) {</span>
<span class="s1">            tmp.push(item[i])</span>
<span class="s1">        }</span>
<span class="s1">        result.push(tmp)</span>
<span class="s1">    }</span>
<span class="s1">})</span>
<span class="s1">JSON.stringify(result)</span>
<span class="s1">&#39;&#39;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">group_count</span><span class="p">,</span> <span class="n">cssselector</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">act</span><span class="p">,</span> <span class="n">regex</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">code</span><span class="p">,</span>
                               <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">and</span> <span class="n">result</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.findone" class="doc doc-heading">
<code class="highlight language-python"><span class="n">findone</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">cssselector</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>find the string in html(select with given css)</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">findone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                  <span class="n">regex</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                  <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                  <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                  <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;find the string in html(select with given css)&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="n">regex</span><span class="p">,</span>
                                <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                <span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.gc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gc</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[HeapProfiler.collectGarbage]</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2201</span>
<span class="normal">2202</span>
<span class="normal">2203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">gc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s2">&quot;[HeapProfiler.collectGarbage]&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;HeapProfiler.collectGarbage&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_all_cookies" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all_cookies</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Network.getAllCookies], return all the cookies of this browser.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_all_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;[Network.getAllCookies], return all the cookies of this browser.&quot;&quot;&quot;</span>
    <span class="c1"># {&#39;id&#39;: 12, &#39;result&#39;: {&#39;cookies&#39;: [{&#39;name&#39;: &#39;test2&#39;, &#39;value&#39;: &#39;test_value&#39;, &#39;domain&#39;: &#39;python.org&#39;, &#39;path&#39;: &#39;/&#39;, &#39;expires&#39;: -1, &#39;size&#39;: 15, &#39;httpOnly&#39;: False, &#39;secure&#39;: False, &#39;session&#39;: True}]}}</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getAllCookies&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;result.cookies&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_cookies" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_cookies</span><span class="p">(</span><span class="n">urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Network.getCookies], get cookies of urls.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">urls</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;[Network.getCookies], get cookies of urls.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">urls</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">urls</span><span class="p">]</span>
        <span class="n">urls</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getCookies&quot;</span><span class="p">,</span>
                                 <span class="n">urls</span><span class="o">=</span><span class="n">urls</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getCookies&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;result.cookies&#39;</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_current_title" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_current_title</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>JS: document.title</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_current_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="s2">&quot;JS: document.title&quot;</span>
    <span class="n">title</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s2">&quot;document.title&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">title</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_current_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_current_url</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>JS: window.location.href</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_current_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="s2">&quot;JS: window.location.href&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s2">&quot;window.location.href&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">url</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_element_clip" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_element_clip</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Element.getBoundingClientRect. If captureBeyondViewport is True, use scrollWidth &amp; scrollHeight instead.
{"x":241,"y":85.59375,"width":165,"height":36,"top":85.59375,"right":406,"bottom":121.59375,"left":241}</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_element_clip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                           <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                           <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Element.getBoundingClientRect. If captureBeyondViewport is True, use scrollWidth &amp; scrollHeight instead.</span>
<span class="sd">    {&quot;x&quot;:241,&quot;y&quot;:85.59375,&quot;width&quot;:165,&quot;height&quot;:36,&quot;top&quot;:85.59375,&quot;right&quot;:406,&quot;bottom&quot;:121.59375,&quot;left&quot;:241}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">captureBeyondViewport</span><span class="p">:</span>
        <span class="n">js_str</span> <span class="o">=</span> <span class="s1">&#39;node=document.querySelector(`</span><span class="si">%s</span><span class="s1">`);rect = node.getBoundingClientRect();rect.width=node.scrollWidth;rect.height=node.scrollHeight;JSON.stringify(rect)&#39;</span> <span class="o">%</span> <span class="n">cssselector</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">js_str</span> <span class="o">=</span> <span class="s1">&#39;node=document.querySelector(`</span><span class="si">%s</span><span class="s1">`);rect = node.getBoundingClientRect();JSON.stringify(rect)&#39;</span> <span class="o">%</span> <span class="n">cssselector</span>
    <span class="n">rect</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">js_str</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                         <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rect</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">rect</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
            <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>
            <span class="k">return</span> <span class="n">rect</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">):</span>
            <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_frame_tree" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_frame_tree</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.getFrameTree], get current page frame tree</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_frame_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;[Page.getFrameTree], get current page frame tree&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.getFrameTree&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_history_entry" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_history_entry</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relative_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>get history entries of this page</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_history_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">relative_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;get history entries of this page&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_history_list</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;currentIndex&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">relative_index</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;entries&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">relative_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;entries&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span>
                <span class="s1">&#39;index and relative_index should not be both None.&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_history_list" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_history_list</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>(Page.getNavigationHistory) Get the page history list.</p>

<details class="return-example">
  <summary>return example</summary>
  <p>{'currentIndex': 0, 'entries': [{'id': 1, 'url': 'about:blank', 'userTypedURL': 'about:blank', 'title': '', 'transitionType': 'auto_toplevel'}, {'id': 7, 'url': 'http://3.p.cn/', 'userTypedURL': 'http://3.p.cn/', 'title': 'Not Found', 'transitionType': 'typed'}, {'id': 9, 'url': 'http://p.3.cn/', 'userTypedURL': 'http://p.3.cn/', 'title': '', 'transitionType': 'typed'}]}}</p>
</details>
      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_history_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;(Page.getNavigationHistory) Get the page history list.</span>
<span class="sd">    return example:</span>
<span class="sd">        {&#39;currentIndex&#39;: 0, &#39;entries&#39;: [{&#39;id&#39;: 1, &#39;url&#39;: &#39;about:blank&#39;, &#39;userTypedURL&#39;: &#39;about:blank&#39;, &#39;title&#39;: &#39;&#39;, &#39;transitionType&#39;: &#39;auto_toplevel&#39;}, {&#39;id&#39;: 7, &#39;url&#39;: &#39;http://3.p.cn/&#39;, &#39;userTypedURL&#39;: &#39;http://3.p.cn/&#39;, &#39;title&#39;: &#39;Not Found&#39;, &#39;transitionType&#39;: &#39;typed&#39;}, {&#39;id&#39;: 9, &#39;url&#39;: &#39;http://p.3.cn/&#39;, &#39;userTypedURL&#39;: &#39;http://p.3.cn/&#39;, &#39;title&#39;: &#39;&#39;, &#39;transitionType&#39;: &#39;typed&#39;}]}}&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.getNavigationHistory&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">{})</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_html</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>return html from <code>document.documentElement.outerHTML</code></p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;return html from `document.documentElement.outerHTML`&quot;&quot;&quot;</span>
    <span class="n">html</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s1">&#39;document.documentElement.outerHTML&#39;</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">html</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_page_frame_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_page_frame_id</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>get frame id of current page</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_page_frame_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;get frame id of current page&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_tree</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span>
                               <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.frameTree.frame.id&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_page_size" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_page_size</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>get page size with javascript</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_page_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;get page size with javascript&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
        <span class="s2">&quot;[window.innerWidth||document.documentElement.clientWidth||document.querySelector(&#39;body&#39;).clientWidth,window.innerHeight||document.documentElement.clientHeight||document.querySelector(&#39;body&#39;).clientHeight]&quot;</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_request_post_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_request_post_data</span><span class="p">(</span><span class="n">request_dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Get the post data of the POST request. No need for wait_request_loading.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_request_post_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                <span class="n">request_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                                <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get the post data of the POST request. No need for wait_request_loading.&quot;&quot;&quot;</span>
    <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_request_id</span><span class="p">(</span><span class="n">request_dict</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getRequestPostData&quot;</span><span class="p">,</span>
                             <span class="n">requestId</span><span class="o">=</span><span class="n">request_id</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.postData&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_response" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_response</span><span class="p">(</span><span class="n">request_dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">wait_loading</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>return Network.getResponseBody raw response.</p>

<details class="return-demo">
  <summary>return demo</summary>
  <p>{'id': 2, 'result': {'body': 'source code', 'base64Encoded': False}}</p>
</details>      <p>some ajax request need to await tab.wait_request_loading(request_dict) for
loadingFinished (or sleep some secs) and wait_loading=None will auto check response loaded.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_response</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">request_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
    <span class="n">wait_loading</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&#39;&#39;&#39;return Network.getResponseBody raw response.</span>
<span class="sd">    return demo:</span>

<span class="sd">            {&#39;id&#39;: 2, &#39;result&#39;: {&#39;body&#39;: &#39;source code&#39;, &#39;base64Encoded&#39;: False}}</span>

<span class="sd">    some ajax request need to await tab.wait_request_loading(request_dict) for</span>
<span class="sd">    loadingFinished (or sleep some secs) and wait_loading=None will auto check response loaded.&#39;&#39;&#39;</span>
    <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_request_id</span><span class="p">(</span><span class="n">request_dict</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">wait_loading</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getResponseBody&quot;</span><span class="p">,</span>
                               <span class="n">requestId</span><span class="o">=</span><span class="n">request_id</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;error.code&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">32000</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span>
    <span class="k">if</span> <span class="n">wait_loading</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
        <span class="c1"># ensure the request loaded</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_request_loading</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.getResponseBody&quot;</span><span class="p">,</span>
                           <span class="n">requestId</span><span class="o">=</span><span class="n">request_id</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_response_body" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_response_body</span><span class="p">(</span><span class="n">request_dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">wait_loading</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>get result.body from self.get_response.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="n">request_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                            <span class="n">wait_loading</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;get result.body from self.get_response.&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">request_dict</span><span class="p">,</span>
                                     <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                     <span class="n">wait_loading</span><span class="o">=</span><span class="n">wait_loading</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.body&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_screen_size" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_screen_size</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>get [window.screen.width, window.screen.height] with javascript</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_screen_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;get [window.screen.width, window.screen.height] with javascript&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
        <span class="s1">&#39;[window.screen.width, window.screen.height]&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_smooth_steps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_smooth_steps</span><span class="p">(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">,</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">steps_count</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>smooth move steps</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_smooth_steps</span><span class="p">(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">,</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">steps_count</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
    <span class="s2">&quot;smooth move steps&quot;</span>

    <span class="k">def</span> <span class="nf">getPointOnLine</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the (x, y) tuple of the point that has progressed a proportion</span>
<span class="sd">        n along the line defined by the two x, y coordinates.</span>

<span class="sd">        Copied from pyautogui &amp; pytweening module.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">x1</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">((</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">y1</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">getPointOnLine</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">,</span>
                       <span class="n">n</span> <span class="o">/</span> <span class="n">steps_count</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps_count</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="c1"># steps = [(int(a), int(b)) for a, b in steps]</span>
    <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">steps</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_value</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">jsonify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>name or expression. jsonify will transport the data by JSON, such as the array.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2622</span>
<span class="normal">2623</span>
<span class="normal">2624</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;name or expression. jsonify will transport the data by JSON, such as the array.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">jsonify</span><span class="o">=</span><span class="n">jsonify</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.get_variable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_variable</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">jsonify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>variable or expression. jsonify will transport the data by JSON, such as the array.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2626</span>
<span class="normal">2627</span>
<span class="normal">2628</span>
<span class="normal">2629</span>
<span class="normal">2630</span>
<span class="normal">2631</span>
<span class="normal">2632</span>
<span class="normal">2633</span>
<span class="normal">2634</span>
<span class="normal">2635</span>
<span class="normal">2636</span>
<span class="normal">2637</span>
<span class="normal">2638</span>
<span class="normal">2639</span>
<span class="normal">2640</span>
<span class="normal">2641</span>
<span class="normal">2642</span>
<span class="normal">2643</span>
<span class="normal">2644</span>
<span class="normal">2645</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                       <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                       <span class="n">jsonify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;variable or expression. jsonify will transport the data by JSON, such as the array.&quot;&quot;&quot;</span>
    <span class="c1"># using JSON to keep value type</span>
    <span class="k">if</span> <span class="n">jsonify</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;JSON.stringify(</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                               <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">name</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                             <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.goto" class="doc doc-heading">
<code class="highlight language-python"><span class="n">goto</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">referrer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>alias for self.set_url</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">goto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">referrer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
               <span class="n">timeout_stop_loading</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="s2">&quot;alias for self.set_url&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_url</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                              <span class="n">referrer</span><span class="o">=</span><span class="n">referrer</span><span class="p">,</span>
                              <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                              <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="n">timeout_stop_loading</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.goto_history" class="doc doc-heading">
<code class="highlight language-python"><span class="n">goto_history</span><span class="p">(</span><span class="n">entryId</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.navigateToHistoryEntry]</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">goto_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entryId</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="s2">&quot;[Page.navigateToHistoryEntry]&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.navigateToHistoryEntry&#39;</span><span class="p">,</span>
                             <span class="n">entryId</span><span class="o">=</span><span class="n">entryId</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_error</span><span class="p">(</span><span class="s1">&#39;goto_history&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">entryId</span><span class="o">=</span><span class="n">entryId</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.goto_history_relative" class="doc doc-heading">
<code class="highlight language-python"><span class="n">goto_history_relative</span><span class="p">(</span><span class="n">relative_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>go to the relative history</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">goto_history_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                <span class="n">relative_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;go to the relative history&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_history_entry</span><span class="p">(</span><span class="n">relative_index</span><span class="o">=</span><span class="n">relative_index</span><span class="p">,</span>
                                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">entry_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">entry_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto_history</span><span class="p">(</span><span class="n">entryId</span><span class="o">=</span><span class="n">entry_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.handle_dialog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">handle_dialog</span><span class="p">(</span><span class="n">accept</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">promptText</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>WARNING: you should enable <code>Page</code> domain explicitly before running tab.js('alert()'), because alert() will always halt the event loop.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">handle_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">accept</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">promptText</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;WARNING: you should enable `Page` domain explicitly before running tab.js(&#39;alert()&#39;), because alert() will always halt the event loop.&quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">timeout</span><span class="p">,</span> <span class="s1">&#39;accept&#39;</span><span class="p">:</span> <span class="n">accept</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">promptText</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;promptText&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">promptText</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.handleJavaScriptDialog&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_error</span><span class="p">(</span><span class="s1">&#39;handle_dialog&#39;</span><span class="p">,</span>
                            <span class="n">result</span><span class="p">,</span>
                            <span class="n">accept</span><span class="o">=</span><span class="n">accept</span><span class="p">,</span>
                            <span class="n">promptText</span><span class="o">=</span><span class="n">promptText</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.history_back" class="doc doc-heading">
<code class="highlight language-python"><span class="n">history_back</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>go to back history</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">history_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;go to back history&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto_history_relative</span><span class="p">(</span><span class="n">relative_index</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
                                            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.history_forward" class="doc doc-heading">
<code class="highlight language-python"><span class="n">history_forward</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>go to forward history</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">history_forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;go to forward history&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto_history_relative</span><span class="p">(</span><span class="n">relative_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">html</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p><code>await tab.html</code>. return html from <code>document.documentElement.outerHTML</code></p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">html</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;`await tab.html`. return html from `document.documentElement.outerHTML`&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_html</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.includes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">includes</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">cssselector</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>String.prototype.includes.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>text</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>substring</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cssselector</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>css selector for outerHTML, defaults to 'html'</p></td>
          <td>
                <code>&#39;html&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>attribute</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>attribute of the selected element, defaults to 'outerHTML'. Sometimes for case-insensitive usage by setting <code>attribute='textContent.toLowerCase()'</code></p></td>
          <td>
                <code>&#39;outerHTML&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>whether the outerHTML contains substring.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">includes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">text</span><span class="p">,</span>
                   <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                   <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                   <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;String.prototype.includes.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): substring</span>
<span class="sd">        cssselector (str, optional): css selector for outerHTML, defaults to &#39;html&#39;</span>
<span class="sd">        attribute (str, optional): attribute of the selected element, defaults to &#39;outerHTML&#39;. Sometimes for case-insensitive usage by setting `attribute=&#39;textContent.toLowerCase()&#39;`</span>
<span class="sd">    Returns:</span>
<span class="sd">        whether the outerHTML contains substring.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">js</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;document.querySelector(`</span><span class="si">{</span><span class="n">cssselector</span><span class="si">}</span><span class="s1">`).</span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="s1">.includes(`</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s1">`)&#39;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">js</span><span class="p">,</span> <span class="n">jsonify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.inject_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inject_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">cssselector</span><span class="o">=</span><span class="s1">&#39;body&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;beforeend&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>An alias name for tab.insertAdjacentHTML.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">inject_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                      <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;body&#39;</span><span class="p">,</span>
                      <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;beforeend&#39;</span><span class="p">,</span>
                      <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An alias name for tab.insertAdjacentHTML.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">insertAdjacentHTML</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">,</span>
                                         <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                         <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                                         <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.inject_js_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inject_js_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">requests_kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>inject and run the given JS URL</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">inject_js_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">url</span><span class="p">,</span>
                        <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">retry</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">requests_kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="s2">&quot;inject and run the given JS URL&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">requests_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">):</span>
        <span class="n">requests_kwargs</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UA</span><span class="o">.</span><span class="n">Chrome</span><span class="p">}</span>
    <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                           <span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span>
                           <span class="n">ssl</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span>
                           <span class="o">**</span><span class="n">requests_kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">r</span><span class="p">:</span>
        <span class="n">javascript</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">javascript</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;inject_js_url failed for request: </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.insertAdjacentHTML" class="doc doc-heading">
<code class="highlight language-python"><span class="n">insertAdjacentHTML</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">cssselector</span><span class="o">=</span><span class="s1">&#39;body&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;beforeend&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Insert HTML source code into document. Often used for injecting CSS element.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>html</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>HTML source code</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cssselector</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>cssselector to find the target node, defaults to 'body'</p></td>
          <td>
                <code>&#39;body&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>position</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>['beforebegin', 'afterbegin', 'beforeend', 'afterend'],  defaults to 'beforeend'</p></td>
          <td>
                <code>&#39;beforeend&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>timeout</code></td>
          <td>
                <code>[<span title="ichrome.async_utils.AsyncTab.type">type</span>]</code>
          </td>
          <td><p>defaults to NotSet</p></td>
          <td>
                <code>NotSet</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">insertAdjacentHTML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                             <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;body&#39;</span><span class="p">,</span>
                             <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;beforeend&#39;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Insert HTML source code into document. Often used for injecting CSS element.</span>

<span class="sd">    Args:</span>
<span class="sd">        html (str): HTML source code</span>
<span class="sd">        cssselector (str, optional): cssselector to find the target node, defaults to &#39;body&#39;</span>
<span class="sd">        position (str, optional): [&#39;beforebegin&#39;, &#39;afterbegin&#39;, &#39;beforeend&#39;, &#39;afterend&#39;],  defaults to &#39;beforeend&#39;</span>
<span class="sd">        timeout ([type], optional): defaults to NotSet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">template</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;document.querySelector(`</span><span class="si">{</span><span class="n">cssselector</span><span class="si">}</span><span class="s1">`).insertAdjacentHTML(&#39;</span><span class="si">{</span><span class="n">position</span><span class="si">}</span><span class="s1">&#39;, `</span><span class="si">{</span><span class="n">html</span><span class="si">}</span><span class="s1">`)&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.iter_events" class="doc doc-heading">
<code class="highlight language-python"><span class="n">iter_events</span><span class="p">(</span><span class="n">events</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Iter events with a async context.
::</p>
<pre><code>import asyncio

from ichrome import AsyncChromeDaemon


async def main():
    async with AsyncChromeDaemon() as cd:
        async with cd.connect_tab() as tab:
            # demo1: events type is List[str]
            async with tab.iter_events(['Page.loadEventFired'],
                                    timeout=60) as event_buffer:
                await tab.goto('http://httpbin.org/get')
                print(await event_buffer)
                # {'method': 'Page.loadEventFired', 'params': {'timestamp': 357760.225243}, 'sessionId': '99AFCDF842DA6C9C000C5F86A904FCE6'}
                await tab.goto('http://httpbin.org/get')
                print(await event_buffer.get())
                # {'method': 'Page.loadEventFired', 'params': {'timestamp': 357761.188782}, 'sessionId': '99AFCDF842DA6C9C000C5F86A904FCE6'}
                await tab.goto('http://httpbin.org/get')
                async for data in event_buffer:
                    print(data)
                    # {'method': 'Page.loadEventFired', 'params': {'timestamp': 357761.811724}, 'sessionId': '99AFCDF842DA6C9C000C5F86A904FCE6'}
                    break
            # demo2: events type is Dict[str, Callable]
            def cb(event, tab, buffer):
                return ('event_cb', event, tab, buffer)

            async with tab.iter_events({'Page.loadEventFired': cb},
                                    timeout=60) as event_buffer:
                await tab.goto('http://httpbin.org/get')
                print(await event_buffer)
                # ('event_cb', {'method': 'Page.loadEventFired', 'params': {'timestamp': 358088.744186}, 'sessionId': 'E89B2C20E601DB92D37B55D09D7A9531'}, &lt;Tab(connected): AAC58F5AD46D711A4F22687A4CFF40AF&gt;, &lt;EventBuffer at 0x23586517b90 maxsize=0 tasks=1&gt;)
                await tab.goto('http://httpbin.org/get')
                async for data in event_buffer:
                    print(data)
                    # ('event_cb', {'method': 'Page.loadEventFired', 'params': {'timestamp': 358089.399112}, 'sessionId': 'E89B2C20E601DB92D37B55D09D7A9531'}, &lt;Tab(connected): AAC58F5AD46D711A4F22687A4CFF40AF&gt;, &lt;EventBuffer at 0x23586517b90 maxsize=0 tasks=2&gt;)
                    break


asyncio.run(main())
</code></pre>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">iter_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">events</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]],</span>
                <span class="n">timeout</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">maxsize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;EventBuffer&#39;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Iter events with a async context.</span>
<span class="sd">    ::</span>

<span class="sd">        import asyncio</span>

<span class="sd">        from ichrome import AsyncChromeDaemon</span>


<span class="sd">        async def main():</span>
<span class="sd">            async with AsyncChromeDaemon() as cd:</span>
<span class="sd">                async with cd.connect_tab() as tab:</span>
<span class="sd">                    # demo1: events type is List[str]</span>
<span class="sd">                    async with tab.iter_events([&#39;Page.loadEventFired&#39;],</span>
<span class="sd">                                            timeout=60) as event_buffer:</span>
<span class="sd">                        await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                        print(await event_buffer)</span>
<span class="sd">                        # {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 357760.225243}, &#39;sessionId&#39;: &#39;99AFCDF842DA6C9C000C5F86A904FCE6&#39;}</span>
<span class="sd">                        await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                        print(await event_buffer.get())</span>
<span class="sd">                        # {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 357761.188782}, &#39;sessionId&#39;: &#39;99AFCDF842DA6C9C000C5F86A904FCE6&#39;}</span>
<span class="sd">                        await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                        async for data in event_buffer:</span>
<span class="sd">                            print(data)</span>
<span class="sd">                            # {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 357761.811724}, &#39;sessionId&#39;: &#39;99AFCDF842DA6C9C000C5F86A904FCE6&#39;}</span>
<span class="sd">                            break</span>
<span class="sd">                    # demo2: events type is Dict[str, Callable]</span>
<span class="sd">                    def cb(event, tab, buffer):</span>
<span class="sd">                        return (&#39;event_cb&#39;, event, tab, buffer)</span>

<span class="sd">                    async with tab.iter_events({&#39;Page.loadEventFired&#39;: cb},</span>
<span class="sd">                                            timeout=60) as event_buffer:</span>
<span class="sd">                        await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                        print(await event_buffer)</span>
<span class="sd">                        # (&#39;event_cb&#39;, {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 358088.744186}, &#39;sessionId&#39;: &#39;E89B2C20E601DB92D37B55D09D7A9531&#39;}, &lt;Tab(connected): AAC58F5AD46D711A4F22687A4CFF40AF&gt;, &lt;EventBuffer at 0x23586517b90 maxsize=0 tasks=1&gt;)</span>
<span class="sd">                        await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                        async for data in event_buffer:</span>
<span class="sd">                            print(data)</span>
<span class="sd">                            # (&#39;event_cb&#39;, {&#39;method&#39;: &#39;Page.loadEventFired&#39;, &#39;params&#39;: {&#39;timestamp&#39;: 358089.399112}, &#39;sessionId&#39;: &#39;E89B2C20E601DB92D37B55D09D7A9531&#39;}, &lt;Tab(connected): AAC58F5AD46D711A4F22687A4CFF40AF&gt;, &lt;EventBuffer at 0x23586517b90 maxsize=0 tasks=2&gt;)</span>
<span class="sd">                            break</span>


<span class="sd">        asyncio.run(main())</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">EventBuffer</span><span class="p">(</span><span class="n">events</span><span class="p">,</span>
                       <span class="n">tab</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">maxsize</span><span class="o">=</span><span class="n">maxsize</span><span class="p">,</span>
                       <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                       <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
                       <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.iter_fetch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">iter_fetch</span><span class="p">(</span><span class="n">patterns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">handleAuthRequests</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Fetch.RequestPattern:</p>
<pre><code>urlPattern
    string(Wildcards)
resourceType
    Document, Stylesheet, Image, Media, Font, Script, TextTrack, XHR, Fetch, EventSource, WebSocket, Manifest, SignedExchange, Ping, CSPViolationReport, Preflight, Other
requestStage
    Stage at which to begin intercepting requests. Default is Request.
    Allowed Values: Request, Response
</code></pre>
<p>Demo1::</p>
<pre><code>async with tab.iter_fetch(patterns=[{
        'urlPattern': '*httpbin.org/get?a=*'
}]) as f:
    await tab.goto('http://httpbin.org/get?a=1', timeout=0)
    data = await f
    assert data
    # test continueRequest
    await f.continueRequest(data)
    assert await tab.wait_includes('origin')

    await tab.goto('http://httpbin.org/get?a=1', timeout=0)
    data = await f
    assert data
    # test modify response
    await f.fulfillRequest(data,
                            200,
                            body=b'hello world.')
    assert await tab.wait_includes('hello world.')
    await tab.goto('http://httpbin.org/get?a=1', timeout=0)
    data = await f
    assert data
    await f.failRequest(data, 'AccessDenied')
    assert (await tab.url).startswith('chrome-error://')

# use callback
async def cb(event, tab, buffer):
    await buffer.continueRequest(event)

async with tab.iter_fetch(
        patterns=[{
            'urlPattern': '*httpbin.org/ip*'
        }],
        callback=cb,
) as f:
    await tab.goto('http://httpbin.org/ip', timeout=0)
    async for r in f:
        break
</code></pre>
<p>Demo2::</p>
<pre><code>    import asyncio
    import json

    from ichrome import AsyncChromeDaemon


    async def main():
        async with AsyncChromeDaemon() as cd:
            async with cd.connect_tab() as tab:
                url = 'http://httpbin.org/ip'
                # 1. listen request/response network
                RequestPatternList = [{
                    'urlPattern': '*httpbin.org/ip*',
                    'requestStage': 'Response'
                }]
                async with tab.iter_fetch(RequestPatternList) as f:
                    await tab.goto(url, timeout=0)
                    # only one request could be catched
                    event = await f
                    print('request event:', json.dumps(event), flush=True)
                    response = await f.get_response(event, timeout=5)
                    print('response body:', response['data'])

                # 2. disable image requests
                url = 'https://www.bing.com'
                RequestPatternList = [
                    {
                        'urlPattern': '*',
                        'resourceType': 'Image',  # could be other types
                        'requestStage': 'Request'
                    },
                    {
                        'urlPattern': '*',
                        'resourceType': 'Stylesheet',
                        'requestStage': 'Request'
                    },
                    {
                        'urlPattern': '*',
                        'resourceType': 'Script',
                        'requestStage': 'Request'
                    },
                ]
                # listen 5 seconds
                async with tab.iter_fetch(RequestPatternList, timeout=5) as f:
                    await tab.goto(url, timeout=0)
                    # handle all the matched requests
                    async for event in f:
                        if f.match_event(event, RequestPatternList[0]):
                            print('abort request image:',
                                tab.get_data_value(event, 'params.request.url'),
                                flush=True)
                            await f.failRequest(event, 'Aborted')
                        elif f.match_event(event, RequestPatternList[1]):
                            print('abort request css:',
                                tab.get_data_value(event, 'params.request.url'),
                                flush=True)
                            await f.failRequest(event, 'ConnectionRefused')
                        elif f.match_event(event, RequestPatternList[2]):
                            print('abort request js:',
                                tab.get_data_value(event, 'params.request.url'),
                                flush=True)
                            await f.failRequest(event, 'AccessDenied')
                    await asyncio.sleep(5)


    if __name__ == "__main__":
        asyncio.run(main())
</code></pre>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">iter_fetch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">patterns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">handleAuthRequests</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">events</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">timeout</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">maxsize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                   <span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;FetchBuffer&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Fetch.RequestPattern:</span>

<span class="sd">    urlPattern</span>
<span class="sd">        string(Wildcards)</span>
<span class="sd">    resourceType</span>
<span class="sd">        Document, Stylesheet, Image, Media, Font, Script, TextTrack, XHR, Fetch, EventSource, WebSocket, Manifest, SignedExchange, Ping, CSPViolationReport, Preflight, Other</span>
<span class="sd">    requestStage</span>
<span class="sd">        Stage at which to begin intercepting requests. Default is Request.</span>
<span class="sd">        Allowed Values: Request, Response</span>

<span class="sd">Demo1::</span>

<span class="sd">    async with tab.iter_fetch(patterns=[{</span>
<span class="sd">            &#39;urlPattern&#39;: &#39;*httpbin.org/get?a=*&#39;</span>
<span class="sd">    }]) as f:</span>
<span class="sd">        await tab.goto(&#39;http://httpbin.org/get?a=1&#39;, timeout=0)</span>
<span class="sd">        data = await f</span>
<span class="sd">        assert data</span>
<span class="sd">        # test continueRequest</span>
<span class="sd">        await f.continueRequest(data)</span>
<span class="sd">        assert await tab.wait_includes(&#39;origin&#39;)</span>

<span class="sd">        await tab.goto(&#39;http://httpbin.org/get?a=1&#39;, timeout=0)</span>
<span class="sd">        data = await f</span>
<span class="sd">        assert data</span>
<span class="sd">        # test modify response</span>
<span class="sd">        await f.fulfillRequest(data,</span>
<span class="sd">                                200,</span>
<span class="sd">                                body=b&#39;hello world.&#39;)</span>
<span class="sd">        assert await tab.wait_includes(&#39;hello world.&#39;)</span>
<span class="sd">        await tab.goto(&#39;http://httpbin.org/get?a=1&#39;, timeout=0)</span>
<span class="sd">        data = await f</span>
<span class="sd">        assert data</span>
<span class="sd">        await f.failRequest(data, &#39;AccessDenied&#39;)</span>
<span class="sd">        assert (await tab.url).startswith(&#39;chrome-error://&#39;)</span>

<span class="sd">    # use callback</span>
<span class="sd">    async def cb(event, tab, buffer):</span>
<span class="sd">        await buffer.continueRequest(event)</span>

<span class="sd">    async with tab.iter_fetch(</span>
<span class="sd">            patterns=[{</span>
<span class="sd">                &#39;urlPattern&#39;: &#39;*httpbin.org/ip*&#39;</span>
<span class="sd">            }],</span>
<span class="sd">            callback=cb,</span>
<span class="sd">    ) as f:</span>
<span class="sd">        await tab.goto(&#39;http://httpbin.org/ip&#39;, timeout=0)</span>
<span class="sd">        async for r in f:</span>
<span class="sd">            break</span>

<span class="sd">Demo2::</span>

<span class="sd">        import asyncio</span>
<span class="sd">        import json</span>

<span class="sd">        from ichrome import AsyncChromeDaemon</span>


<span class="sd">        async def main():</span>
<span class="sd">            async with AsyncChromeDaemon() as cd:</span>
<span class="sd">                async with cd.connect_tab() as tab:</span>
<span class="sd">                    url = &#39;http://httpbin.org/ip&#39;</span>
<span class="sd">                    # 1. listen request/response network</span>
<span class="sd">                    RequestPatternList = [{</span>
<span class="sd">                        &#39;urlPattern&#39;: &#39;*httpbin.org/ip*&#39;,</span>
<span class="sd">                        &#39;requestStage&#39;: &#39;Response&#39;</span>
<span class="sd">                    }]</span>
<span class="sd">                    async with tab.iter_fetch(RequestPatternList) as f:</span>
<span class="sd">                        await tab.goto(url, timeout=0)</span>
<span class="sd">                        # only one request could be catched</span>
<span class="sd">                        event = await f</span>
<span class="sd">                        print(&#39;request event:&#39;, json.dumps(event), flush=True)</span>
<span class="sd">                        response = await f.get_response(event, timeout=5)</span>
<span class="sd">                        print(&#39;response body:&#39;, response[&#39;data&#39;])</span>

<span class="sd">                    # 2. disable image requests</span>
<span class="sd">                    url = &#39;https://www.bing.com&#39;</span>
<span class="sd">                    RequestPatternList = [</span>
<span class="sd">                        {</span>
<span class="sd">                            &#39;urlPattern&#39;: &#39;*&#39;,</span>
<span class="sd">                            &#39;resourceType&#39;: &#39;Image&#39;,  # could be other types</span>
<span class="sd">                            &#39;requestStage&#39;: &#39;Request&#39;</span>
<span class="sd">                        },</span>
<span class="sd">                        {</span>
<span class="sd">                            &#39;urlPattern&#39;: &#39;*&#39;,</span>
<span class="sd">                            &#39;resourceType&#39;: &#39;Stylesheet&#39;,</span>
<span class="sd">                            &#39;requestStage&#39;: &#39;Request&#39;</span>
<span class="sd">                        },</span>
<span class="sd">                        {</span>
<span class="sd">                            &#39;urlPattern&#39;: &#39;*&#39;,</span>
<span class="sd">                            &#39;resourceType&#39;: &#39;Script&#39;,</span>
<span class="sd">                            &#39;requestStage&#39;: &#39;Request&#39;</span>
<span class="sd">                        },</span>
<span class="sd">                    ]</span>
<span class="sd">                    # listen 5 seconds</span>
<span class="sd">                    async with tab.iter_fetch(RequestPatternList, timeout=5) as f:</span>
<span class="sd">                        await tab.goto(url, timeout=0)</span>
<span class="sd">                        # handle all the matched requests</span>
<span class="sd">                        async for event in f:</span>
<span class="sd">                            if f.match_event(event, RequestPatternList[0]):</span>
<span class="sd">                                print(&#39;abort request image:&#39;,</span>
<span class="sd">                                    tab.get_data_value(event, &#39;params.request.url&#39;),</span>
<span class="sd">                                    flush=True)</span>
<span class="sd">                                await f.failRequest(event, &#39;Aborted&#39;)</span>
<span class="sd">                            elif f.match_event(event, RequestPatternList[1]):</span>
<span class="sd">                                print(&#39;abort request css:&#39;,</span>
<span class="sd">                                    tab.get_data_value(event, &#39;params.request.url&#39;),</span>
<span class="sd">                                    flush=True)</span>
<span class="sd">                                await f.failRequest(event, &#39;ConnectionRefused&#39;)</span>
<span class="sd">                            elif f.match_event(event, RequestPatternList[2]):</span>
<span class="sd">                                print(&#39;abort request js:&#39;,</span>
<span class="sd">                                    tab.get_data_value(event, &#39;params.request.url&#39;),</span>
<span class="sd">                                    flush=True)</span>
<span class="sd">                                await f.failRequest(event, &#39;AccessDenied&#39;)</span>
<span class="sd">                        await asyncio.sleep(5)</span>


<span class="sd">        if __name__ == &quot;__main__&quot;:</span>
<span class="sd">            asyncio.run(main())</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FetchBuffer</span><span class="p">(</span><span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">,</span>
                           <span class="n">tab</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">patterns</span><span class="o">=</span><span class="n">patterns</span><span class="p">,</span>
                           <span class="n">handleAuthRequests</span><span class="o">=</span><span class="n">handleAuthRequests</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                           <span class="n">maxsize</span><span class="o">=</span><span class="n">maxsize</span><span class="p">,</span>
                           <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
                           <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.js" class="doc doc-heading">
<code class="highlight language-python"><span class="n">js</span><span class="p">(</span><span class="n">javascript</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Evaluate JavaScript on the page.
<code>js_result = await tab.js('document.title', timeout=10)</code></p>

<details class="js_result">
  <summary>js_result</summary>
  <p>{'id': 18, 'result': {'result': {'type': 'string', 'value': 'Welcome to Python.org'}}}</p>
</details>      <p>return None while timeout.
kwargs is a dict for Runtime.evaluate's <code>timeout</code> is conflict with <code>timeout</code> of self.send.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">js</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
             <span class="n">javascript</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
             <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result&#39;</span><span class="p">,</span>
             <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evaluate JavaScript on the page.</span>
<span class="sd">    `js_result = await tab.js(&#39;document.title&#39;, timeout=10)`</span>
<span class="sd">    js_result:</span>
<span class="sd">        {&#39;id&#39;: 18, &#39;result&#39;: {&#39;result&#39;: {&#39;type&#39;: &#39;string&#39;, &#39;value&#39;: &#39;Welcome to Python.org&#39;}}}</span>
<span class="sd">    return None while timeout.</span>
<span class="sd">    kwargs is a dict for Runtime.evaluate&#39;s `timeout` is conflict with `timeout` of self.send.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Runtime.evaluate&quot;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                             <span class="n">expression</span><span class="o">=</span><span class="n">javascript</span><span class="p">,</span>
                             <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;[js] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> insert js `</span><span class="si">{</span><span class="n">javascript</span><span class="si">}</span><span class="s1">`, received: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.js_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">js_code</span><span class="p">(</span><span class="n">javascript</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>javascript will be filled into function template.</p>
<p>Demo::</p>
<pre><code>javascript = `return document.title`
will run js like `(()=&gt;{return document.title})()`, and get the return result
</code></pre>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">js_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">javascript</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                      <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">,</span>
                      <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;javascript will be filled into function template.</span>

<span class="sd">Demo::</span>

<span class="sd">    javascript = `return document.title`</span>
<span class="sd">    will run js like `(()=&gt;{return document.title})()`, and get the return result</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="n">javascript</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;(()=&gt;{</span><span class="si">%s</span><span class="s1">})()&#39;&#39;&#39;</span> <span class="o">%</span> <span class="n">javascript</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">javascript</span><span class="p">,</span>
                             <span class="n">value_path</span><span class="o">=</span><span class="n">value_path</span><span class="p">,</span>
                             <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.keyboard_send" class="doc doc-heading">
<code class="highlight language-python"><span class="n">keyboard_send</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;char&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Input.dispatchKeyEvent]</p>
<p>type: keyDown, keyUp, rawKeyDown, char.
string: will be split into chars.</p>

<details class="kwargs">
  <summary>kwargs</summary>
  <p>text, unmodifiedText, keyIdentifier, code, key...</p>
</details>      <p>https://chromedevtools.github.io/devtools-protocol/tot/Input/#method-dispatchKeyEvent</p>

<details class="keyboard-events">
  <summary>Keyboard Events</summary>
  <p>code:
    https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code
key:
    https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key
keyIdentifier(Deprecated):
    https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyIdentifier</p>
</details>
      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">keyboard_send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="o">*</span><span class="p">,</span>
                        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;char&#39;</span><span class="p">,</span>
                        <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                        <span class="n">string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;[Input.dispatchKeyEvent]</span>

<span class="sd">    type: keyDown, keyUp, rawKeyDown, char.</span>
<span class="sd">    string: will be split into chars.</span>

<span class="sd">    kwargs:</span>
<span class="sd">        text, unmodifiedText, keyIdentifier, code, key...</span>

<span class="sd">    https://chromedevtools.github.io/devtools-protocol/tot/Input/#method-dispatchKeyEvent</span>

<span class="sd">    Keyboard Events:</span>
<span class="sd">        code:</span>
<span class="sd">            https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code</span>
<span class="sd">        key:</span>
<span class="sd">            https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key</span>
<span class="sd">        keyIdentifier(Deprecated):</span>
<span class="sd">            https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyIdentifier</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">string</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">keyboard_send</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">char</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Input.dispatchKeyEvent&#39;</span><span class="p">,</span>
                               <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                               <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.mouse_click" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mouse_click</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>click a position</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;click a position&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                           <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                           <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                           <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_release</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                                    <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                                    <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                    <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.mouse_click_element_rect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mouse_click_element_rect</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">multiplier</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>dispatchMouseEvent on selected element center</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_click_element_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                   <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                   <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                                   <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">multiplier</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;dispatchMouseEvent on selected element center&quot;</span>
    <span class="n">rect</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_clip</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span>
                                       <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rect</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">multiplier</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">multiplier</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">rect</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_press</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                               <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                               <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                               <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_release</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                                        <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                                        <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                        <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.mouse_drag_rel" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mouse_drag_rel</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">offset_x</span><span class="p">,</span> <span class="n">offset_y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>drag mouse relatively</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2164</span>
<span class="normal">2165</span>
<span class="normal">2166</span>
<span class="normal">2167</span>
<span class="normal">2168</span>
<span class="normal">2169</span>
<span class="normal">2170</span>
<span class="normal">2171</span>
<span class="normal">2172</span>
<span class="normal">2173</span>
<span class="normal">2174</span>
<span class="normal">2175</span>
<span class="normal">2176</span>
<span class="normal">2177</span>
<span class="normal">2178</span>
<span class="normal">2179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_drag_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">start_x</span><span class="p">,</span>
                         <span class="n">start_y</span><span class="p">,</span>
                         <span class="n">offset_x</span><span class="p">,</span>
                         <span class="n">offset_y</span><span class="p">,</span>
                         <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                         <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;drag mouse relatively&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_drag</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span>
                                 <span class="n">start_y</span><span class="p">,</span>
                                 <span class="n">start_x</span> <span class="o">+</span> <span class="n">offset_x</span><span class="p">,</span>
                                 <span class="n">start_y</span> <span class="o">+</span> <span class="n">offset_y</span><span class="p">,</span>
                                 <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                 <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.mouse_drag_rel_chain" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mouse_drag_rel_chain</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Drag with offset continuously.</p>
<p>Demo::</p>
<pre><code>    await tab.set_url('https://draw.yunser.com/')
    walker = await tab.mouse_drag_rel_chain(320, 145).move(50, 0, 0.2).move(
        0, 50, 0.2).move(-50, 0, 0.2).move(0, -50, 0.2)
    await walker.move(50 * 1.414, 50 * 1.414, 0.2)
</code></pre>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2181</span>
<span class="normal">2182</span>
<span class="normal">2183</span>
<span class="normal">2184</span>
<span class="normal">2185</span>
<span class="normal">2186</span>
<span class="normal">2187</span>
<span class="normal">2188</span>
<span class="normal">2189</span>
<span class="normal">2190</span>
<span class="normal">2191</span>
<span class="normal">2192</span>
<span class="normal">2193</span>
<span class="normal">2194</span>
<span class="normal">2195</span>
<span class="normal">2196</span>
<span class="normal">2197</span>
<span class="normal">2198</span>
<span class="normal">2199</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">mouse_drag_rel_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">start_x</span><span class="p">,</span>
                             <span class="n">start_y</span><span class="p">,</span>
                             <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Drag with offset continuously.</span>

<span class="sd">Demo::</span>

<span class="sd">        await tab.set_url(&#39;https://draw.yunser.com/&#39;)</span>
<span class="sd">        walker = await tab.mouse_drag_rel_chain(320, 145).move(50, 0, 0.2).move(</span>
<span class="sd">            0, 50, 0.2).move(-50, 0, 0.2).move(0, -50, 0.2)</span>
<span class="sd">        await walker.move(50 * 1.414, 50 * 1.414, 0.2)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">OffsetDragWalker</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span>
                                <span class="n">start_y</span><span class="p">,</span>
                                <span class="n">tab</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                                <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.mouse_move" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mouse_move</span><span class="p">(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">,</span> <span class="n">start_x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>move mouse smoothly only if duration &gt; 0.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span>
<span class="normal">2090</span>
<span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                     <span class="n">target_x</span><span class="p">,</span>
                     <span class="n">target_y</span><span class="p">,</span>
                     <span class="n">start_x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">start_y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                     <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;move mouse smoothly only if duration &gt; 0.&quot;</span>
    <span class="k">if</span> <span class="n">start_x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">start_x</span> <span class="o">=</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">target_x</span>
    <span class="k">if</span> <span class="n">start_y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">start_y</span> <span class="o">=</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">target_y</span>
    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page_size</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span><span class="p">:</span>
            <span class="n">steps_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">steps_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                <span class="nb">max</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">target_x</span> <span class="o">-</span> <span class="n">start_x</span><span class="p">),</span>
                     <span class="nb">abs</span><span class="p">(</span><span class="n">target_y</span> <span class="o">-</span> <span class="n">start_y</span><span class="p">)]))</span>
        <span class="n">steps_count</span> <span class="o">=</span> <span class="n">steps_count</span> <span class="ow">or</span> <span class="mi">30</span>
        <span class="n">interval</span> <span class="o">=</span> <span class="n">duration</span> <span class="o">/</span> <span class="n">steps_count</span>
        <span class="k">if</span> <span class="n">interval</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_move_interval</span><span class="p">:</span>
            <span class="n">steps_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">duration</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_move_interval</span><span class="p">)</span>
            <span class="n">interval</span> <span class="o">=</span> <span class="n">duration</span> <span class="o">/</span> <span class="n">steps_count</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_smooth_steps</span><span class="p">(</span><span class="n">target_x</span><span class="p">,</span>
                                      <span class="n">target_y</span><span class="p">,</span>
                                      <span class="n">start_x</span><span class="p">,</span>
                                      <span class="n">start_y</span><span class="p">,</span>
                                      <span class="n">steps_count</span><span class="o">=</span><span class="n">steps_count</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">interval</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Input.dispatchMouseEvent&#39;</span><span class="p">,</span>
                        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;mouseMoved&quot;</span><span class="p">,</span>
                        <span class="n">x</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
                        <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span>
                        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.mouse_move_rel" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mouse_move_rel</span><span class="p">(</span><span class="n">offset_x</span><span class="p">,</span> <span class="n">offset_y</span><span class="p">,</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Move mouse with offset.</p>
<p>Example::</p>
<pre><code>    await tab.mouse_move_rel(x + 15, 3, start_x, start_y, duration=0.3)
</code></pre>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2112</span>
<span class="normal">2113</span>
<span class="normal">2114</span>
<span class="normal">2115</span>
<span class="normal">2116</span>
<span class="normal">2117</span>
<span class="normal">2118</span>
<span class="normal">2119</span>
<span class="normal">2120</span>
<span class="normal">2121</span>
<span class="normal">2122</span>
<span class="normal">2123</span>
<span class="normal">2124</span>
<span class="normal">2125</span>
<span class="normal">2126</span>
<span class="normal">2127</span>
<span class="normal">2128</span>
<span class="normal">2129</span>
<span class="normal">2130</span>
<span class="normal">2131</span>
<span class="normal">2132</span>
<span class="normal">2133</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_move_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">offset_x</span><span class="p">,</span>
                             <span class="n">offset_y</span><span class="p">,</span>
                             <span class="n">start_x</span><span class="p">,</span>
                             <span class="n">start_y</span><span class="p">,</span>
                             <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Move mouse with offset.</span>

<span class="sd">        Example::</span>

<span class="sd">                await tab.mouse_move_rel(x + 15, 3, start_x, start_y, duration=0.3)</span>
<span class="sd">&#39;&#39;&#39;</span>
        <span class="n">target_x</span> <span class="o">=</span> <span class="n">start_x</span> <span class="o">+</span> <span class="n">offset_x</span>
        <span class="n">target_y</span> <span class="o">=</span> <span class="n">start_y</span> <span class="o">+</span> <span class="n">offset_y</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_move</span><span class="p">(</span><span class="n">start_x</span><span class="o">=</span><span class="n">start_x</span><span class="p">,</span>
                              <span class="n">start_y</span><span class="o">=</span><span class="n">start_y</span><span class="p">,</span>
                              <span class="n">target_x</span><span class="o">=</span><span class="n">target_x</span><span class="p">,</span>
                              <span class="n">target_y</span><span class="o">=</span><span class="n">target_y</span><span class="p">,</span>
                              <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
                              <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">target_x</span><span class="p">,</span> <span class="n">target_y</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.mouse_move_rel_chain" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mouse_move_rel_chain</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Move with offset continuously.</p>
<p>Example::</p>
<pre><code>walker = await tab.mouse_move_rel_chain(start_x, start_y).move(-20, -5, 0.2).move(5, 1, 0.2)
walker = await walker.move(-10, 0, 0.2).move(10, 0, 0.5)
</code></pre>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2135</span>
<span class="normal">2136</span>
<span class="normal">2137</span>
<span class="normal">2138</span>
<span class="normal">2139</span>
<span class="normal">2140</span>
<span class="normal">2141</span>
<span class="normal">2142</span>
<span class="normal">2143</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">mouse_move_rel_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move with offset continuously.</span>

<span class="sd">        Example::</span>

<span class="sd">            walker = await tab.mouse_move_rel_chain(start_x, start_y).move(-20, -5, 0.2).move(5, 1, 0.2)</span>
<span class="sd">            walker = await walker.move(-10, 0, 0.2).move(10, 0, 0.5)</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">OffsetMoveWalker</span><span class="p">(</span><span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">tab</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.mouse_press" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mouse_press</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Input.dispatchMouseEvent + mousePressed</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;Input.dispatchMouseEvent + mousePressed&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Input.dispatchMouseEvent&#39;</span><span class="p">,</span>
                           <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;mousePressed&quot;</span><span class="p">,</span>
                           <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                           <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                           <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                           <span class="n">clickCount</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.mouse_release" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mouse_release</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Input.dispatchMouseEvent + mouseReleased</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span>
<span class="normal">2042</span>
<span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">mouse_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;Input.dispatchMouseEvent + mouseReleased&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Input.dispatchMouseEvent&#39;</span><span class="p">,</span>
                           <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;mouseReleased&quot;</span><span class="p">,</span>
                           <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                           <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                           <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                           <span class="n">clickCount</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.pass_auth_proxy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pass_auth_proxy</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">test_url</span><span class="o">=</span><span class="s1">&#39;https://api.github.com/&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iter_count</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>pass user/password for auth proxy.</p>
<p>Demo::</p>
<pre><code>import asyncio

from ichrome import AsyncChromeDaemon


async def main():
    async with AsyncChromeDaemon(proxy='http://127.0.0.1:10800',
                                clear_after_shutdown=True,
                                headless=1) as cd:
        async with cd.connect_tab() as tab:
            await tab.pass_auth_proxy('user', 'pwd')
            await tab.goto('http://httpbin.org/ip', timeout=2)
            print(await tab.html)


asyncio.run(main())
</code></pre>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">pass_auth_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="n">user</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                              <span class="n">password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                              <span class="n">test_url</span><span class="o">=</span><span class="s1">&#39;https://api.github.com/&#39;</span><span class="p">,</span>
                              <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                              <span class="n">iter_count</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;pass user/password for auth proxy.</span>

<span class="sd">        Demo::</span>

<span class="sd">            import asyncio</span>

<span class="sd">            from ichrome import AsyncChromeDaemon</span>


<span class="sd">            async def main():</span>
<span class="sd">                async with AsyncChromeDaemon(proxy=&#39;http://127.0.0.1:10800&#39;,</span>
<span class="sd">                                            clear_after_shutdown=True,</span>
<span class="sd">                                            headless=1) as cd:</span>
<span class="sd">                    async with cd.connect_tab() as tab:</span>
<span class="sd">                        await tab.pass_auth_proxy(&#39;user&#39;, &#39;pwd&#39;)</span>
<span class="sd">                        await tab.goto(&#39;http://httpbin.org/ip&#39;, timeout=2)</span>
<span class="sd">                        print(await tab.html)</span>


<span class="sd">            asyncio.run(main())</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_fetch</span><span class="p">(</span><span class="n">handleAuthRequests</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">test_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iter_count</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="n">event</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="k">await</span> <span class="n">f</span>
                    <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Fetch.requestPaused&#39;</span><span class="p">:</span>
                        <span class="k">await</span> <span class="n">f</span><span class="o">.</span><span class="n">continueRequest</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Fetch.authRequired&#39;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">callback</span><span class="p">:</span>
                            <span class="n">ok</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ensure_awaitable</span><span class="p">(</span><span class="n">callback</span><span class="p">(</span><span class="n">event</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">await</span> <span class="n">f</span><span class="o">.</span><span class="n">continueWithAuth</span><span class="p">(</span>
                                <span class="n">event</span><span class="p">,</span>
                                <span class="s1">&#39;ProvideCredentials&#39;</span><span class="p">,</span>
                                <span class="n">user</span><span class="p">,</span>
                                <span class="n">password</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="n">ok</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">task</span>
                <span class="k">return</span> <span class="n">ok</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.prompt" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prompt</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>run prompt(<code>{text}</code>, <code>value</code>) in console, the <code>text</code> and <code>value</code> should be escaped before passing.
Block until user click [OK] or click [Cancel] or timeout.</p>

<details class="returned-as">
  <summary>Returned as</summary>
  <p>new value: [OK] clicked.
None: [Cancel] clicked.
value: timeout.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2226</span>
<span class="normal">2227</span>
<span class="normal">2228</span>
<span class="normal">2229</span>
<span class="normal">2230</span>
<span class="normal">2231</span>
<span class="normal">2232</span>
<span class="normal">2233</span>
<span class="normal">2234</span>
<span class="normal">2235</span>
<span class="normal">2236</span>
<span class="normal">2237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;run prompt(`{text}`, `value`) in console, the `text` and `value` should be escaped before passing.</span>
<span class="sd">    Block until user click [OK] or click [Cancel] or timeout.</span>
<span class="sd">    Returned as:</span>
<span class="sd">        new value: [OK] clicked.</span>
<span class="sd">        None: [Cancel] clicked.</span>
<span class="sd">        value: timeout.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="s1">&#39;prompt(`</span><span class="si">%s</span><span class="s1">`, `</span><span class="si">%s</span><span class="s1">`)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">_value</span><span class="p">),</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.querySelector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">querySelector</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>deprecated. query a tag with css</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">querySelector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                        <span class="n">action</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tag</span><span class="p">,</span> <span class="n">TagNotFound</span><span class="p">]:</span>
    <span class="s2">&quot;deprecated. query a tag with css&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                       <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                       <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.querySelectorAll" class="doc doc-heading">
<code class="highlight language-python"><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>deprecated. CDP DOM domain is quite heavy both computationally and memory wise, use js instead. return List[Tag], Tag, TagNotFound.
Tag hasattr: tagName, innerHTML, outerHTML, textContent, attributes, result</p>
<p>If index is not None, will return the tag_list[index], else return the whole tag list.</p>

<details class="demo">
  <summary>Demo</summary>
  <h3 id="ichrome.async_utils.AsyncTab.querySelectorAll--1-get-attribute-of-the-selected-tag">1. get attribute of the selected tag</h3>
<p>tags = (await tab.querySelectorAll("#sc_hdu&gt;li&gt;a", index=0, action="getAttribute('href')")).result
tags = (await tab.querySelectorAll("#sc_hdu&gt;li&gt;a", index=0)).get('href')
tags = (await tab.querySelectorAll("#sc_hdu&gt;li&gt;a", index=0)).to_dict()</p>
<h3 id="ichrome.async_utils.AsyncTab.querySelectorAll--2-remove-href-attr-of-all-the-selected-tags">2. remove href attr of all the selected tags</h3>
<p>tags = await tab.querySelectorAll("#sc_hdu&gt;li&gt;a", action="removeAttribute('href')")</p>
<p>for tag in tab.querySelectorAll("#sc_hdu&gt;li"):
    print(tag.attributes)</p>
</details>
      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">querySelectorAll</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">index</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">action</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tag</span><span class="p">],</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">TagNotFound</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;deprecated. CDP DOM domain is quite heavy both computationally and memory wise, use js instead. return List[Tag], Tag, TagNotFound.</span>
<span class="sd">        Tag hasattr: tagName, innerHTML, outerHTML, textContent, attributes, result</span>

<span class="sd">        If index is not None, will return the tag_list[index], else return the whole tag list.</span>

<span class="sd">        Demo:</span>

<span class="sd">            # 1. get attribute of the selected tag</span>

<span class="sd">            tags = (await tab.querySelectorAll(&quot;#sc_hdu&gt;li&gt;a&quot;, index=0, action=&quot;getAttribute(&#39;href&#39;)&quot;)).result</span>
<span class="sd">            tags = (await tab.querySelectorAll(&quot;#sc_hdu&gt;li&gt;a&quot;, index=0)).get(&#39;href&#39;)</span>
<span class="sd">            tags = (await tab.querySelectorAll(&quot;#sc_hdu&gt;li&gt;a&quot;, index=0)).to_dict()</span>

<span class="sd">            # 2. remove href attr of all the selected tags</span>
<span class="sd">            tags = await tab.querySelectorAll(&quot;#sc_hdu&gt;li&gt;a&quot;, action=&quot;removeAttribute(&#39;href&#39;)&quot;)</span>

<span class="sd">            for tag in tab.querySelectorAll(&quot;#sc_hdu&gt;li&quot;):</span>
<span class="sd">                print(tag.attributes)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;&#39;&quot;</span> <span class="ow">in</span> <span class="n">cssselector</span><span class="p">:</span>
            <span class="n">cssselector</span> <span class="o">=</span> <span class="n">cssselector</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="s2">&quot;null&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">action</span><span class="p">:</span>
            <span class="c1"># do the action and set Tag.result as el.action result</span>
            <span class="n">_action</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;item.result=el.</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> || &#39;&#39;;item.result=item.result.toString()&quot;</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;try {</span><span class="si">%s</span><span class="s1">} catch (error) </span><span class="si">{}</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">_action</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">javascript</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">var index_filter = </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">var css = `</span><span class="si">%s</span><span class="s2">`</span>
<span class="s2">if (index_filter == 0) {</span>
<span class="s2">    var element = document.querySelector(css)</span>
<span class="s2">    if (element) {</span>
<span class="s2">        var elements = [element]</span>
<span class="s2">    } else {</span>
<span class="s2">        var elements = []</span>
<span class="s2">    }</span>
<span class="s2">} else {</span>
<span class="s2">    var elements = document.querySelectorAll(css)</span>
<span class="s2">}</span>
<span class="s2">var result = []</span>
<span class="s2">for (let index = 0; index &lt; elements.length; index++) {</span>
<span class="s2">    const el = elements[index];</span>
<span class="s2">    if (index_filter!=null &amp;&amp; index_filter!=index) {</span>
<span class="s2">        continue</span>
<span class="s2">    }</span>

<span class="s2">    var item = {</span>
<span class="s2">        tagName: el.tagName,</span>
<span class="s2">        innerHTML: el.innerHTML,</span>
<span class="s2">        outerHTML: el.outerHTML,</span>
<span class="s2">        textContent: el.textContent,</span>
<span class="s2">        result: null,</span>
<span class="s2">        attributes: </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    }</span>
<span class="s2">    for (const attr of el.attributes) {</span>
<span class="s2">        item.attributes[attr.name] = attr.value</span>
<span class="s2">    }</span>
<span class="s2">    </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    result.push(item)</span>
<span class="s2">}</span>
<span class="s2">JSON.stringify(result)&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">index</span><span class="p">,</span>
            <span class="n">cssselector</span><span class="p">,</span>
            <span class="n">action</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response_items_str</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="n">javascript</span><span class="p">,</span>
                                          <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                          <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.result.value&#39;</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
                    <span class="n">response_items_str</span><span class="p">)</span> <span class="k">if</span> <span class="n">response_items_str</span> <span class="k">else</span> <span class="p">[]</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">Tag</span><span class="p">(</span><span class="o">**</span><span class="n">kws</span><span class="p">)</span> <span class="k">for</span> <span class="n">kws</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">TagNotFound</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;querySelectorAll error: </span><span class="si">{</span><span class="n">error</span><span class="si">!r}</span><span class="s2">, response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">error</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.recv" class="doc doc-heading">
<code class="highlight language-python"><span class="n">recv</span><span class="p">(</span><span class="n">event_dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Wait for a event_dict or not wait by setting timeout=0. Events will be filt by <code>id</code> or <code>method</code> or the whole json.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>event_dict</code></td>
          <td>
                <code>dict</code>
          </td>
          <td><p>dict like {'id': 1} or {'method': 'Page.loadEventFired'} or other JSON serializable dict.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>timeout</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td><p>await seconds, None for self._MAX_WAIT_TIMEOUT, 0 for 0 seconds.. Defaults to NotSet.</p></td>
          <td>
                <code>NotSet</code>
          </td>
        </tr>
        <tr>
          <td><code>callback_function</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td><p>event callback_function function accept only one arg(the event dict).. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Union">Union</span>[dict, None]</code>
          </td>
          <td><p>Awaitable[Union[dict, None]]: the event dict from websocket recv</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">recv</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
    <span class="n">callback_function</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Wait for a event_dict or not wait by setting timeout=0. Events will be filt by `id` or `method` or the whole json.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_dict (dict):  dict like {&#39;id&#39;: 1} or {&#39;method&#39;: &#39;Page.loadEventFired&#39;} or other JSON serializable dict.</span>
<span class="sd">        timeout (_type_, optional): await seconds, None for self._MAX_WAIT_TIMEOUT, 0 for 0 seconds.. Defaults to NotSet.</span>
<span class="sd">        callback_function (_type_, optional): event callback_function function accept only one arg(the event dict).. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Awaitable[Union[dict, None]]: the event dict from websocket recv</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span> <span class="ow">and</span> <span class="n">timeout</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># no wait</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">:</span>
        <span class="n">event_dict</span><span class="p">[</span><span class="s1">&#39;sessionId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recv</span><span class="p">(</span><span class="n">event_dict</span><span class="o">=</span><span class="n">event_dict</span><span class="p">,</span>
                            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                            <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.refresh_tab_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">refresh_tab_info</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>refresh the tab meta info with tab_id from /json</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">refresh_tab_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="s2">&quot;refresh the tab meta info with tab_id from /json&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">chrome</span><span class="o">.</span><span class="n">get_server</span><span class="p">(</span><span class="s1">&#39;/json&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">r</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">tab_info</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">tab_id</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">tab_info</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">json</span> <span class="o">=</span> <span class="n">tab_info</span>
                <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.reload" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reload</span><span class="p">(</span><span class="n">ignoreCache</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scriptToEvaluateOnLoad</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Reload the page.</p>
<p>ignoreCache: If true, browser cache is ignored (as if the user pressed Shift+refresh).
scriptToEvaluateOnLoad: If set, the script will be injected into all frames of the inspected page after reload.</p>
<p>Argument will be ignored if reloading dataURL origin.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">reload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">ignoreCache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">scriptToEvaluateOnLoad</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reload the page.</span>

<span class="sd">    ignoreCache: If true, browser cache is ignored (as if the user pressed Shift+refresh).</span>
<span class="sd">    scriptToEvaluateOnLoad: If set, the script will be injected into all frames of the inspected page after reload.</span>

<span class="sd">    Argument will be ignored if reloading dataURL origin.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">scriptToEvaluateOnLoad</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.reload&#39;</span><span class="p">,</span>
                               <span class="n">ignoreCache</span><span class="o">=</span><span class="n">ignoreCache</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
            <span class="s1">&#39;Page.reload&#39;</span><span class="p">,</span>
            <span class="n">ignoreCache</span><span class="o">=</span><span class="n">ignoreCache</span><span class="p">,</span>
            <span class="n">scriptToEvaluateOnLoad</span><span class="o">=</span><span class="n">scriptToEvaluateOnLoad</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.remove_js_onload" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_js_onload</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.removeScriptToEvaluateOnNewDocument], return whether the identifier exist.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">remove_js_onload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;[Page.removeScriptToEvaluateOnNewDocument], return whether the identifier exist.&#39;&#39;&#39;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.removeScriptToEvaluateOnNewDocument&#39;</span><span class="p">,</span>
                             <span class="n">identifier</span><span class="o">=</span><span class="n">identifier</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_error</span><span class="p">(</span><span class="s1">&#39;remove_js_onload&#39;</span><span class="p">,</span>
                            <span class="n">result</span><span class="p">,</span>
                            <span class="n">identifier</span><span class="o">=</span><span class="n">identifier</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.repl" class="doc doc-heading">
<code class="highlight language-python"><span class="n">repl</span><span class="p">(</span><span class="n">f_globals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">f_locals</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Give a simple way to debug your code with ichrome.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2239</span>
<span class="normal">2240</span>
<span class="normal">2241</span>
<span class="normal">2242</span>
<span class="normal">2243</span>
<span class="normal">2244</span>
<span class="normal">2245</span>
<span class="normal">2246</span>
<span class="normal">2247</span>
<span class="normal">2248</span>
<span class="normal">2249</span>
<span class="normal">2250</span>
<span class="normal">2251</span>
<span class="normal">2252</span>
<span class="normal">2253</span>
<span class="normal">2254</span>
<span class="normal">2255</span>
<span class="normal">2256</span>
<span class="normal">2257</span>
<span class="normal">2258</span>
<span class="normal">2259</span>
<span class="normal">2260</span>
<span class="normal">2261</span>
<span class="normal">2262</span>
<span class="normal">2263</span>
<span class="normal">2264</span>
<span class="normal">2265</span>
<span class="normal">2266</span>
<span class="normal">2267</span>
<span class="normal">2268</span>
<span class="normal">2269</span>
<span class="normal">2270</span>
<span class="normal">2271</span>
<span class="normal">2272</span>
<span class="normal">2273</span>
<span class="normal">2274</span>
<span class="normal">2275</span>
<span class="normal">2276</span>
<span class="normal">2277</span>
<span class="normal">2278</span>
<span class="normal">2279</span>
<span class="normal">2280</span>
<span class="normal">2281</span>
<span class="normal">2282</span>
<span class="normal">2283</span>
<span class="normal">2284</span>
<span class="normal">2285</span>
<span class="normal">2286</span>
<span class="normal">2287</span>
<span class="normal">2288</span>
<span class="normal">2289</span>
<span class="normal">2290</span>
<span class="normal">2291</span>
<span class="normal">2292</span>
<span class="normal">2293</span>
<span class="normal">2294</span>
<span class="normal">2295</span>
<span class="normal">2296</span>
<span class="normal">2297</span>
<span class="normal">2298</span>
<span class="normal">2299</span>
<span class="normal">2300</span>
<span class="normal">2301</span>
<span class="normal">2302</span>
<span class="normal">2303</span>
<span class="normal">2304</span>
<span class="normal">2305</span>
<span class="normal">2306</span>
<span class="normal">2307</span>
<span class="normal">2308</span>
<span class="normal">2309</span>
<span class="normal">2310</span>
<span class="normal">2311</span>
<span class="normal">2312</span>
<span class="normal">2313</span>
<span class="normal">2314</span>
<span class="normal">2315</span>
<span class="normal">2316</span>
<span class="normal">2317</span>
<span class="normal">2318</span>
<span class="normal">2319</span>
<span class="normal">2320</span>
<span class="normal">2321</span>
<span class="normal">2322</span>
<span class="normal">2323</span>
<span class="normal">2324</span>
<span class="normal">2325</span>
<span class="normal">2326</span>
<span class="normal">2327</span>
<span class="normal">2328</span>
<span class="normal">2329</span>
<span class="normal">2330</span>
<span class="normal">2331</span>
<span class="normal">2332</span>
<span class="normal">2333</span>
<span class="normal">2334</span>
<span class="normal">2335</span>
<span class="normal">2336</span>
<span class="normal">2337</span>
<span class="normal">2338</span>
<span class="normal">2339</span>
<span class="normal">2340</span>
<span class="normal">2341</span>
<span class="normal">2342</span>
<span class="normal">2343</span>
<span class="normal">2344</span>
<span class="normal">2345</span>
<span class="normal">2346</span>
<span class="normal">2347</span>
<span class="normal">2348</span>
<span class="normal">2349</span>
<span class="normal">2350</span>
<span class="normal">2351</span>
<span class="normal">2352</span>
<span class="normal">2353</span>
<span class="normal">2354</span>
<span class="normal">2355</span>
<span class="normal">2356</span>
<span class="normal">2357</span>
<span class="normal">2358</span>
<span class="normal">2359</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="nd">@classmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">repl</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">f_globals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">f_locals</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Give a simple way to debug your code with ichrome.&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">traceback</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">readline</span> <span class="k">as</span> <span class="nn">_</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="kn">import</span> <span class="nn">ast</span>
        <span class="kn">import</span> <span class="nn">types</span>
        <span class="kn">import</span> <span class="nn">warnings</span>
        <span class="kn">from</span> <span class="nn">code</span> <span class="kn">import</span> <span class="n">CommandCompiler</span>
        <span class="n">f_globals</span> <span class="o">=</span> <span class="n">f_globals</span> <span class="ow">or</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">f_globals</span>
        <span class="n">f_locals</span> <span class="o">=</span> <span class="n">f_locals</span> <span class="ow">or</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">f_locals</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">{</span>
                <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="s1">&#39;__package__&#39;</span><span class="p">,</span> <span class="s1">&#39;__loader__&#39;</span><span class="p">,</span> <span class="s1">&#39;__spec__&#39;</span><span class="p">,</span>
                <span class="s1">&#39;__builtins__&#39;</span><span class="p">,</span> <span class="s1">&#39;__file__&#39;</span>
        <span class="p">}:</span>
            <span class="n">f_locals</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">f_globals</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">Here is ichrome repl demo version, the features is not as good as python pbd, but this is very easy to use.</span>

<span class="s1">Shortcuts:</span>
<span class="s1">    -h: show more help.</span>
<span class="s1">    -q: quit the repl mode.</span>
<span class="s1">    CTRL-C: clear current line.</span>

<span class="s1">Demo source code:</span>

<span class="s1">```python</span>
<span class="s1">from ichrome import AsyncChromeDaemon, repl</span>
<span class="s1">import asyncio</span>


<span class="s1">async def main():</span>
<span class="s1">    async with AsyncChromeDaemon() as cd:</span>
<span class="s1">        async with cd.connect_tab() as tab:</span>
<span class="s1">            await tab.repl()</span>


<span class="s1">if __name__ == &quot;__main__&quot;:</span>
<span class="s1">    asyncio.run(main())</span>
<span class="s1">```</span>
<span class="s1">So debug your code with ichrome is only `await tab.repl()`.</span>

<span class="s1">For example:</span>

<span class="s1">&gt;&gt;&gt; await tab.goto(&#39;https://github.com/ClericPy&#39;)</span>
<span class="s1">True</span>
<span class="s1">&gt;&gt;&gt; title = await tab.title</span>
<span class="s1">&gt;&gt;&gt; title</span>
<span class="s1">&#39;ClericPy (ClericPy) · GitHub&#39;</span>
<span class="s1">&gt;&gt;&gt; await tab.click(&#39;.pinned-item-list-item-content [href=&quot;/ClericPy/ichrome&quot;]&#39;)</span>
<span class="s1">Tag(a)</span>
<span class="s1">&gt;&gt;&gt; await tab.wait_loading(2)</span>
<span class="s1">True</span>
<span class="s1">&gt;&gt;&gt; await tab.wait_loading(2)</span>
<span class="s1">False</span>
<span class="s1">&gt;&gt;&gt; await tab.js(&#39;document.body.innerHTML=&quot;Updated&quot;&#39;)</span>
<span class="s1">{&#39;type&#39;: &#39;string&#39;, &#39;value&#39;: &#39;Updated&#39;}</span>
<span class="s1">&gt;&gt;&gt; await tab.history_back()</span>
<span class="s1">True</span>
<span class="s1">&gt;&gt;&gt; await tab.set_html(&#39;hello world&#39;)</span>
<span class="s1">{&#39;id&#39;: 21, &#39;result&#39;: </span><span class="si">{}</span><span class="s1">}</span>
<span class="s1">&gt;&gt;&gt; await tab.set_ua(&#39;no UA&#39;)</span>
<span class="s1">{&#39;id&#39;: 22, &#39;result&#39;: </span><span class="si">{}</span><span class="s1">}</span>
<span class="s1">&gt;&gt;&gt; await tab.goto(&#39;http://httpbin.org/user-agent&#39;)</span>
<span class="s1">True</span>
<span class="s1">&gt;&gt;&gt; await tab.html</span>
<span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;pre style=&quot;word-wrap: break-word; white-space: pre-wrap;&quot;&gt;{\n  &quot;user-agent&quot;: &quot;no UA&quot;\n}\n&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>
<span class="s1">&#39;&#39;&#39;</span>

        <span class="n">_compile</span> <span class="o">=</span> <span class="n">CommandCompiler</span><span class="p">()</span>
        <span class="n">_compile</span><span class="o">.</span><span class="n">compiler</span><span class="o">.</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">ast</span><span class="o">.</span><span class="n">PyCF_ALLOW_TOP_LEVEL_AWAIT</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span>
                                <span class="n">message</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^coroutine .* was never awaited$&#39;</span><span class="p">,</span>
                                <span class="n">category</span><span class="o">=</span><span class="ne">RuntimeWarning</span><span class="p">)</span>

        <span class="k">async</span> <span class="k">def</span> <span class="nf">run_code</span><span class="p">():</span>
            <span class="n">buffer</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">more</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">while</span> <span class="n">more</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">more</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;... &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt;&gt;&gt; &#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">buffer</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;-q&#39;</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">()</span>
                    <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;-h&#39;</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
                        <span class="k">break</span>
                <span class="n">buffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">code</span> <span class="o">=</span> <span class="n">_compile</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span> <span class="s1">&#39;&lt;console&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;single&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">code</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">more</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">func</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">FunctionType</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">f_locals</span><span class="p">)</span>
                        <span class="n">maybe_coro</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isawaitable</span><span class="p">(</span><span class="n">maybe_coro</span><span class="p">):</span>
                            <span class="k">await</span> <span class="n">maybe_coro</span>
                            <span class="k">return</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">code</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="ne">SyntaxError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
                    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                    <span class="k">raise</span>

        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">run_code</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">()</span>
                <span class="k">continue</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">EOFError</span><span class="p">,</span> <span class="ne">SystemExit</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.reset_history" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reset_history</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.resetNavigationHistory], clear up history immediately</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">reset_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="s2">&quot;[Page.resetNavigationHistory], clear up history immediately&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.resetNavigationHistory&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_error</span><span class="p">(</span><span class="s1">&#39;reset_history&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.screenshot" class="doc doc-heading">
<code class="highlight language-python"><span class="n">screenshot</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="n">quality</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fromSurface</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Page.captureScreenshot. clip's keys: x, y, width, height, scale</p>
<p>format(str, optional): Image compression format (defaults to png)., defaults to 'png'
quality(int, optional): Compression quality from range [0..100], defaults to None. (jpeg only).
clip(dict, optional): Capture the screenshot of a given region only. defaults to None, means whole page.
fromSurface(bool, optional): Capture the screenshot from the surface, rather than the view. Defaults to true.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">screenshot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span>
                         <span class="n">quality</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
                         <span class="n">clip</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">fromSurface</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                         <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                         <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Page.captureScreenshot. clip&#39;s keys: x, y, width, height, scale</span>

<span class="sd">        format(str, optional): Image compression format (defaults to png)., defaults to &#39;png&#39;</span>
<span class="sd">        quality(int, optional): Compression quality from range [0..100], defaults to None. (jpeg only).</span>
<span class="sd">        clip(dict, optional): Capture the screenshot of a given region only. defaults to None, means whole page.</span>
<span class="sd">        fromSurface(bool, optional): Capture the screenshot from the surface, rather than the view. Defaults to true.</span>
<span class="sd">&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">save_file</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">file_bytes</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_bytes</span><span class="p">)</span>

        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="n">quality</span><span class="o">=</span><span class="n">quality</span><span class="p">,</span> <span class="n">fromSurface</span><span class="o">=</span><span class="n">fromSurface</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">clip</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;clip&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clip</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.captureScreenshot&#39;</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                 <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="n">captureBeyondViewport</span><span class="p">,</span>
                                 <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">base64_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">value_path</span><span class="o">=</span><span class="s1">&#39;result.data&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">save_path</span> <span class="ow">and</span> <span class="n">base64_img</span><span class="p">:</span>
            <span class="n">file_bytes</span> <span class="o">=</span> <span class="n">b64decode</span><span class="p">(</span><span class="n">base64_img</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">async_run</span><span class="p">(</span><span class="n">save_file</span><span class="p">,</span> <span class="n">save_path</span><span class="p">,</span> <span class="n">file_bytes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">base64_img</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.screenshot_element" class="doc doc-heading">
<code class="highlight language-python"><span class="n">screenshot_element</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="n">quality</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">fromSurface</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>screenshot the tag selected with given css as a picture</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">screenshot_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                             <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span>
                             <span class="n">quality</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
                             <span class="n">fromSurface</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                             <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                             <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="s2">&quot;screenshot the tag selected with given css as a picture&quot;</span>
    <span class="k">if</span> <span class="n">cssselector</span><span class="p">:</span>
        <span class="n">clip</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_clip</span><span class="p">(</span>
            <span class="n">cssselector</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
            <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="n">captureBeyondViewport</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">clip</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">screenshot</span><span class="p">(</span>
        <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
        <span class="n">quality</span><span class="o">=</span><span class="n">quality</span><span class="p">,</span>
        <span class="n">clip</span><span class="o">=</span><span class="n">clip</span><span class="p">,</span>
        <span class="n">fromSurface</span><span class="o">=</span><span class="n">fromSurface</span><span class="p">,</span>
        <span class="n">save_path</span><span class="o">=</span><span class="n">save_path</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="n">captureBeyondViewport</span><span class="o">=</span><span class="n">captureBeyondViewport</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.send" class="doc doc-heading">
<code class="highlight language-python"><span class="n">send</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">auto_enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">_kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Send message to Tab. callback_function only work whlie timeout!=0.
If timeout is not None: wait for recv event.
If auto_enable: will check the domain enabled automatically.
If callback_function: run while received the response msg.</p>
<p>the <code>force</code> arg is deprecated, use auto_enable instead.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
               <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
               <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">auto_enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">force</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="o">**</span><span class="n">_kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
    <span class="sd">&#39;&#39;&#39;Send message to Tab. callback_function only work whlie timeout!=0.</span>
<span class="sd">    If timeout is not None: wait for recv event.</span>
<span class="sd">    If auto_enable: will check the domain enabled automatically.</span>
<span class="sd">    If callback_function: run while received the response msg.</span>

<span class="sd">    the `force` arg is deprecated, use auto_enable instead.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">msg_id</span><span class="p">,</span> <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">_kwargs</span><span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">:</span>
        <span class="n">request</span><span class="p">[</span><span class="s1">&#39;sessionId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ChromeRuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[closed] </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> ws has been closed&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auto_enable</span> <span class="ow">or</span> <span class="n">force</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_enable</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[send] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s2"> </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># wait for msg filted by id</span>
            <span class="n">event</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]}</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="n">event</span><span class="p">,</span>
                          <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                          <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">send_json</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">f</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># timeout == 0, no need wait for response.</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">send_json</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">WebSocketError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="n">err_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> [send] msg </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s1"> failed for </span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">ChromeRuntimeError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.setBlockedURLs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setBlockedURLs</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>(Network.setBlockedURLs) Blocks URLs from loading. [EXPERIMENTAL].</p>
<p>Demo::</p>
<pre><code>await tab.setBlockedURLs(urls=['*.jpg', '*.png'])
</code></pre>
<p>WARNING: This method is EXPERIMENTAL, the official suggestion is using Fetch.enable, even Fetch is also EXPERIMENTAL, and wait events to control the requests (continue / abort / modify), especially block urls with resourceType: Document, Stylesheet, Image, Media, Font, Script, TextTrack, XHR, Fetch, EventSource, WebSocket, Manifest, SignedExchange, Ping, CSPViolationReport, Other.
https://chromedevtools.github.io/devtools-protocol/tot/Fetch/#method-enable</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">setBlockedURLs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">urls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;(Network.setBlockedURLs) Blocks URLs from loading. [EXPERIMENTAL].</span>

<span class="sd">Demo::</span>

<span class="sd">    await tab.setBlockedURLs(urls=[&#39;*.jpg&#39;, &#39;*.png&#39;])</span>

<span class="sd">WARNING: This method is EXPERIMENTAL, the official suggestion is using Fetch.enable, even Fetch is also EXPERIMENTAL, and wait events to control the requests (continue / abort / modify), especially block urls with resourceType: Document, Stylesheet, Image, Media, Font, Script, TextTrack, XHR, Fetch, EventSource, WebSocket, Manifest, SignedExchange, Ping, CSPViolationReport, Other.</span>
<span class="sd">https://chromedevtools.github.io/devtools-protocol/tot/Fetch/#method-enable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.setBlockedURLs&#39;</span><span class="p">,</span>
                               <span class="n">urls</span><span class="o">=</span><span class="n">urls</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.set_cookie" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_cookie</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">secure</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">httpOnly</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sameSite</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">expires</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="o">**</span><span class="n">_</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Network.setCookie]
name [string] Cookie name.
value [string] Cookie value.
url [string] The request-URI to associate with the setting of the cookie. This value can affect the default domain and path values of the created cookie.
domain [string] Cookie domain.
path [string] Cookie path.
secure [boolean] True if cookie is secure.
httpOnly [boolean] True if cookie is http-only.
sameSite [CookieSameSite] Cookie SameSite type.
expires [TimeSinceEpoch] Cookie expiration date, session cookie if not set</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_cookie</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">domain</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">secure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                         <span class="n">httpOnly</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                         <span class="n">sameSite</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">expires</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Network.setCookie]</span>
<span class="sd">name [string] Cookie name.</span>
<span class="sd">value [string] Cookie value.</span>
<span class="sd">url [string] The request-URI to associate with the setting of the cookie. This value can affect the default domain and path values of the created cookie.</span>
<span class="sd">domain [string] Cookie domain.</span>
<span class="sd">path [string] Cookie path.</span>
<span class="sd">secure [boolean] True if cookie is secure.</span>
<span class="sd">httpOnly [boolean] True if cookie is http-only.</span>
<span class="sd">sameSite [CookieSameSite] Cookie SameSite type.</span>
<span class="sd">expires [TimeSinceEpoch] Cookie expiration date, session cookie if not set&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">((</span><span class="n">url</span><span class="p">,</span> <span class="n">domain</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span><span class="s1">&#39;URL and domain should not be both null.&#39;</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                      <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                                      <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                      <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span>
                                      <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                                      <span class="n">secure</span><span class="o">=</span><span class="n">secure</span><span class="p">,</span>
                                      <span class="n">httpOnly</span><span class="o">=</span><span class="n">httpOnly</span><span class="p">,</span>
                                      <span class="n">sameSite</span><span class="o">=</span><span class="n">sameSite</span><span class="p">,</span>
                                      <span class="n">expires</span><span class="o">=</span><span class="n">expires</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.setCookie&quot;</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                               <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.set_cookies" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_cookies</span><span class="p">(</span><span class="n">cookies</span><span class="p">,</span> <span class="n">ensure_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Network.setCookies]</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_cookies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">cookies</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span>
                      <span class="n">ensure_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                      <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;[Network.setCookies]&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">cookie</span> <span class="ow">in</span> <span class="n">cookies</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s1">&#39;url&#39;</span> <span class="ow">in</span> <span class="n">cookie</span> <span class="ow">or</span> <span class="s1">&#39;domain&#39;</span> <span class="ow">in</span> <span class="n">cookie</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ChromeValueError</span><span class="p">(</span>
                <span class="s1">&#39;URL and domain should not be both null.&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ensure_keys</span><span class="p">:</span>
        <span class="n">valid_keys</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;domain&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;secure&#39;</span><span class="p">,</span> <span class="s1">&#39;httpOnly&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sameSite&#39;</span><span class="p">,</span> <span class="s1">&#39;expires&#39;</span><span class="p">,</span> <span class="s1">&#39;priority&#39;</span>
        <span class="p">}</span>
        <span class="n">cookies</span> <span class="o">=</span> <span class="p">[{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">cookie</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">valid_keys</span><span class="p">}</span>
                   <span class="k">for</span> <span class="n">cookie</span> <span class="ow">in</span> <span class="n">cookies</span><span class="p">]</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Network.setCookies&quot;</span><span class="p">,</span>
                           <span class="n">cookies</span><span class="o">=</span><span class="n">cookies</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.set_file_input" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_file_input</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="n">cssselector</span><span class="o">=</span><span class="s1">&#39;input[type=&quot;file&quot;]&#39;</span><span class="p">,</span> <span class="n">root_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>set file type input nodes with given filepaths.
1. path of filepaths will be reset as absolute posix path.
2. all the nodes which matched given cssselector will be set together for using DOM.querySelectorAll.
3. nodes in iframe tags need a new root_id but not default gotten from DOM.getDocument.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2361</span>
<span class="normal">2362</span>
<span class="normal">2363</span>
<span class="normal">2364</span>
<span class="normal">2365</span>
<span class="normal">2366</span>
<span class="normal">2367</span>
<span class="normal">2368</span>
<span class="normal">2369</span>
<span class="normal">2370</span>
<span class="normal">2371</span>
<span class="normal">2372</span>
<span class="normal">2373</span>
<span class="normal">2374</span>
<span class="normal">2375</span>
<span class="normal">2376</span>
<span class="normal">2377</span>
<span class="normal">2378</span>
<span class="normal">2379</span>
<span class="normal">2380</span>
<span class="normal">2381</span>
<span class="normal">2382</span>
<span class="normal">2383</span>
<span class="normal">2384</span>
<span class="normal">2385</span>
<span class="normal">2386</span>
<span class="normal">2387</span>
<span class="normal">2388</span>
<span class="normal">2389</span>
<span class="normal">2390</span>
<span class="normal">2391</span>
<span class="normal">2392</span>
<span class="normal">2393</span>
<span class="normal">2394</span>
<span class="normal">2395</span>
<span class="normal">2396</span>
<span class="normal">2397</span>
<span class="normal">2398</span>
<span class="normal">2399</span>
<span class="normal">2400</span>
<span class="normal">2401</span>
<span class="normal">2402</span>
<span class="normal">2403</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_file_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">filepaths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]],</span>
                         <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;input[type=&quot;file&quot;]&#39;</span><span class="p">,</span>
                         <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;set file type input nodes with given filepaths.</span>
<span class="sd">    1. path of filepaths will be reset as absolute posix path.</span>
<span class="sd">    2. all the nodes which matched given cssselector will be set together for using DOM.querySelectorAll.</span>
<span class="sd">    3. nodes in iframe tags need a new root_id but not default gotten from DOM.getDocument.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s1">&#39;filepaths is type of str will be reset to [filepaths]&#39;</span><span class="p">)</span>
        <span class="n">filepaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">filepaths</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;DOM.getDocument&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">root_id</span><span class="p">:</span>
        <span class="n">root_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;result.root.nodeId&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">root_id</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;set_file_input failed for receive data without root nodeId: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;DOM.querySelectorAll&#39;</span><span class="p">,</span>
                           <span class="n">nodeId</span><span class="o">=</span><span class="n">root_id</span><span class="p">,</span>
                           <span class="n">selector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="n">nodeIds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;result.nodeIds&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nodeIds</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;set_file_input failed for receive data without target nodeId: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="n">filepaths</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span> <span class="k">for</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="n">filepaths</span>
    <span class="p">]</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">nodeId</span> <span class="ow">in</span> <span class="n">nodeIds</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;DOM.setFileInputFiles&#39;</span><span class="p">,</span>
                               <span class="n">files</span><span class="o">=</span><span class="n">filepaths</span><span class="p">,</span>
                               <span class="n">nodeId</span><span class="o">=</span><span class="n">nodeId</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.set_flatten" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_flatten</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>use the flatten mode connection</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2405</span>
<span class="normal">2406</span>
<span class="normal">2407</span>
<span class="normal">2408</span>
<span class="normal">2409</span>
<span class="normal">2410</span>
<span class="normal">2411</span>
<span class="normal">2412</span>
<span class="normal">2413</span>
<span class="normal">2414</span>
<span class="normal">2415</span>
<span class="normal">2416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_flatten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s2">&quot;use the flatten mode connection&quot;</span>
    <span class="c1"># /devtools/browser/</span>
    <span class="k">if</span> <span class="s1">&#39;/devtools/browser/&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">webSocketDebuggerUrl</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ChromeRuntimeError</span><span class="p">(</span><span class="s1">&#39;browser can not be set flatten mode&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;connected&#39;</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listener</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">_listener</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">_buffers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">ws</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.set_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">frame_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>JS: document.write, or Page.setDocumentContent if given frame_id</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">frame_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;JS: document.write, or Page.setDocumentContent if given frame_id&quot;</span>
    <span class="k">if</span> <span class="n">frame_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">frame_id</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page_frame_id</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">frame_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;document.write(`</span><span class="si">{</span><span class="n">html</span><span class="si">}</span><span class="s1">`)&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.setDocumentContent&#39;</span><span class="p">,</span>
                               <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">,</span>
                               <span class="n">frameId</span><span class="o">=</span><span class="n">frame_id</span><span class="p">,</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.set_ua" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_ua</span><span class="p">(</span><span class="n">userAgent</span><span class="p">,</span> <span class="n">acceptLanguage</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">platform</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Network.setUserAgentOverride], reset the User-Agent of this tab</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_ua</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">userAgent</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">acceptLanguage</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">platform</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;[Network.setUserAgentOverride], reset the User-Agent of this tab&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[set_ua] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> userAgent =&gt; </span><span class="si">{</span><span class="n">userAgent</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Network.setUserAgentOverride&#39;</span><span class="p">,</span>
                           <span class="n">userAgent</span><span class="o">=</span><span class="n">userAgent</span><span class="p">,</span>
                           <span class="n">acceptLanguage</span><span class="o">=</span><span class="n">acceptLanguage</span><span class="p">,</span>
                           <span class="n">platform</span><span class="o">=</span><span class="n">platform</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.set_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_url</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">referrer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Navigate the tab to the URL. If stop loading occurs, return False.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                  <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">referrer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                  <span class="n">timeout_stop_loading</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Navigate the tab to the URL. If stop loading occurs, return False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[set_url] </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s1"> url =&gt; </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># no need wait loading</span>
        <span class="n">loaded_task</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># register loading event before seting url</span>
        <span class="n">loaded_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_loading</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                              <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="n">timeout_stop_loading</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">url</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="k">if</span> <span class="n">referrer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.navigate&quot;</span><span class="p">,</span>
                                   <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.navigate&quot;</span><span class="p">,</span>
                                   <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                   <span class="n">referrer</span><span class="o">=</span><span class="n">referrer</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="c1"># loadEventFired return True, else return False</span>
    <span class="k">if</span> <span class="n">loaded_task</span><span class="p">:</span>
        <span class="n">loaded_ok</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loaded_task</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">loaded_ok</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">data</span> <span class="ow">and</span> <span class="n">loaded_ok</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.snapshot_mhtml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">snapshot_mhtml</span><span class="p">(</span><span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.captureSnapshot], as the mhtml page</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">snapshot_mhtml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">save_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;[Page.captureSnapshot], as the mhtml page&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Page.captureSnapshot&#39;</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                             <span class="n">callback_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span>
                             <span class="n">get_data_value</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;result.data&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span> <span class="ow">and</span> <span class="n">save_path</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">save_file</span><span class="p">():</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">async_run</span><span class="p">(</span><span class="n">save_file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.stop_loading_page" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop_loading_page</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>[Page.stopLoading]</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">stop_loading_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;[Page.stopLoading]&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Page.stopLoading&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.title" class="doc doc-heading">
<code class="highlight language-python"><span class="n">title</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>await tab.title</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="s2">&quot;await tab.title&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_title</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">url</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Return the current url, <code>await tab.url</code>.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return the current url, `await tab.url`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_url</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_console" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_console</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filter_function</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Wait the filted Runtime.consoleAPICalled event.</p>
<p>consoleAPICalled event types:
log, debug, info, error, warning, dir, dirxml, table, trace, clear, startGroup, startGroupCollapsed, endGroup, assert, profile, profileEnd, count, timeEnd</p>
<p>return dict or None like:
{'method':'Runtime.consoleAPICalled','params': {'type':'log','args': [{'type':'string','value':'123'}],'executionContextId':13,'timestamp':1592895800590.75,'stackTrace': {'callFrames': [{'functionName':'','scriptId':'344','url':'','lineNumber':0,'columnNumber':8}]}}}</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_console</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Wait the filted Runtime.consoleAPICalled event.</span>

<span class="sd">        consoleAPICalled event types:</span>
<span class="sd">        log, debug, info, error, warning, dir, dirxml, table, trace, clear, startGroup, startGroupCollapsed, endGroup, assert, profile, profileEnd, count, timeEnd</span>

<span class="sd">        return dict or None like:</span>
<span class="sd">        {&#39;method&#39;:&#39;Runtime.consoleAPICalled&#39;,&#39;params&#39;: {&#39;type&#39;:&#39;log&#39;,&#39;args&#39;: [{&#39;type&#39;:&#39;string&#39;,&#39;value&#39;:&#39;123&#39;}],&#39;executionContextId&#39;:13,&#39;timestamp&#39;:1592895800590.75,&#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;:&#39;&#39;,&#39;scriptId&#39;:&#39;344&#39;,&#39;url&#39;:&#39;&#39;,&#39;lineNumber&#39;:0,&#39;columnNumber&#39;:8}]}}}</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s1">&#39;Runtime.consoleAPICalled&#39;</span><span class="p">,</span>
                                     <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                     <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">,</span>
                                     <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_console_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_console_value</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filter_function</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Wait the Runtime.consoleAPICalled event, simple data type (null, number, Boolean, string) will try to get value and return.</p>
<p>This may be very useful for send message from Chrome to Python programs with a JSON string.</p>
<p>{'method': 'Runtime.consoleAPICalled', 'params': {'type': 'log', 'args': [{'type': 'boolean', 'value': True}], 'executionContextId': 4, 'timestamp': 1592924155017.107, 'stackTrace': {'callFrames': [{'functionName': '', 'scriptId': '343', 'url': '', 'lineNumber': 0, 'columnNumber': 8}]}}}
{'method': 'Runtime.consoleAPICalled', 'params': {'type': 'log', 'args': [{'type': 'object', 'subtype': 'null', 'value': None}], 'executionContextId': 4, 'timestamp': 1592924167384.516, 'stackTrace': {'callFrames': [{'functionName': '', 'scriptId': '362', 'url': '', 'lineNumber': 0, 'columnNumber': 8}]}}}
{'method': 'Runtime.consoleAPICalled', 'params': {'type': 'log', 'args': [{'type': 'number', 'value': 1, 'description': '1234'}], 'executionContextId': 4, 'timestamp': 1592924176778.166, 'stackTrace': {'callFrames': [{'functionName': '', 'scriptId': '385', 'url': '', 'lineNumber': 0, 'columnNumber': 8}]}}}
{'method': 'Runtime.consoleAPICalled', 'params': {'type': 'log', 'args': [{'type': 'string', 'value': 'string'}], 'executionContextId': 4, 'timestamp': 1592924187756.2349, 'stackTrace': {'callFrames': [{'functionName': '', 'scriptId': '404', 'url': '', 'lineNumber': 0, 'columnNumber': 8}]}}}</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_console_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wait the Runtime.consoleAPICalled event, simple data type (null, number, Boolean, string) will try to get value and return.</span>

<span class="sd">    This may be very useful for send message from Chrome to Python programs with a JSON string.</span>

<span class="sd">    {&#39;method&#39;: &#39;Runtime.consoleAPICalled&#39;, &#39;params&#39;: {&#39;type&#39;: &#39;log&#39;, &#39;args&#39;: [{&#39;type&#39;: &#39;boolean&#39;, &#39;value&#39;: True}], &#39;executionContextId&#39;: 4, &#39;timestamp&#39;: 1592924155017.107, &#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;: &#39;&#39;, &#39;scriptId&#39;: &#39;343&#39;, &#39;url&#39;: &#39;&#39;, &#39;lineNumber&#39;: 0, &#39;columnNumber&#39;: 8}]}}}</span>
<span class="sd">    {&#39;method&#39;: &#39;Runtime.consoleAPICalled&#39;, &#39;params&#39;: {&#39;type&#39;: &#39;log&#39;, &#39;args&#39;: [{&#39;type&#39;: &#39;object&#39;, &#39;subtype&#39;: &#39;null&#39;, &#39;value&#39;: None}], &#39;executionContextId&#39;: 4, &#39;timestamp&#39;: 1592924167384.516, &#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;: &#39;&#39;, &#39;scriptId&#39;: &#39;362&#39;, &#39;url&#39;: &#39;&#39;, &#39;lineNumber&#39;: 0, &#39;columnNumber&#39;: 8}]}}}</span>
<span class="sd">    {&#39;method&#39;: &#39;Runtime.consoleAPICalled&#39;, &#39;params&#39;: {&#39;type&#39;: &#39;log&#39;, &#39;args&#39;: [{&#39;type&#39;: &#39;number&#39;, &#39;value&#39;: 1, &#39;description&#39;: &#39;1234&#39;}], &#39;executionContextId&#39;: 4, &#39;timestamp&#39;: 1592924176778.166, &#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;: &#39;&#39;, &#39;scriptId&#39;: &#39;385&#39;, &#39;url&#39;: &#39;&#39;, &#39;lineNumber&#39;: 0, &#39;columnNumber&#39;: 8}]}}}</span>
<span class="sd">    {&#39;method&#39;: &#39;Runtime.consoleAPICalled&#39;, &#39;params&#39;: {&#39;type&#39;: &#39;log&#39;, &#39;args&#39;: [{&#39;type&#39;: &#39;string&#39;, &#39;value&#39;: &#39;string&#39;}], &#39;executionContextId&#39;: 4, &#39;timestamp&#39;: 1592924187756.2349, &#39;stackTrace&#39;: {&#39;callFrames&#39;: [{&#39;functionName&#39;: &#39;&#39;, &#39;scriptId&#39;: &#39;404&#39;, &#39;url&#39;: &#39;&#39;, &#39;lineNumber&#39;: 0, &#39;columnNumber&#39;: 8}]}}}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s1">&#39;Runtime.consoleAPICalled&#39;</span><span class="p">,</span>
                                   <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                   <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;params&#39;</span><span class="p">][</span><span class="s1">&#39;args&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span><span class="n">callback_function</span><span class="p">,</span>
                                                   <span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_event" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_event</span><span class="p">(</span><span class="n">event_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filter_function</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Similar to self.recv, but has the filter_function to distinct duplicated method of event.
WARNING: the <code>timeout</code> default to None when methods with prefix <code>wait_</code></p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_event</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">event_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Similar to self.recv, but has the filter_function to distinct duplicated method of event.</span>
<span class="sd">    WARNING: the `timeout` default to None when methods with prefix `wait_`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">event</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">event_name</span><span class="p">}</span>
    <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># update the real timeout</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="o">-</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="c1"># avoid same method but different event occured, use filter_function</span>
        <span class="n">_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">filter_function</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ok</span> <span class="o">=</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span>
                    <span class="n">filter_function</span><span class="p">,</span> <span class="n">_result</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">_result</span>
                    <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;wait_event crashed for: </span><span class="si">{</span><span class="n">error</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">error</span>
        <span class="k">elif</span> <span class="n">_result</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">_result</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span><span class="n">callback_function</span><span class="p">,</span>
                                                   <span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_findall" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_findall</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">cssselector</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">max_wait_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>while loop until await tab.findall got somethine.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_findall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">regex</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                       <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                       <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                       <span class="n">flags</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span>
                       <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                       <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;while loop until await tab.findall got somethine.&#39;&#39;&#39;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">TIMEOUT_AT</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">max_wait_time</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">TIMEOUT_AT</span> <span class="o">&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">():</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="n">regex</span><span class="p">,</span>
                                    <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                    <span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span>
                                    <span class="n">flags</span><span class="o">=</span><span class="n">flags</span><span class="p">,</span>
                                    <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_includes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_includes</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">cssselector</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span> <span class="n">max_wait_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>while loop until element contains the substring.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_includes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                        <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                        <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;outerHTML&#39;</span><span class="p">,</span>
                        <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;while loop until element contains the substring.&#39;&#39;&#39;</span>
    <span class="n">exist</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">TIMEOUT_AT</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">max_wait_time</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">TIMEOUT_AT</span> <span class="o">&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">():</span>
        <span class="n">exist</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">includes</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                                    <span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                    <span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span>
                                    <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">exist</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">exist</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">exist</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_loading" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_loading</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>wait Page.loadEventFired event while page loaded.
If page loaded event catched, return True.
WARNING: methods with prefix <code>wait_</code> the <code>timeout</code> default to None.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_loading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">timeout_stop_loading</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;wait Page.loadEventFired event while page loaded.</span>
<span class="sd">    If page loaded event catched, return True.</span>
<span class="sd">    WARNING: methods with prefix `wait_` the `timeout` default to None.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">timeout</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s2">&quot;Page.loadEventFired&quot;</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                 <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">timeout_stop_loading</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_loading_page</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_loading_finished" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_loading_finished</span><span class="p">(</span><span class="n">request_dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>wait for the Network.loadingFinished event of given request id</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_loading_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="s2">&quot;wait for the Network.loadingFinished event of given request id&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_request_loading</span><span class="p">(</span><span class="n">request_dict</span><span class="o">=</span><span class="n">request_dict</span><span class="p">,</span>
                                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_request</span><span class="p">(</span><span class="n">filter_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Network.requestWillBeSent. To wait a special request filted by function, then run the callback_function(request_dict).</p>

<details class="often-used-for-http-packet-capture">
  <summary>Often used for HTTP packet capture</summary>
  <p><code>await tab.wait_request(filter_function=lambda r: print(r), timeout=10)</code></p>
</details>      <p>WARNING: requestWillBeSent event fired do not mean the response is ready,
should await tab.wait_request_loading(request_dict) or await tab.get_response(request_dict, wait_loading=True)
WARNING: methods with prefix <code>wait_</code> the <code>timeout</code> default to None.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">wait_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Network.requestWillBeSent. To wait a special request filted by function, then run the callback_function(request_dict).</span>

<span class="sd">        Often used for HTTP packet capture:</span>

<span class="sd">            `await tab.wait_request(filter_function=lambda r: print(r), timeout=10)`</span>

<span class="sd">        WARNING: requestWillBeSent event fired do not mean the response is ready,</span>
<span class="sd">        should await tab.wait_request_loading(request_dict) or await tab.get_response(request_dict, wait_loading=True)</span>
<span class="sd">        WARNING: methods with prefix `wait_` the `timeout` default to None.</span>
<span class="sd">&#39;&#39;&#39;</span>
        <span class="n">request_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s2">&quot;Network.requestWillBeSent&quot;</span><span class="p">,</span>
                                             <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">,</span>
                                             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span><span class="n">callback_function</span><span class="p">,</span>
                                                       <span class="n">request_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_request_loading" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_request_loading</span><span class="p">(</span><span class="n">request_dict</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>wait for the Network.loadingFinished event of given request id</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_request_loading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                               <span class="n">request_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                               <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="s2">&quot;wait for the Network.loadingFinished event of given request id&quot;</span>

    <span class="k">def</span> <span class="nf">request_id_filter</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;params&quot;</span><span class="p">][</span><span class="s2">&quot;requestId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">request_id</span>

    <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_request_id</span><span class="p">(</span><span class="n">request_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s1">&#39;Network.loadingFinished&#39;</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                 <span class="n">filter_function</span><span class="o">=</span><span class="n">request_id_filter</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_response" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_response</span><span class="p">(</span><span class="n">filter_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">response_body</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>wait a special response filted by function, then run the callback_function.</p>
<p>Sometimes the request fails to be sent, so use the <code>tab.wait_request</code> instead.</p>

<details class="if-response_body">
  <summary>if response_body</summary>
  <p>the non-null request_dict will contains response body.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">response_body</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;wait a special response filted by function, then run the callback_function.</span>

<span class="sd">    Sometimes the request fails to be sent, so use the `tab.wait_request` instead.</span>
<span class="sd">    if response_body:</span>
<span class="sd">        the non-null request_dict will contains response body.&#39;&#39;&#39;</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">request_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_event</span><span class="p">(</span><span class="s2">&quot;Network.responseReceived&quot;</span><span class="p">,</span>
                                         <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">,</span>
                                         <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="o">-</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response_body</span><span class="p">:</span>
        <span class="c1"># set the data value</span>
        <span class="k">if</span> <span class="n">request_dict</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_response_body</span><span class="p">(</span>
                <span class="n">request_dict</span><span class="p">[</span><span class="s1">&#39;params&#39;</span><span class="p">][</span><span class="s1">&#39;requestId&#39;</span><span class="p">],</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                <span class="n">wait_loading</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">request_dict</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">request_dict</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">_ensure_awaitable_callback_result</span><span class="p">(</span><span class="n">callback_function</span><span class="p">,</span>
                                                   <span class="n">request_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_response_context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_response_context</span><span class="p">(</span><span class="n">filter_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">response_body</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Handler context for tab.wait_response.</p>
<pre><code>async with tab.wait_response_context(
            filter_function=lambda r: tab.get_data_value(
                r, 'params.response.url') == 'http://httpbin.org/get',
            timeout=5,
    ) as r:
        await tab.goto('http://httpbin.org/get')
        result = await r
        if result:
            print(result['data'])
</code></pre>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">wait_response_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                          <span class="n">filter_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">callback_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">response_body</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                          <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handler context for tab.wait_response.</span>

<span class="sd">        async with tab.wait_response_context(</span>
<span class="sd">                    filter_function=lambda r: tab.get_data_value(</span>
<span class="sd">                        r, &#39;params.response.url&#39;) == &#39;http://httpbin.org/get&#39;,</span>
<span class="sd">                    timeout=5,</span>
<span class="sd">            ) as r:</span>
<span class="sd">                await tab.goto(&#39;http://httpbin.org/get&#39;)</span>
<span class="sd">                result = await r</span>
<span class="sd">                if result:</span>
<span class="sd">                    print(result[&#39;data&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">WaitContext</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_response</span><span class="p">(</span>
            <span class="n">filter_function</span><span class="o">=</span><span class="n">filter_function</span><span class="p">,</span>
            <span class="n">callback_function</span><span class="o">=</span><span class="n">callback_function</span><span class="p">,</span>
            <span class="n">response_body</span><span class="o">=</span><span class="n">response_body</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_tag" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_tag</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">max_wait_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Wait until the tag is ready or max_wait_time used up, sometimes it is more useful than wait loading.
cssselector: css querying the Tag.
interval: checking interval for while loop.
max_wait_time: if time used up, return None.
timeout: timeout seconds for sending a msg.</p>
<p>If max_wait_time used up: return [].
elif querySelectorAll runs failed, return None.
else: return List[Tag]
WARNING: methods with prefix <code>wait_</code> the <code>timeout</code> default to None.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                   <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                   <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">TagNotFound</span><span class="p">]:</span>
    <span class="sd">&#39;&#39;&#39;Wait until the tag is ready or max_wait_time used up, sometimes it is more useful than wait loading.</span>
<span class="sd">    cssselector: css querying the Tag.</span>
<span class="sd">    interval: checking interval for while loop.</span>
<span class="sd">    max_wait_time: if time used up, return None.</span>
<span class="sd">    timeout: timeout seconds for sending a msg.</span>

<span class="sd">    If max_wait_time used up: return [].</span>
<span class="sd">    elif querySelectorAll runs failed, return None.</span>
<span class="sd">    else: return List[Tag]</span>
<span class="sd">    WARNING: methods with prefix `wait_` the `timeout` default to None.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">TIMEOUT_AT</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">max_wait_time</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">TIMEOUT_AT</span> <span class="o">&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">():</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                       <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tag</span> <span class="ow">or</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_tag_click" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_tag_click</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">max_wait_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>wait the tag appeared and click it</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_tag_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                         <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">):</span>
    <span class="s2">&quot;wait the tag appeared and click it&quot;</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_tag</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span>
                              <span class="n">max_wait_time</span><span class="o">=</span><span class="n">max_wait_time</span><span class="p">,</span>
                              <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span>
                              <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="ichrome.async_utils.AsyncTab.wait_tags" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_tags</span><span class="p">(</span><span class="n">cssselector</span><span class="p">,</span> <span class="n">max_wait_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">
  
      <p>Wait until the tags is ready or max_wait_time used up, sometimes it is more useful than wait loading.
cssselector: css querying the Tags.
interval: checking interval for while loop.
max_wait_time: if time used up, return [].
timeout: timeout seconds for sending a msg.</p>
<p>If max_wait_time used up: return [].
elif querySelectorAll runs failed, return None.
else: return List[Tag]
WARNING: methods with prefix <code>wait_</code> the <code>timeout</code> default to None.</p>

      <details class="quote">
        <summary>Source code in <code>ichrome\async_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">wait_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">cssselector</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                    <span class="n">max_wait_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">timeout</span><span class="o">=</span><span class="n">NotSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tag</span><span class="p">],</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">TagNotFound</span><span class="p">]:</span>
    <span class="sd">&#39;&#39;&#39;Wait until the tags is ready or max_wait_time used up, sometimes it is more useful than wait loading.</span>
<span class="sd">    cssselector: css querying the Tags.</span>
<span class="sd">    interval: checking interval for while loop.</span>
<span class="sd">    max_wait_time: if time used up, return [].</span>
<span class="sd">    timeout: timeout seconds for sending a msg.</span>

<span class="sd">    If max_wait_time used up: return [].</span>
<span class="sd">    elif querySelectorAll runs failed, return None.</span>
<span class="sd">    else: return List[Tag]</span>
<span class="sd">    WARNING: methods with prefix `wait_` the `timeout` default to None.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">TIMEOUT_AT</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_timeout</span><span class="p">(</span><span class="n">max_wait_time</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">TIMEOUT_AT</span> <span class="o">&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">():</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">cssselector</span><span class="o">=</span><span class="n">cssselector</span><span class="p">,</span>
                                           <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tags</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../cmd/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Command Line" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Command Line
            </div>
          </div>
        </a>
      
      
        
        <a href="../AsyncChromeDaemon/" class="md-footer__link md-footer__link--next" aria-label="Next: AsyncChromeDaemon" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              AsyncChromeDaemon
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
    
  </body>
</html>